

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Flood Return Periods &#8212; Hydro-Informatics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'exercises/ex-floods';</script>
    <link rel="canonical" href="https://hydro-informatics.com/exercises/ex-floods.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1d Sediment Transport" href="ex-sediment.html" />
    <link rel="prev" title="Reservoir Volume (Sequent Peak Algorithm)" href="ex-sp.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/icon.jpg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/icon.jpg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../lectures/classroom.html">The Virtual Classroom</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../lectures/principles.html">Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/lectures.html">Lectures and Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/take_seat.html">Take a Seat</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../get-started/software.html">Software Resources</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-started/vm.html">Virtual Machines and Linux</a></li>

<li class="toctree-l2"><a class="reference internal" href="../get-started/ide.html">Integrated Development Environments (IDEs)</a></li>




<li class="toctree-l2"><a class="reference internal" href="../python-basics/pyinstall.html">Python (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/git.html">Version Control : git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/geo.html">Geospatial Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/install-openfoam.html">OpenFOAM (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/install-telemac.html">TELEMAC (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/others.html">Other Software Resources</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Basics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/python.html">First Steps</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pybase.html">Hello Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyerror.html">Errors, Logging, and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyloop.html">Loops and Conditional Statements</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/modularize.html">Object Orientation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyfun.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pypckg.html">Packages, Modules and Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/classes.html">Object Orientation and Classes</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/data-handling.html">Data and File Handling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pynum.html">Data Files, NumPy &amp; Pandas</a></li>





<li class="toctree-l2"><a class="reference internal" href="../jupyter/xml.html">Structured Data (XML, xlsx &amp; JSON)</a></li>

<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyplot.html">Plotting</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/pystyle.html">Code Style and Conventions</a></li>

<li class="toctree-l1"><a class="reference internal" href="../jupyter/gui.html">Graphical User Interfaces (GUIs)</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="python-exercises.html">Python Exercises</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ex-ms.html">1d Hydraulics (Manning-Strickler Formula)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex-sp.html">Reservoir Volume (Sequent Peak Algorithm)</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Flood Return Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex-sediment.html">1d Sediment Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex-gui.html">Create a GUI</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Geospatial Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../geopy/geospatial-data.html">Geospatial Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/use-qgis.html">QGIS Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/drone-processing.html">Process Drone (UAV) Imagery</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../geopy/geo-python.html">Geospatial Python</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../geopy/geo-pckg.html">Geospatial Open Source Python Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-shp.html">Shapefile (Vector) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-raster.html">Raster (Grid) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-convert.html">Vectorize and Rasterize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-arcpy.html">The Commercial arcpy Library</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="geo-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ex-geco.html">Script a Habitat Suitability Map</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numerical Modeling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../numerics/numerical-modeling.html">Principles</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../numerics/basement.html">BASEMENT</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../numerics/pre-qgis-bm.html">Pre-processing with QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../numerics/basement2d.html">Run and Check a Steady 2d Simulation</a></li>



</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../numerics/telemac.html">TELEMAC</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../numerics/pre-slf-tm.html">Pre-processing</a></li>


<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac2d.html">Telemac2d</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac2d-steady.html">Steady 2d</a></li>



<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac2d-unsteady.html">Unsteady 2d</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac3d.html">Telemac3d</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac3d-slf.html">Steady 3d (SLF - Selafin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac3d-med.html">Steady 3d (MED and Salome)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac-gaia.html">Gaia (Morphodynamics)</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/gaia-coupling.html">Introduction and Coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/gaia-basics.html">Basic Setup of Gaia</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/gaia-bedload.html">Bedload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/gaia-suspended.html">Suspended Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/gaia-run.html">Run and Analyze</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../numerics/openfoam/of-intro.html">OpenFOAM</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase.html">Multiphase Solver (interFoam Tutorial)</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-mesh.html">Geometry and Mesh Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-setup.html">Case set-up</a></li>




<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-run.html">Run OpenFOAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-post.html">Post-processing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/data-science.html">Fundamentals (Coming soon)</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../datascience/py-requirements.html">Python Requirements</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../datascience/data-prepro.html">Data Pre-Processing</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datascience/data-types.html">The Nature of Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/data-cleaning.html">Dataset Cleaning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/dimensional-analysis.html">Dimensional Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/machinelearning.html">Machine Learning (ML)</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../datascience/linear-classification.html">Linear Classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datascience/morphology-predictor-svm.html">Support Vector Machine (SVM)</a></li>


</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../documentation/documentation.html">How to Markdown and Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/notation.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/bibliography.html">References</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="docs-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ex-git.html">Git and Markdown</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-programming.html">Programming Tools and IDEs</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-anaconda.html">Debugging Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-python.html">Debugging Python Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-jupyter.html">Debugging Jupyter</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-numerical-models.html">Numerical Models</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-basement.html">Debugging BASEMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-telemac.html">Debugging TELEMAC</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-os.html">Operating Systems (Linux and VMs)</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-linux.html">Debugging Debian Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-vm.html">Debugging Virtual Machines</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-scilife.html">Science Life Hacks</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-zotero.html">Zotero Utilities</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../terms/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../terms/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/contributors.html">Contributors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/hydro-informatics/jupyter-python-course" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/exercises/ex-floods.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Flood Return Periods</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terminology">Terminology</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-probability-of-a-100-year-flood-occurring-in-100-years-is-63">The Probability of a 100-year Flood Occurring in 100 Years is 63%</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-discharge-data">Get Discharge Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#discharge-data-sources">Discharge Data Sources</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-data-with-pandas">Load Data with <em>pandas</em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-the-data">Plot the Data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construct-series-of-annual-maximum-discharge">Construct Series of Annual Maximum Discharge</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-exceedance-probability-and-recurrence-intervals">Calculate Exceedance Probability and Recurrence Intervals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#outside-the-box">Outside the Box</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="flood-return-periods">
<span id="ex-floods"></span><h1>Flood Return Periods<a class="headerlink" href="#flood-return-periods" title="Permalink to this headline">#</a></h1>
<div class="admonition-goals admonition">
<p class="admonition-title">Goals</p>
<p>Load custom modules and functions in a script. Open comma-type delimited files and manipulate files with <a class="reference internal" href="../jupyter/pynum.html#pandas"><span class="std std-ref">Pandas</span></a>.</p>
</div>
<div class="attention admonition">
<p class="admonition-title">Requirements</p>
<p>Python libraries: <a class="reference internal" href="../jupyter/pynum.html#pandas"><span class="std std-ref">Pandas</span></a> and <em>matplotlib</em>. Understand data handling with <a class="reference internal" href="../jupyter/pynum.html#pandas"><span class="std std-ref">Pandas</span></a>.</p>
</div>
<p>Get ready by cloning the exercise repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Ecohydraulics</span><span class="o">/</span><span class="n">Exercise</span><span class="o">-</span><span class="n">FloodReturn</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<figure class="align-default" id="flood-image">
<img alt="floods Mangfall Bad Aibling Hochwasser" src="../_images/hw-aibling.jpg" />
<figcaption>
<p><span class="caption-number">Fig. 10 </span><span class="caption-text">Flood at the Mangfall River in Bavaria (source: KSS 2020).</span><a class="headerlink" href="#flood-image" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<section id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">#</a></h2>
<p>Flood frequency analysis uses a series of discharge data (e.g., from a gauging station) and evaluates the occurrence probability of a particular discharge. Thus, the occurrence probability defines the frequency of a discharge, which is important for two reasons:</p>
<ol class="arabic simple">
<li><p><strong>Flood safety</strong>: Many legal frames use a <strong>recurrence interval</strong> (i.e., a return period or frequency in units of years) to define safety levels that buildings and infrastructure must meet.</p></li>
<li><p><strong>Ecohydraulics</strong>: In arid areas, in particular, it is important to know how long certain discharges are below certain levels, where many aquatic habitats may not be deep enough, too hot, or disconnected from the main channel. Therefore, we want to know the <strong>exceedance probability</strong> of a given discharge.</p></li>
</ol>
<p>The relationship between the exceedance probability and the recurrence interval results from the definition of both terms:</p>
<ul class="simple">
<li><p>The <strong>exceedance probability</strong> is the likelihood of an event of a certain magnitude (in m<span class="math notranslate nohighlight">\(^3\)</span>/s or CFS) or higher.</p></li>
<li><p>The <strong>recurrence interval</strong> is the inverse of the exceedance probability and expresses the average return period of an event of a certain magnitude in units of time.</p></li>
</ul>
<p>The calculation concept of the return period makes two elementary assumptions. First, it is assumed that the individual flow events have a stationary peak. Second, statistical independence of individual events is assumed. The assumption of statistical independence means that this year a 100-year flood occurs with the same probability as next year, regardless of whether or not a 100-year flood actually occurred this year. Thus, for any given year, the probability of a 100-year flood occurring is 1/100 (or 1/50 for a 50-year flood and so on).</p>
</section>
<section id="the-probability-of-a-100-year-flood-occurring-in-100-years-is-63">
<h2>The Probability of a 100-year Flood Occurring in 100 Years is 63%<a class="headerlink" href="#the-probability-of-a-100-year-flood-occurring-in-100-years-is-63" title="Permalink to this headline">#</a></h2>
<p>As engineers we often want to know how likely it is that a 100-year flood will occur within the next 2, 5, 10, … or 100 years (i.e., what are the likely costs of flood damage associated with a 100-year flood?). The answer to that question is <em>“the opposite likelihood of no 100-year flood occurring in the next 2, 5, or 10 years”</em>. Mathematically that means the annual occurrence probability <span class="math notranslate nohighlight">\(Pr\)</span> of an event with a recurrence interval <span class="math notranslate nohighlight">\(T=100\)</span> years over an observation period of <span class="math notranslate nohighlight">\(\Delta t \in [2, 5, 10, 100]\)</span> years is:</p>
<p><span class="math notranslate nohighlight">\(Pr(T=100, \Delta t=2, 5, 10, 100) = (1 - (1-1/T)^{\Delta t})\)</span></p>
<p><a class="reference internal" href="#tab-pr-floods"><span class="std std-numref">Table 1</span></a> shows solutions to the probability <span class="math notranslate nohighlight">\(Pr(T, \Delta t)\)</span> function for observation periods <span class="math notranslate nohighlight">\(\Delta t\)</span> of 2, 5, 10, and 100 years, as well as recurrence intervals <span class="math notranslate nohighlight">\(T\)</span> of 10, 50, and 100 years.</p>
<table class="table" id="tab-pr-floods">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Solutions to the probability function <span class="math notranslate nohighlight">\(Pr(T, \Delta t)\)</span> for selected observation periods <span class="math notranslate nohighlight">\(\Delta t\)</span>.</span><a class="headerlink" href="#tab-pr-floods" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><span class="math notranslate nohighlight">\(Pr(T, \Delta t)\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\Delta t\)</span> = 2</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\Delta t\)</span> = 5</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\Delta t\)</span> = 10</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\Delta t\)</span> = 100</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(T\)</span> = 10</p></td>
<td><p>19.00%</p></td>
<td><p>40.95%</p></td>
<td><p>65.13%</p></td>
<td><p>100.00%</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(T\)</span> = 50</p></td>
<td><p>3.96%</p></td>
<td><p>9.61%</p></td>
<td><p>18.29%</p></td>
<td><p>86.74%</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(T\)</span> = 100</p></td>
<td><p>1.99%</p></td>
<td><p>4.90%</p></td>
<td><p>9.56%</p></td>
<td><p>63.40%</p></td>
</tr>
</tbody>
</table>
<p>Visit the <a class="reference external" href="https://www.usgs.gov/special-topic/water-science-school/science/100-year-flood?qt-science_center_objects=0#qt-science_center_objects"><em>USGS</em> water science school</a> to learn more about flood (and drought) recurrence interval.</p>
</section>
<section id="get-discharge-data">
<h2>Get Discharge Data<a class="headerlink" href="#get-discharge-data" title="Permalink to this headline">#</a></h2>
<section id="discharge-data-sources">
<h3>Discharge Data Sources<a class="headerlink" href="#discharge-data-sources" title="Permalink to this headline">#</a></h3>
<p>Flow data can be retrieved from gauging stations. In Germany, the <a class="reference external" href="http://www.dgj.de/">“Gewässerkundliches Jahrbuch”</a> provides a compound overview of statistic data from gauging stations. Note that many gauging stations are, as in many other countries, too, managed by state authorities and only a small share of data is available from federal institutions. For example, gauge data for Baden-Württemberg are available at the State Institute for the Environment, Survey and Nature Conservation’s (LUBW) <a class="reference external" href="https://hvz.lubw.baden-wuerttemberg.de/">geo portal</a>. The following list provides more sources for discharge data around the globe.</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://www.bafg.de">Bundesanstalt für Gewässerkunde <em>BfG</em></a> runs the <a class="reference external" href="https://www.bafg.de/GRDC/EN/Home/homepage_node.html">Global Runoff Data Centre <em>GRDC</em></a> for the World Meteorological Organization <em>WMO</em> to provide river discharge data worldwide. The <em>GRDC</em>’s download platform is available in the form of an <a class="reference external" href="https://portal.grdc.bafg.de/applications/public.html?publicuser=PublicUser#dataDownload/Home">interactive web-GIS</a>. To get the data, go to their <a class="reference external" href="https://portal.grdc.bafg.de/applications/public.html?publicuser=PublicUser#dataDownload/Stations">download interface</a>, select the desired station, switch to <em>Table</em> view (third row in the top left of the window), check the station, click <strong>download</strong>, and fill the form to send the request. You will receive an email with a download link for the requested data (wait a couple of minutes before clicking on the link - the preparation may take more time than the email).</p></li>
<li><p>Flow datasets from alpine and midland rivers are provided by the Swiss Federal Office for the Environment’s <a class="reference external" href="https://www.hydrodaten.admin.ch/">hydrological data platform</a> (for long-term observations, a form has to be filled out here, too).</p></li>
<li><p>In the United States, the National Oceanic and Atmospheric Administration <em>NOAA</em> provides discharge data from the past and forecasts for watersheds in North America. For example, the <a class="reference external" href="https://www.cnrfc.noaa.gov/">California Nevada River Forecast Center</a> provides flow forecasts for the South-Western United States, and historic data can be accessed from the <a class="reference external" href="http://cdec.water.ca.gov/">California Data Exchange Center <em>CDEC</em></a>.</p></li>
<li><p>A general <em>US</em>-borne interface for loading flow data and statistics comes with the <a class="reference external" href="https://hydrofunctions.readthedocs.io/"><code class="docutils literal notranslate"><span class="pre">hydrofunctions</span></code> <em>Python</em> library</a> provided by the United States Geological Survey <em>USGS</em>. This library enables to directly get gauge data and statistics based on a stream gauge ID. For example <code class="docutils literal notranslate"><span class="pre">output</span> <span class="pre">=</span> <span class="pre">hydrofunctions.peaks(&quot;01541200&quot;)</span></code></p>
<ul>
<li><p>To install <code class="docutils literal notranslate"><span class="pre">hydrofunctions</span></code> in a <a class="reference internal" href="../python-basics/pyinstall.html#conda-env"><span class="std std-ref">conda</span></a> environment, type <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">hydrofunctions</span></code> in <a class="reference internal" href="../python-basics/pyinstall.html#install-pckg"><span class="std std-ref">Anaconda Prompt</span></a>.</p></li>
<li><p>Example usage:</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import hydrofunctions as hf
hf.draw_map()` # only runs in JupyterLab
</pre></div>
</div>
</section>
</section>
<section id="load-data-with-pandas">
<h2>Load Data with <em>pandas</em><a class="headerlink" href="#load-data-with-pandas" title="Permalink to this headline">#</a></h2>
<p>Create a new <em>Python</em> file (e.g., <code class="docutils literal notranslate"><span class="pre">discharge_analysis.py</span></code>) and import <em>pandas</em> as <code class="docutils literal notranslate"><span class="pre">pd</span></code> at the beginning. Read the provided flow data series file <code class="docutils literal notranslate"><span class="pre">&quot;daily-flow-series.csv&quot;</span></code> with <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code>.
The header (column names) is in row 36, but we do not use the column names from the <em>csv</em> file and overwrite them with the <code class="docutils literal notranslate"><span class="pre">names</span></code> argument (<code class="docutils literal notranslate"><span class="pre">&quot;Date&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Q</span> <span class="pre">(CMS)&quot;</span></code> (for Cubic Meters per Second)). Alternatively, we could use the <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> argument to indicate where the data content starts in the file.
With <code class="docutils literal notranslate"><span class="pre">sep=&quot;;&quot;</span></code>, we indicate that columns are separated by a semicolon. The <code class="docutils literal notranslate"><span class="pre">usecols=[0,</span> <span class="pre">2]</span></code> argument specifies that we only want to read columns 0 (date) and 2 (discharge) because the information content of column 1 (time) is not relevant for daily discharge. The <code class="docutils literal notranslate"><span class="pre">parse_dates=[0]</span></code> argument lets <em>pandas</em> know that column 0 contains date-formatted values. Alternatively, we could use a <code class="docutils literal notranslate"><span class="pre">dtype={&quot;Date&quot;:</span> <span class="pre">...</span> <span class="pre">}</span></code> dictionary to specify the data formats of columns. However, using <code class="docutils literal notranslate"><span class="pre">dtype</span></code> would require importing <code class="docutils literal notranslate"><span class="pre">datetime</span></code> and induce unnecessary complexity. In addition, the <code class="docutils literal notranslate"><span class="pre">index_col</span></code> argument defines the column indices, which need to have a date format for the later analyses. In addition, use the optional keyword argument <code class="docutils literal notranslate"><span class="pre">encoding=&quot;latin1&quot;</span></code> because the provided data file contains some special characters that cannot be recognized with the standard <code class="docutils literal notranslate"><span class="pre">utf-8</span></code> encoding.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;flow-data/daily-flow-series.csv&quot;</span><span class="p">,</span>
                 <span class="n">header</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span>
                 <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">,</span>
                 <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="s2">&quot;Q (CMS)&quot;</span><span class="p">],</span>
                 <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                 <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                 <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Did everything work? Verify the loaded <code class="docutils literal notranslate"><span class="pre">data_series</span></code> with <code class="docutils literal notranslate"><span class="pre">print(data_series.head())</span></code></p>
<p>If your CSV file has special characters (e.g. <sup>3</sup>), you may need to use the optional keyword argument <code class="docutils literal notranslate"><span class="pre">encoding=&quot;latin1&quot;</span></code> because some special characters cannot be recognized with the standard <code class="docutils literal notranslate"><span class="pre">utf-8</span></code> encoding.</p>
<section id="plot-the-data">
<h3>Plot the Data<a class="headerlink" href="#plot-the-data" title="Permalink to this headline">#</a></h3>
<p>Plotting data is not the focus of this exercise and for this reason, there is a ready-to-use function available in the <code class="docutils literal notranslate"><span class="pre">plot_discharge.py</span></code> script. Make sure that the <code class="docutils literal notranslate"><span class="pre">plot_discharge.py</span></code> is in the same directory as the above <code class="docutils literal notranslate"><span class="pre">discharge_analysis.py</span></code> <em>Python</em> script (recall how to load <a class="reference internal" href="../jupyter/pypckg.html#sec-pypckg"><span class="std std-ref">Packages, Modules and Libraries</span></a>). Use the <code class="docutils literal notranslate"><span class="pre">plot_discharge</span></code> function in <code class="docutils literal notranslate"><span class="pre">plot_discharge.py</span></code> as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">plot_discharge</span> <span class="kn">import</span> <span class="n">plot_discharge</span>
<span class="n">plot_discharge</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Q (CMS)&quot;</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Daily Flows 1826 - 2016&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>On a side note, <code class="docutils literal notranslate"><span class="pre">plot_discharge</span></code> uses the <a class="reference internal" href="../jupyter/pyplot.html#matplotlib"><span class="std std-ref">Matplotlib</span></a> library.</p>
</section>
</section>
<section id="construct-series-of-annual-maximum-discharge">
<h2>Construct Series of Annual Maximum Discharge<a class="headerlink" href="#construct-series-of-annual-maximum-discharge" title="Permalink to this headline">#</a></h2>
<p>Flood event recurrence intervals result from statistics of the annual maximum discharge. Therefore, use <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html"><em>pandas</em>’ resample</a> function to find annual maximum values. The resample function requires the definition of a <code class="docutils literal notranslate"><span class="pre">DateTimeIndex</span></code>, which we already implemented by using the <code class="docutils literal notranslate"><span class="pre">index_col</span></code> argument when we loaded the data. The first (and only required) argument for the <code class="docutils literal notranslate"><span class="pre">resample</span></code> function is the rule defining the length of the time frame to which re-sampling applies. Here, we use <code class="docutils literal notranslate"><span class="pre">&quot;A&quot;</span></code> for annual statistics. For using bi-annual or 5-year periods, we could use the rule <code class="docutils literal notranslate"><span class="pre">&quot;5A&quot;</span></code>. More rules can be found at the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases"><em>pandas</em> docs</a>.
In addition, we use the argument <code class="docutils literal notranslate"><span class="pre">kind=period</span></code>, because we are only interested in the year in which the discharge occurred. Finally, we apply <code class="docutils literal notranslate"><span class="pre">.max()</span></code> to run <em>maximum</em> statistics on the data frame. Since the re-sampled dataframe is again a dataframe, all dataframe methods can also be applied to it. That is, instead of <code class="docutils literal notranslate"><span class="pre">max()</span></code> we can as well use <code class="docutils literal notranslate"><span class="pre">min()</span></code>, <code class="docutils literal notranslate"><span class="pre">sum()</span></code>, <code class="docutils literal notranslate"><span class="pre">median()</span></code>, <code class="docutils literal notranslate"><span class="pre">mean()</span></code> and so on (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/frame.html">see pandas dataframe methods</a>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">annual_max_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
<p>Because we use <code class="docutils literal notranslate"><span class="pre">kind=&quot;period&quot;</span></code>, the row indices of <code class="docutils literal notranslate"><span class="pre">annual_max_df</span></code> correspond to time periods of years. For instance, the row index <code class="docutils literal notranslate"><span class="pre">1826</span></code> corresponds to the period <code class="docutils literal notranslate"><span class="pre">1826-01-01</span></code> through <code class="docutils literal notranslate"><span class="pre">1826-12-31</span></code>. However, we need integer numbers of years rather than periods for the calculation of return periods. To get integer formats of years, we transfer the year of each period into a new column of the data frame and reset the row indices. Resetting the row indices to default integer indices through (<code class="docutils literal notranslate"><span class="pre">drop=True</span></code>) is not absolutely necessary, but serves the physical correctness of the data frame. The argument <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> replaces the indices inside <code class="docutils literal notranslate"><span class="pre">annual_max_df</span></code> (otherwise, we needed to write <code class="docutils literal notranslate"><span class="pre">annual_max_df</span> <span class="pre">=</span> <span class="pre">annual_max_df.reset_index(drop=True)</span></code>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">annual_max_df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annual_max_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span>
<span class="n">annual_max_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annual_max_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Optionally, plot the annual maxima with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_discharge</span><span class="p">(</span><span class="n">annual_max_df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">annual_max_df</span><span class="p">[</span><span class="s2">&quot;Q (CMS)&quot;</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Annual Flows 1826 - 2016&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Resampling does not preserve the original recording dates of discharges.</p>
</div>
</section>
<section id="calculate-exceedance-probability-and-recurrence-intervals">
<h2>Calculate Exceedance Probability and Recurrence Intervals<a class="headerlink" href="#calculate-exceedance-probability-and-recurrence-intervals" title="Permalink to this headline">#</a></h2>
<p>The exceedance probability <span class="math notranslate nohighlight">\(Pr\)</span> of a particular event within the observation period is:</p>
<div class="math notranslate nohighlight">
\[
Pr(i) = (N - i + 1) / (N + 1)
\]</div>
<p>where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(N\)</span> is the total number of observation years, and</p></li>
<li><p><span class="math notranslate nohighlight">\(i\)</span> is the <em>rank</em> of the event.</p></li>
</ul>
<p>To rank the events, we first need to sort the maximum annual discharge data frame (<code class="docutils literal notranslate"><span class="pre">annual_max_df</span></code>) by the smallest to largest discharge value (rather than in time):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">annual_max_df_sorted</span> <span class="o">=</span> <span class="n">annual_max_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Q (CMS)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, we derive the number of observations <span class="math notranslate nohighlight">\(N\)</span> (<code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">annual_max_df_sorted.shape[0]</span></code>) and add a <code class="docutils literal notranslate"><span class="pre">&quot;rank&quot;</span></code> column, in which we simply enumerate the rows using the <code class="docutils literal notranslate"><span class="pre">range</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">annual_max_df_sorted</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">annual_max_df_sorted</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, we have all ingredients to calculate the probability of every event with the above shown <span class="math notranslate nohighlight">\(Pr(rank=i)\)</span>-formula.<br></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">annual_max_df_sorted</span><span class="p">[</span><span class="s2">&quot;pr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">annual_max_df_sorted</span><span class="p">[</span><span class="s2">&quot;rank&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Recall, the recurrence interval (here: return period in years) is the inverse of the exceedance probability and we can add it to the data frame with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">annual_max_df_sorted</span><span class="p">[</span><span class="s2">&quot;return-period&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">annual_max_df_sorted</span><span class="p">[</span><span class="s2">&quot;pr&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Check the resulting highest discharge and its return period:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">annual_max_df_sorted</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
<p>Plot the resulting probability and return curves with the plot functions provided in the <code class="docutils literal notranslate"><span class="pre">plot_result.py</span></code> <em>Python</em> script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_q_freq</span><span class="p">(</span><span class="n">annual_max_df_sorted</span><span class="p">)</span>
<span class="n">plot_q_return_period</span><span class="p">(</span><span class="n">annual_max_df_sorted</span><span class="p">)</span>
</pre></div>
</div>
<div class="attention admonition">
<p class="admonition-title">Variable name consistency</p>
<p>The plot functions only work correctly if the probability column is named <span class="math notranslate nohighlight">\(Pr\)</span>, the return period column is named <span class="math notranslate nohighlight">\(return-period\)</span>, and the discharge column is named <span class="math notranslate nohighlight">\(Q (CMS)\)</span> (otherwise, consider renaming the data frame column header names or modifying the plot functions).</p>
</div>
</section>
<section id="outside-the-box">
<h2>Outside the Box<a class="headerlink" href="#outside-the-box" title="Permalink to this headline">#</a></h2>
<p>The here shown method is only an interpolation. For extrapolating return periods beyond the length of the observation period (e.g., for extreme events such as a 1000-year flood), a prediction model is necessary (e.g., Gumbel distributed-extrapolation).</p>
<p>After all, there is already software that calculates return periods, freely available at the U.S. Army Corps of Engineers Hydrologic Engineering Center (<em>HEC</em>) <span id="id1">[<a class="reference internal" href="../documentation/bibliography.html#id581" title="U.S. Army Corps of Engineeers. Hydrologic Engineering Centers River Analysis System (HEC-RAS). U.S. Army Corps of Engineeers (USACE), Davis, CA, USA, 2016. URL: http://www.hec.usace.army.mil/software/hec-ras/.">USACoEngineeers16</a>]</span>: <a class="reference external" href="https://www.hec.usace.army.mil/software/hec-ssp/">HEC-SPP</a>. HEC-SPP enables the calculation of flow event frequencies and return periods according to US standards. So if you are not working in or for the United States, you still may want to have your code ready. Moreover, <em>HEC-SPP</em> requires pre-processing of discharge data (i.e., it only works with annual maxima).</p>
<div class="admonition-homework admonition">
<p class="admonition-title">Homework</p>
<p>Use the formulae in the our <a class="reference external" href="https://github.com/Ecohydraulics/Exercise-FloodReturn/raw/main/flow-data/flood-statistics-gumble-template.xlsx">Gumble-template workbook</a> to implement the Gumbel distribution for extrapolating a 200, 500, and 1000-years flood. Interpolations discharges of 2, 5, 10, 20, and 50-year flow events. <em>Use loops and functions!</em></p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hydro-informatics/jupyter-python-course",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./exercises"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="ex-sp.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Reservoir Volume (Sequent Peak Algorithm)</p>
      </div>
    </a>
    <a class="right-next"
       href="ex-sediment.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">1d Sediment Transport</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terminology">Terminology</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-probability-of-a-100-year-flood-occurring-in-100-years-is-63">The Probability of a 100-year Flood Occurring in 100 Years is 63%</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-discharge-data">Get Discharge Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#discharge-data-sources">Discharge Data Sources</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-data-with-pandas">Load Data with <em>pandas</em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-the-data">Plot the Data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construct-series-of-annual-maximum-discharge">Construct Series of Annual Maximum Discharge</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-exceedance-probability-and-recurrence-intervals">Calculate Exceedance Probability and Recurrence Intervals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#outside-the-box">Outside the Box</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Sebastian Schwindt, Beatriz Negreiros, Federica Scolari, Ricardo Barros
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Load and Write Basic Data Files &#8212; Hydro-Informatics</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://hydro-informatics.github.io/python-basics/pynum.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Manipulation of Workbooks and JSON Files" href="xml.html" />
    <link rel="prev" title="Data and File Handling" href="data-handling.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://hydro-informatics.github.io/python-basics/pynum.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Load and Write Basic Data Files" />
<meta property="og:description" content="Load and Write Basic Data Files  Data can be stored in many different (text) file formats such as txt or csv files. Python provides the open(file) and write(..." />
<meta property="og:image"       content="https://hydro-informatics.github.io/_static/icon.png" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/icon.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Hydro-Informatics</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Home
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Get Started
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../lectures/classroom.html">
   The Virtual Classroom
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../lectures/lectures.html">
     Lectures and exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lectures/take_seat.html">
     Take a Seat in the Virtual Classroom
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../get-started/software.html">
   Software Resources
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/vm.html">
     Virtual machines and Linux
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/ide.html">
     Anaconda and Integrated Development Environments (IDEs)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/git.html">
     Introduction to git
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/geo.html">
     Geospatial Software
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/install-openfoam.html">
     Install OpenFOAM
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/install-telemac.html">
     open TELEMAC (Installation)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/others.html">
     Other Software Resources
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Python Basics
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="python.html">
   Get Started with Python
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="pyinstall.html">
     Install Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pybase.html">
     First steps
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pyerror.html">
     Errors, Logging, and Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pyloop.html">
     Loops and Conditional Statements
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="modularize.html">
   Modularization &amp; Object Orientation
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="pyfun.html">
     Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pypckg.html">
     Packages, Modules and Libraries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="classes.html">
     Object Orientation and Classes
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="data-handling.html">
   Data and File Handling
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Load and Write Basic Data Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#numpy">
     NumPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#pandas">
     Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="#dates-and-time">
     Dates and Time
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="xml.html">
     Manipulation of Workbooks and JSON Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pyplot.html">
     Plotting
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pystyle.html">
   Code Style and Conventions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gui.html">
   Graphical User Interfaces (GUIs)
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../exercises/python-exercises.html">
   Python Exercises
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-ms.html">
     1d Hydraulics (Manning-Strickler Formula)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-sp.html">
     Reservoir Volume Calculation with a Sequent Peak Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-floods.html">
     Calculate flood return periods
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-sediment.html">
     One-dimensional (1d) Cross-section Averaged Sediment Transport
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-gui.html">
     Create a
     <strong>
      G
     </strong>
     raphical
     <strong>
      U
     </strong>
     ser
     <strong>
      I
     </strong>
     nterface (GUI)
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Documentation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../documentation/documentation.html">
   Markdown and Code Documentation
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../exercises/docs-exercises.html">
   Exercises
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-git.html">
     Git and markdown
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Geospatial Analysis
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../geopy/geospatial-data.html">
   Geospatial Data
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../geopy/geo-python.html">
   Geospatial Python
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../geopy/geo-pckg.html">
     Geospatial Python - Open Source Packages
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../geopy/geo-shp.html">
     Shapefile (vector dataset) handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../geopy/geo-raster.html">
     Raster (Gridded) Dataset Handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../geopy/geo-convert.html">
     Raster to Vector Conversion and Vice Versa
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../geopy/geo-arcpy.html">
     The Commercial arcpy Library
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../exercises/geo-exercises.html">
   Exercises
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-geco.html">
     Create a habitat suitability map
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Numerical Modeling
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../numerics/numerical-modeling.html">
   Principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numerics/pre-qgis.html">
   Pre-Processing with QGIS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numerics/basement.html">
   BASEMENT
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../numerics/telemac.html">
   TELEMAC
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../numerics/telemac2d.html">
     Pre-Processing for TELEMAC models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../numerics/telemac3d.html">
     3d modeling with TELEMAC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../numerics/telemac-gaia.html">
     Gaia Workflow
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numerics/openfoam.html">
   OpenFOAM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../numerics/calibration.html">
   Calibration and Valdiation
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Troubleshoot
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../troubleshoot/dbg-programming.html">
   Programming Tools and IDEs
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-anaconda.html">
     Debugging Anaconda
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-python.html">
     Debugging Python Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-jupyter.html">
     Debugging Jupyter
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../troubleshoot/dbg-numerical-models.html">
   Numerical Models
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-basement.html">
     Debugging BASEMENT
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-telemac.html">
     Debugging TELEMAC/SALOME
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../troubleshoot/dbg-os.html">
   Operating Systems (Linux and VMs)
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-linux.html">
     Debugging Debian Linux
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-vm.html">
     Debugging Virtual Machines
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Disclaimer and License
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../terms/license.html">
   License
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../terms/disclaimer.html">
   Disclaimer
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Authored by <a href="https://sebastian-schwindt.org">Sebastian Schwindt</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/python-basics/pynum.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/hydro-informatics/hydro-informatics.github.io"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/hydro-informatics/hydro-informatics.github.io/main/v2/gh/hydro-informatics/hydro-informatics.github.io/main?urlpath=lab/tree/./python-basics/pynum.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Load and Write Basic Data Files
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-open-text-file-data">
     Load (Open) Text File Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#read-only">
     Read-only
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-and-write-files">
     Create and Write Files
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modify-existing-files">
     Modify Existing Files
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#numpy">
   NumPy
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installation">
     Installation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#usage">
     Usage
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#color-arrays">
     Color Arrays
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#array-matrix-operations">
     Array (Matrix) Operations
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#array-shape-manipulation">
     Array Shape Manipulation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#numpy-file-handling-and-np-nan">
     <em>
      NumPy
     </em>
     File Handling and
     <code class="docutils literal notranslate">
      <span class="pre">
       np.nan
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#statistics">
     Statistics
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#can-numpy-do-matlab">
     Can
     <em>
      NumPy
     </em>
     do
     <em>
      MATLAB
     </em>
     ®?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pandas">
   Pandas
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     Installation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     Usage
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-frames-series">
     Data frames &amp; Series
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-create-a-pandas-dataframe-of-froude-numbers">
     Example Create a
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas.DataFrame
      </span>
     </code>
     (of Froude Numbers)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#append-data-to-a-pandas-dataframe">
     Append Data to a
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas.DataFrame
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#numpy-arrays-and-pandas-data-frames">
     <em>
      NumPy
     </em>
     Arrays and
     <em>
      pandas
     </em>
     Data Frames
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#access-data-frames-entries">
     Access Data Frames Entries
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reshape-data-frames">
     Reshape Data Frames
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#file-handling-csv-workbooks-and-more">
     File Handling (
     <em>
      csv
     </em>
     , Workbooks, and More)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#categorical-data">
     Categorical Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-frame-statistics">
     Data Frame Statistics
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#apply-custom-own-functions-to-data-frames">
     Apply Custom (Own) Functions to Data Frames
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dates-and-time">
   Dates and Time
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="load-and-write-basic-data-files">
<h1>Load and Write Basic Data Files<a class="headerlink" href="#load-and-write-basic-data-files" title="Permalink to this headline">¶</a></h1>
<p>Data can be stored in many different (text) file formats such as <em>txt</em> or <em>csv</em> files. <em>Python</em> provides the <code class="docutils literal notranslate"><span class="pre">open(file)</span></code> and <code class="docutils literal notranslate"><span class="pre">write(...)</span></code> functions to read and write data from nearby every text file format, respectively. There are packages such as <code class="docutils literal notranslate"><span class="pre">csv</span></code> (for <em>csv</em> files), which simplify handling specific file types. This section illustrates the use of the <code class="docutils literal notranslate"><span class="pre">load(file)</span></code> and <code class="docutils literal notranslate"><span class="pre">write(...)</span></code> functions, and introduces the <em>pandas</em> module with its capacity to import and export numeric data along with row and column headers.</p>
<div class="section" id="load-open-text-file-data">
<span id="open-modes"></span><h2>Load (Open) Text File Data<a class="headerlink" href="#load-open-text-file-data" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">open</span></code> command loads text files as file object in <em>Python</em>. The syntax of the <code class="docutils literal notranslate"><span class="pre">open</span></code> command is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;file-name&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file-name</span></code> is the file to open (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;data.txt&quot;</span></code>); if the file is not in the script directory, the <em>file name</em> needs to be extended by the full directory (path) to the data file (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;C:/experiment1/data.txt&quot;</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span></code> defines the access type to the file and it can take the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> - read only (default value if no <code class="docutils literal notranslate"><span class="pre">&quot;mode&quot;</span></code> value is provided (the file cannot be modified nor overwritten).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rb&quot;</span></code> - read-only in binary format; the binary format is advantageous if the file is not a text file but media such as pictures or videos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;r+&quot;</span></code> - read and write.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> - write only; a new file is created if a file with the same name does not yet exist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;wb&quot;</span></code> - write-only file in binary mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;w+&quot;</span></code> - create, write and read.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;wb+&quot;</span></code> - write and read in binary mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> - append new data to a file; the write-pointer is placed at the end of the file and a new file is created if a file with the provided file name does not yet exist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ab&quot;</span></code> - append new data in binary mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;a+&quot;</span></code> - both append (write at the end) and read.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ab+&quot;</span></code> - append and read data in binary mode.</p></li>
</ul>
</li>
</ul>
<p>When <code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> modes are used, the file pointer (i.e, the blinking cursor that you can see for example in Word documents) is place at the beginning of the file. For <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> modes, the file pointer is placed at the end of the file.</p>
<p>It is good practive to read and write data from and to a file within a <code class="docutils literal notranslate"><span class="pre">with</span></code> statement to avoid file lock issues. For example, the following code block creates a new text file within a <code class="docutils literal notranslate"><span class="pre">with</span></code> statement:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/new.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;And yet it moves.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="read-only">
<span id="read"></span><h2>Read-only<a class="headerlink" href="#read-only" title="Permalink to this headline">¶</a></h2>
<p>Once the file object is created, we can parse the file and copy the file data content to a desired <em>Python</em> <a class="reference external" href="pybase.html#var">data type</a> (e.g., a list, tuple or dictionary). Parsing the data uses <a class="reference external" href="pyloop.html#for"><em>for-loops</em></a> (other loop types will also work) to iterate on lines and line entries. The lines represent <em>strings</em>, where the data columns can be separated by using the built-in <em>string</em> function <code class="docutils literal notranslate"><span class="pre">line_as_list</span> <span class="pre">=</span> <span class="pre">str().split(&quot;SEPARATOR&quot;)</span></code>, where <code class="docutils literal notranslate"><span class="pre">&quot;SEPARATOR&quot;</span></code> can be <code class="docutils literal notranslate"><span class="pre">&quot;,&quot;</span></code> (comma), <code class="docutils literal notranslate"><span class="pre">&quot;;&quot;</span></code> (semicolon), <code class="docutils literal notranslate"><span class="pre">&quot;\t&quot;</span></code> (tab), or any other sign. After reading all data from a file, use <code class="docutils literal notranslate"><span class="pre">file_object.close()</span></code> to avoid that the file is locked by <em>Python</em> and cannot be opened by another program.</p>
<p>The following example opens a text file called <em>pure-numbers.txt</em> (located in a sub-folder called <em>data</em>) that contains <em>float</em> numbers between 0.0 and 10.0. The file has 17 data rows (e.g., for 17 experimental runs) and 4 data columns (e.g., for 4 measurements per experimental run), which are separated by a <em>TAB</em> (<code class="docutils literal notranslate"><span class="pre">&quot;\t&quot;</span></code> separator) The code snippet uses the built-in function <code class="docutils literal notranslate"><span class="pre">readlines()</span></code> to parse the file lines, splits the lines using the <code class="docutils literal notranslate"><span class="pre">&quot;\t&quot;</span></code> separator, and loops over the line entries to append them to the list variable <code class="docutils literal notranslate"><span class="pre">data_list</span></code>, if <code class="docutils literal notranslate"><span class="pre">entry</span></code> is numeric (verified with the <code class="docutils literal notranslate"><span class="pre">try</span></code> - <code class="docutils literal notranslate"><span class="pre">except</span></code> statement). <code class="docutils literal notranslate"><span class="pre">data_list</span></code> is a nested list that is initiated at the beginning of the script and a sub-list (nested list) is appended for every file line (row).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_object</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/pure-numbers.txt&quot;</span><span class="p">)</span>  <span class="c1"># read file with default &quot;mode&quot;=&quot;r&quot;</span>

<span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># this will be a nested list with 17 sub-lists (rows) containing 4 entries (columns)=</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_object</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
    <span class="n">line_as_list</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># converts the line into a list using a tab (\t) separator</span>
    <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>  <span class="c1"># append an empty sub-list for every file line (17 rows)</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">line_as_list</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># try to append the entry as floating point number to the last sub-list, which is pointed at using [-1]</span>
            <span class="n">data_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># if entry is not numeric, append 0.0 to the sub-list and print a warning message</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: </span><span class="si">%s</span><span class="s2"> is not a number. Replacing value with 0.0.&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

<span class="c1"># verify that data_list contains the 17 rows (sub-lists) with the built-in list function __len__()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data_list</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())</span> 

<span class="c1"># verify that the first sub-list has four entries (number of columns)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of columns: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())</span>

<span class="n">file_object</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># close file (otherwise it will be locked as long as Python is still running!) alternative: use with-statement</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>  <span class="c1"># print the data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of rows: 17
Number of columns: 4
[[2.59, 5.44, 4.06, 4.87], [4.43, 1.67, 1.26, 2.97], [4.04, 8.07, 2.8, 9.8], [2.25, 5.32, 0.04, 5.57], [6.26, 6.15, 5.98, 8.91], [7.93, 0.85, 5.88, 5.4], [4.72, 1.29, 4.18, 2.46], [7.03, 1.43, 5.53, 9.7], [5.2, 7.87, 1.44, 1.13], [3.18, 5.38, 3.6, 7.32], [5.37, 0.62, 5.29, 4.26], [3.48, 2.26, 3.11, 7.3], [1.36, 1.68, 3.38, 6.4], [1.68, 2.31, 9.29, 3.59], [1.33, 1.73, 3.98, 5.74], [2.38, 9.69, 0.06, 4.16], [9.3, 6.47, 9.14, 3.33]]
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Recall the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement from the above example. With the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement, we do not have to write <code class="docutils literal notranslate"><span class="pre">file.close()</span></code>.</p>
</div>
</div>
<div class="section" id="create-and-write-files">
<span id="create"></span><h2>Create and Write Files<a class="headerlink" href="#create-and-write-files" title="Permalink to this headline">¶</a></h2>
<p>A file is created with the <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code>… file open modes (<a class="reference external" href="#open-modes">see above</a>) or with <code class="docutils literal notranslate"><span class="pre">open(file_name,</span> <span class="pre">mode=&quot;a&quot;)</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When <code class="docutils literal notranslate"><span class="pre">mode='w'...</span></code>, the provided file is opened with the pointer at position zero. Writing data will make the pointer overwrite any existing data at the position. That means any existing data in the opened file will be overwritten. To avoid overwriting of existing file data use <code class="docutils literal notranslate"><span class="pre">mode='w'...</span></code>.</p>
</div>
<p>Imagine that the above-loaded <code class="docutils literal notranslate"><span class="pre">data_list</span></code> represents measurements in <em>mm</em> and we know that the precision of the measuring device was 1.0 <em>mm</em>. Thus, all data smaller than 1.0 are within the error margin, which we want to exclude from further analyses by overwriting such values with <em><strong>nan</strong></em> (<em><strong>not-a-number</strong></em>). For this purpose, we first create a new list variable <code class="docutils literal notranslate"><span class="pre">new_data_list</span></code>, where we append <em>nan</em> values if <code class="docutils literal notranslate"><span class="pre">data_list[i,</span> <span class="pre">j]</span> <span class="pre">&lt;=</span> <span class="pre">1.0</span></code> and otherwise we preserve the original numeric value of <code class="docutils literal notranslate"><span class="pre">data_list</span></code>.
With <code class="docutils literal notranslate"><span class="pre">open(&quot;data/modified-data.csv&quot;,</span> <span class="pre">mode=&quot;w+&quot;)</span></code>, we create a new <em>csv</em> (comma-separated values) file in the <em>data</em> sub-folder. A <em>for-loop</em> iterates on the sub_lists of <code class="docutils literal notranslate"><span class="pre">new_data_list</span></code> and joins them with a comma-separator. In order to join the list elements of <code class="docutils literal notranslate"><span class="pre">i</span></code> (i.e., the sub-lists) with <code class="docutils literal notranslate"><span class="pre">&quot;,</span> <span class="pre">&quot;.join(list_of_strings)&quot;</span></code>, all list entries first need to be converted to <em>strings</em>, which is achieved through the expression <code class="docutils literal notranslate"><span class="pre">[str(e)</span> <span class="pre">for</span> <span class="pre">e</span> <span class="pre">in</span> <span class="pre">row]</span></code>. The <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> <em>string</em> needs to be concatenated at the end of every line to create a line break (<code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> itself will not be visible in the file). The command <code class="docutils literal notranslate"><span class="pre">new_file.write(new_line)</span></code> write the sub-list-converted-to-string to the file <code class="docutils literal notranslate"><span class="pre">&quot;data/modified-data.csv&quot;</span></code>. Once again, <code class="docutils literal notranslate"><span class="pre">new_file.close()</span></code> is needed to avoid that the new <em>csv</em> file is locked by <em>Python</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a new list and overwrite all values &lt;= 1.0 with nan</span>
<span class="n">new_data_list</span> <span class="o">=</span> <span class="p">[]</span>  
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>
    <span class="n">new_data_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">new_data_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_data_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">new_data_list</span><span class="p">)</span>
<span class="c1"># write the modified new_data_list to a new text file</span>
<span class="n">new_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/modified-data.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w+&quot;</span><span class="p">)</span>  <span class="c1"># lets just use csv: Python does not care about the file ending (could also be file.wayne)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">new_data_list</span><span class="p">:</span>
    <span class="n">new_line</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">row</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">new_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">new_line</span><span class="p">)</span>
<span class="n">new_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[2.59, 5.44, 4.06, 4.87], [4.43, 1.67, 1.26, 2.97], [4.04, 8.07, 2.8, 9.8], [2.25, 5.32, &#39;nan&#39;, 5.57], [6.26, 6.15, 5.98, 8.91], [7.93, &#39;nan&#39;, 5.88, 5.4], [4.72, 1.29, 4.18, 2.46], [7.03, 1.43, 5.53, 9.7], [5.2, 7.87, 1.44, 1.13], [3.18, 5.38, 3.6, 7.32], [5.37, &#39;nan&#39;, 5.29, 4.26], [3.48, 2.26, 3.11, 7.3], [1.36, 1.68, 3.38, 6.4], [1.68, 2.31, 9.29, 3.59], [1.33, 1.73, 3.98, 5.74], [2.38, 9.69, &#39;nan&#39;, 4.16], [9.3, 6.47, 9.14, 3.33]]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="modify-existing-files">
<h2>Modify Existing Files<a class="headerlink" href="#modify-existing-files" title="Permalink to this headline">¶</a></h2>
<p>Existing text files can be opened and modified in either <code class="docutils literal notranslate"><span class="pre">mode=&quot;r+&quot;</span></code> (pretending that information needs to be read before it is modified) or <code class="docutils literal notranslate"><span class="pre">mode=&quot;a+&quot;</span></code>. Recall that <code class="docutils literal notranslate"><span class="pre">&quot;r+&quot;</span></code> will place the pointer at the beginning of the file and <code class="docutils literal notranslate"><span class="pre">&quot;a+&quot;</span></code> will place the pointer at the end of the file. So if we want to modify existing lines, <code class="docutils literal notranslate"><span class="pre">&quot;r+&quot;</span></code> is the good choice and if we want to append data at the end of the file, <code class="docutils literal notranslate"><span class="pre">&quot;a+&quot;</span></code> is the good choice (<code class="docutils literal notranslate"><span class="pre">+</span></code> is not strictly needed in the case of <code class="docutils literal notranslate"><span class="pre">&quot;a+&quot;</span></code>). This section shows to examples: (1) modification of existing data in a file using <code class="docutils literal notranslate"><span class="pre">&quot;r+&quot;</span></code>, and (2) appending data to an existing file using <code class="docutils literal notranslate"><span class="pre">&quot;a+&quot;</span></code>.</p>
<p><em><strong>First example - replace data in file:</strong></em> In the previous example, we eliminated all measurements that were smaller than 1 <em>mm</em> because of the precision of the measurement device. However, we have retained all other values with two-digit accuracy - an accuracy which is not given. Consequently, all decimal places in the measurements must also be eliminated. To achieve this we have to round all measured values with <em>Python</em>’s built-in rounding function (<code class="docutils literal notranslate"><span class="pre">round(number,</span> <span class="pre">n-digits</span></code>) to zero decimal places (i.e., <code class="docutils literal notranslate"><span class="pre">n-digits</span> <span class="pre">=</span> <span class="pre">0</span></code>).
In this example, an exception <code class="docutils literal notranslate"><span class="pre">IOError</span></code> is raised when the file <code class="docutils literal notranslate"><span class="pre">&quot;data/modified-data.csv&quot;</span></code> does not exist (or is locked by another software). An <code class="docutils literal notranslate"><span class="pre">if</span></code> statement ensures that rounding the data is only attempted if the file exists.
The overwriting procedures first reads all lines of the file into the <code class="docutils literal notranslate"><span class="pre">lines</span></code> variable. After reading the lines, the pointer is at the end of the file and <code class="docutils literal notranslate"><span class="pre">file.seek(0)</span></code> puts the pointer back to position 0 (i.e., at the beginning of the file). <code class="docutils literal notranslate"><span class="pre">file.truncate()</span></code> purges the file. Yes, the original file is blank for a moment and all file contents are stored in the <code class="docutils literal notranslate"><span class="pre">lines</span></code> variable. Rounding the data happens within a <em>for-loop</em> that:</p>
<ul class="simple">
<li><p>Splits the comma-separated line <em>string</em> (produces <code class="docutils literal notranslate"><span class="pre">lines_as_list</span></code>).</p></li>
<li><p>Creates the temporary list <code class="docutils literal notranslate"><span class="pre">_numeric_line_</span></code>, where rounded, numeric value are stored (the variable is overwritten in every iteration).</p></li>
<li><p>Loops over the line entries (<code class="docutils literal notranslate"><span class="pre">line_as_list</span></code>), where an exception statement appends rounded (to zero digits), numeric values and appends <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> when an entry is not numeric.</p></li>
<li><p>Writes the modified line to the <code class="docutils literal notranslate"><span class="pre">&quot;data/modified-data.csv&quot;</span></code> <em>csv</em> file.</p></li>
</ul>
<p>Finally, the <em>csv</em> is closed with <code class="docutils literal notranslate"><span class="pre">modified_file.close()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">modified_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/modified-data.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r+&quot;</span><span class="p">)</span>  <span class="c1"># re-open the above data file in read-write</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The file does not exist.&quot;</span><span class="p">)</span>
    
<span class="k">if</span> <span class="n">modified_file</span><span class="p">:</span>
    <span class="c1"># go here only if the file exists</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">modified_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>  <span class="c1"># read lines &gt; pointer moves to file end</span>
    <span class="n">modified_file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># return pointer to file beginning</span>
    <span class="n">modified_file</span><span class="o">.</span><span class="n">truncate</span><span class="p">()</span>  <span class="c1"># clear file content</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">line_as_list</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>  <span class="c1"># converts the line into a list using comma separator</span>
        <span class="n">_numeric_line_</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">line_as_list</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span> 
                <span class="n">_numeric_line_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="mi">0</span><span class="p">))</span>  <span class="c1"># try to convert line entry to float and round to 0 digits</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_numeric_line_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>  <span class="c1"># for nan values </span>
        <span class="c1"># write rounded values</span>
        <span class="n">modified_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">_numeric_line_</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Processed file.&quot;</span> <span class="p">)</span>
    <span class="n">modified_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Processed file.
</pre></div>
</div>
</div>
</div>
<p>Theoretically the above code snippet can be re-written as a function to modify any data in a file. In addition, other threshold values or particular data ranges can be filtered using <code class="docutils literal notranslate"><span class="pre">if</span></code> - <code class="docutils literal notranslate"><span class="pre">else</span></code> statements.</p>
<p><em><strong>Second example - append data to file:</strong></em> By coincidence, you find on one of the measurement protocols that there is an 18th experimental run that is not in the electronic measurement data file due to a data transmission error. Now, we want to add the data to the above-produce <em>csv</em> file manually. Entering the data does not take much work, because only 4 measurements were performed per experimental run and we could already manually apply the above filters (<code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> and rounding) in a list variable called <code class="docutils literal notranslate"><span class="pre">forgotten_data</span></code>.
This example uses the <code class="docutils literal notranslate"><span class="pre">os</span></code> module (recall <a class="reference internal" href="pypckg.html#sec-pypckg"><span class="std std-ref">Packages, Modules and Libraries</span></a>) to verify if the data file exists with <code class="docutils literal notranslate"><span class="pre">os.path.isfile()</span></code> (the <code class="docutils literal notranslate"><span class="pre">os.getcwd()</span></code> statement is a gadget here). This example features another way of directly opening and writing to the data file using a <strong><code class="docutils literal notranslate"><span class="pre">with</span></code></strong> statement (i.e., a <em><strong>context manager</strong></em>). The <code class="docutils literal notranslate"><span class="pre">with</span></code> context is particularly useful for file handling because the file object only exists in the indented <code class="docutils literal notranslate"><span class="pre">with</span></code> context block, which makes the tedious call to <code class="docutils literal notranslate"><span class="pre">file.close()</span></code> obsolete.</p>
<p>The essential part that writes the line to the data file is <code class="docutils literal notranslate"><span class="pre">file.write(line)</span></code>, where <code class="docutils literal notranslate"><span class="pre">line</span></code> corresponds to the above-introduced <code class="docutils literal notranslate"><span class="pre">&quot;,</span> <span class="pre">&quot;.join(list-of-strings)</span> <span class="pre">+</span> <span class="pre">&quot;\n&quot;</span></code> <em>string</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
<span class="n">forgotten_data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;nan&quot;</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s2">&quot;data/modified-data.csv&quot;</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/modified-data.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_object</span><span class="p">:</span>
        <span class="n">file_object</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">forgotten_data</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Data appended.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The file does not exist.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\schwindt\jupyter\nb-lectures
Data appended.
</pre></div>
</div>
</div>
</div>
<p>{% include challenge.html content=”The code block <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'.join([str(e)</span> <span class="pre">for</span> <span class="pre">e</span> <span class="pre">in</span> <span class="pre">a_list])</span> <span class="pre">+</span> <span class="pre">'\n'</span></code> is a recurring expression in the above code snippets. How does a function look like that automatically generates this code block for lists of different data types?</p>
</div>
</div>
<div class="section" id="numpy">
<span id="id1"></span><h1>NumPy<a class="headerlink" href="#numpy" title="Permalink to this headline">¶</a></h1>
<p><em>NumPy</em> provides high-level mathematical functions for linear algebra including operations on multi-dimensional arrays and matrices. The open-source <em>NumPy</em> (for <em>Numerical Python</em>) package is written in <em>Python</em> and <a class="reference external" href="https://en.wikipedia.org/wiki/C_(programming_language)"><em>C</em></a>, and comes with comprehensive documentation (<a class="reference external" href="https://numpy.org/doc/">download the latest version on the developer’s web site</a> or <a class="reference external" href="https://numpy.org/devdocs/user/quickstart.html">read the developer’s online tutorial</a>).</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p><em>NumPy</em> can be installed within <em>Anaconda</em> (<a class="reference external" href="pyinstall.html#install-pckg">read instructions</a>) and the developers recommend to use a scientific <em>Python</em> distribution (<em>Anaconda</em>) with <a class="reference external" href="https://www.scipy.org/install.html"><em>SciPy Stack</em></a>.</p>
<p>With the provided <a class="reference external" href="https://github.com/hydro-informatics/materials-py-install/blob/master/environment.yml"><em>environment.yml</em> (<code class="docutils literal notranslate"><span class="pre">hypy</span></code>)</a> for <em>Anaconda</em>, <em>NumPy</em> is already installed (<a class="reference internal" href="pyinstall.html"><span class="doc std std-doc">more information here</span></a>). To install <em>NumPy</em> in another <em>conda</em> environment, open <em>Anaconda Prompt</em> (<em>Start</em> &gt; type <em>Anaconda Prompt</em>) and type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">ENVIRONMENT</span><span class="o">-</span><span class="n">NAME</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">numpy</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The <em>NumPy</em> module (package) is typically imported with <strong><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy</span> <span class="pre">as</span> <span class="pre">np</span></code></strong>. Array handling is the baseline of linear algebra and <em>NumPy</em>, where arrays represent nested data lists. To create a <em>NumPy</em> array, use <code class="docutils literal notranslate"><span class="pre">np.array((values))</span></code>, where <code class="docutils literal notranslate"><span class="pre">values</span></code> is a sequences of values.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This section provides insights in some basic functions provided with <em>NumPy</em>, but does not (or cannot) cover all <em>NumPy</em> functions and data types. Generally speaking, be sure that whatever mathematical operation you want to perform, <em>NumPy</em> offers a solution. Just checkout the <a class="reference external" href="https://numpy.org/devdocs/user/quickstart.html"><em>NumPy</em> documentation</a>, <a class="reference external" href="https://numpy.org/devdocs/user/quickstart.html#functions-and-methods-overview">have a look at <em>NumPy</em>’s functions and methods overview</a>, or use your favorite search engine with the search words <strong>numpy</strong> <em><strong>FUNCTION</strong></em>.</p>
</div>
<p>The rounded parentheses indicated that the value sequence represents a tuple that may contain lists for creating multi-dimensional array. Thus, for creating an <em>2x3</em> array (with some random values), we can write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">an_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">an_array</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[2 3 1]
 [4 5 6]]
</pre></div>
</div>
</div>
</div>
<p><em>NumPy</em> arrays (data type: <em>ndarray</em>) have many built-in features, for example to output the array size:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">an_array</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Array dimensions: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">an_array</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total number of array elements: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">an_array</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of array axes: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">an_array</span><span class="o">.</span><span class="n">ndim</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;numpy.ndarray&#39;&gt;
Array dimensions: (2, 3)
Total number of array elements: 6
Number of array axes: 2
</pre></div>
</div>
</div>
</div>
<p>There are many types of <code class="docutils literal notranslate"><span class="pre">np.array</span></code>s and many ways to create them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]))</span>  <span class="c1"># the same as an_array</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[2 3 1]
 [4 5 6]]
[[2.+0.j 3.+0.j 1.+0.j]
 [4.+0.j 5.+0.j 6.+0.j]]
</pre></div>
</div>
</div>
</div>
<p>Arrays of zeros or ones, or empty arrays can be created with <em>integer</em> or <em>float</em>. When creating such arrays, be aware of using tuples (i.e., sequences embraced with rounded parentheses) to define array dimensions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">))</span>  <span class="c1"># other dtypes: int16, np.int16, float, np.float32, np.complex32</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0. 0. 0. 0. 0. 0.]
 [0. 0. 0. 0. 0. 0.]]
[[1. 1. 1. 1. 1. 1.]
 [1. 1. 1. 1. 1. 1.]]
[[1. 1. 1. 1. 1. 1.]
 [1. 1. 1. 1. 1. 1.]]
[[2 0 3 0 1 0]
 [4 0 5 0 6 0]]
</pre></div>
</div>
</div>
</div>
<div class="note admonition">
<p class="admonition-title">Data type sizes</p>
<p><em>NumPy</em> data types have different sizes (in <a class="reference external" href="https://en.wikipedia.org/wiki/Byte">bytes</a>) and the more digits, the larger the variable size. For example, <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> has an itemsize of 8 bytes (64/8), while <code class="docutils literal notranslate"><span class="pre">np.float32</span></code> has an itemsize of 4 bytes (32/8) only. Use <code class="docutils literal notranslate"><span class="pre">ndarray.itemsize</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">an_array.itemsize</span></code>) to find out the size of an array in bytes. For analyses of large datasets, the data type become very important regarding computation speed and storage.</p>
</div>
<p><em>NumPy</em> provides the <code class="docutils literal notranslate"><span class="pre">arange(start,</span> <span class="pre">end,</span> <span class="pre">step-size)</span></code> function to create numeric sequences. Such sequences represent arrays (<code class="docutils literal notranslate"><span class="pre">ndarray</span></code>) can then be reshaped (re-organized in columns and rows).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1D array:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>  <span class="c1"># 1D array</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">2D array:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1"># 2D array</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">3D array:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1"># 3D array</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">1D Linspace (start, end, number-of-elements):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1D array:
[0 2 4 6 8]

2D array:
[[ 0  2  4]
 [ 6  8 10]]

3D array:
[[[ 1  2  3]
  [ 4  5  6]]

 [[ 7  8  9]
  [10 11 12]]]

1D Linspace (start, end, number-of-elements):
[0.         1.57079633 3.14159265]
</pre></div>
</div>
</div>
</div>
<p>Random numbers can be generated with <em>NumPy</em>’s random number generator <code class="docutils literal notranslate"><span class="pre">np.random</span></code> and its <code class="docutils literal notranslate"><span class="pre">.random(range_tuple)</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rand_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rand_array</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0.0204844  0.91185321 0.00152947 0.79774412]
 [0.45685876 0.65600015 0.55038482 0.03690686]]
</pre></div>
</div>
</div>
</div>
<p>Built-in array functions enable finding minimum or maximum values, or sums of arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sum of 12-elements ones-array: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Minimum: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">an_array</span><span class="o">.</span><span class="n">min</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Maximum: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">an_array</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sum of 12-elements ones-array: 12.0
Minimum: 1
Maximum: 6
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="color-arrays">
<span id="colors"></span><h2>Color Arrays<a class="headerlink" href="#color-arrays" title="Permalink to this headline">¶</a></h2>
<p>Arrays may also contain color information, whee colors represent a mix of the three base colors red, green, and blue. One color is defined as <code class="docutils literal notranslate"><span class="pre">[red-value,</span> <span class="pre">green-value,</span> <span class="pre">blue-value]</span></code> and a value of 0 means that a color tone is not present, while 255 is its maximum value. When all color tone values are zero, there is no color, which corresponds to <em>black</em>; when all color tones are maximum (255), the color mix corresponds to <em>white</em>. This way, array elements can be lists of color tones and plotting such arrays produces images. The following example produces an array with 5 color-list elements, which could be plotted as a very basic image with 5 pixels (one black, red, green, blue, and white, respectively):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">color_set</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>         <span class="c1"># black</span>
                      <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>       <span class="c1"># red</span>
                      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>       <span class="c1"># green</span>
                      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span>       <span class="c1"># blue</span>
                      <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]])</span>  <span class="c1"># white</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="array-matrix-operations">
<span id="id2"></span><h2>Array (Matrix) Operations<a class="headerlink" href="#array-matrix-operations" title="Permalink to this headline">¶</a></h2>
<p>Array calculations (matrix operations) follow the rules of linear algebra:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Subtraction: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">-</span> <span class="n">B</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Element-wise product: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="n">B</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Matrix product (option 1): &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span> <span class="o">@</span> <span class="n">B</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Matrix product (option 2): &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">B</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Subtraction: [[ 0.1115262  -0.48000352]
 [ 0.1494478   0.31398052]
 [ 0.38778125  0.18341211]
 [ 0.0014262   0.5411479 ]]
Element-wise product: [[0.78023517 0.24540468]
 [0.01212987 0.11177306]
 [0.04761943 0.21543691]
 [0.37867353 0.05979503]]
Matrix product (option 1): [[1.218658   1.0311045 ]
 [0.73402296 0.63240968]]
Matrix product (option 2): [[1.218658   1.0311045 ]
 [0.73402296 0.63240968]]
</pre></div>
</div>
</div>
</div>
<p>Further element-wise calculations include exponential (<code class="docutils literal notranslate"><span class="pre">**</span></code>), geometric (<code class="docutils literal notranslate"><span class="pre">np.sin</span></code>, <code class="docutils literal notranslate"><span class="pre">np.cos</span></code>, <code class="docutils literal notranslate"><span class="pre">np.tan</span></code>, etc.), and boolean operators:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A to the power of 3: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exponential: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">A</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Square root: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">A</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sine of A times 3: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Boolean where A is smaller than 0.3: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span> <span class="o">&lt;</span> <span class="mf">0.3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A to the power of 3: [[0.83278802 0.00897507 0.11465192 0.23383377]
 [0.02992313 0.14581371 0.18020002 0.25637808]]
Exponential: [[2.56210893 1.23098678 1.62548021 1.85165172]
 [1.36404919 1.69272506 1.7591499  1.88753709]]
Square root: [[0.96996429 0.45586852 0.6969959  0.7849064 ]
 [0.55718724 0.72549272 0.75155218 0.79704006]]
Sine of A times 3: [[2.42414331 0.61897047 1.40075657 1.73351616]
 [0.91648323 1.50711546 1.60581841 1.78019148]]
Boolean where A is smaller than 0.3: [[False  True False False]
 [False False False False]]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="array-shape-manipulation">
<h2>Array Shape Manipulation<a class="headerlink" href="#array-shape-manipulation" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it is necessary to stack a multi-dimensional array into a vector, or recast the shape of an array. There are a couple of options to manipulate the shape of an array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Flattened matrix A (into a vector):</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">ravel</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Transpose matrix A and append B:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">A</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">B</span><span class="p">])))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Transpose matrix A and append B and cast into a (4x4) array:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">A</span><span class="o">.</span><span class="n">transpose</span><span class="p">(),</span> <span class="n">B</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Flattened matrix A (into a vector):
[0.94083072 0.20781611 0.48580329 0.61607806 0.31045762 0.52633969
 0.56483068 0.63527285]

Transpose matrix A and append B:
[[[0.94083072 0.31045762]
  [0.20781611 0.52633969]
  [0.48580329 0.56483068]
  [0.61607806 0.63527285]]

 [[0.82930452 0.79046114]
  [0.05836831 0.21235917]
  [0.09802204 0.38141858]
  [0.61465186 0.09412495]]]

Transpose matrix A and append B and cast into a (4x4) array:
[[0.94083072 0.31045762 0.20781611 0.52633969]
 [0.48580329 0.56483068 0.61607806 0.63527285]
 [0.82930452 0.79046114 0.05836831 0.21235917]
 [0.09802204 0.38141858 0.61465186 0.09412495]]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="numpy-file-handling-and-np-nan">
<h2><em>NumPy</em> File Handling and <code class="docutils literal notranslate"><span class="pre">np.nan</span></code><a class="headerlink" href="#numpy-file-handling-and-np-nan" title="Permalink to this headline">¶</a></h2>
<p>In the above examples on file handling, measurement data were loaded from text files, manipulated, and modified text file were written. The data manipulation involved the introduction of <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> (<em>not-a-number</em>) values, which were excluded because measurements <em>&lt;1 mm</em> were considered errors. Why didn’t we use zeros here? Well, zeros are numbers, too, and have significant effect on data statistics (e.g., for calculting mean values). However, the <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> <em>string</em> value caused difficulties in data handling, in particular regarding the consistency of function output. <em>NumPy</em> provides with the <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> data type a powerful alternative to the tedious <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> <em>string</em>.</p>
<p><em>NumPy</em> also has a text file load function called <code class="docutils literal notranslate"><span class="pre">np.loadtxt(file-name,</span> <span class="pre">*args,</span> <span class="pre">**kwargs)</span></code>, which imports text files as <code class="docutils literal notranslate"><span class="pre">np.array</span></code>s of <em>float</em> values. The default <em>float</em> value type can be adapted with the optional keyword <code class="docutils literal notranslate"><span class="pre">dtype</span></code>. Other optional (keyword) arguments are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delimiter=STR</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">delimiter=';'</span></code>), where default is <code class="docutils literal notranslate"><span class="pre">&quot;None&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">usecols=TUPLE</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">usecols=(1,</span> <span class="pre">3)</span></code> will extract the 2<sup>nd</sup> and 4<sup>th</sup> column) also one <em>integer</em> value is possible to read just on single column</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skiprows=INT</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">skiprows=2</span></code> skips the first two lines), where default is <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p>more arguments are available and listed in the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.loadtxt.html"><em>numpy</em> documentation</a>.</p></li>
</ul>
<p>The following example loads the <em>csv</em> file <em>data/modified-data.csv</em> containing <em>integer</em> and <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> <em>string</em> values, which are automatically converted to <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">experiment_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;data/modified-data.csv&quot;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is the data 4th line (row): &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The data type of the 3rd (</span><span class="si">%s</span><span class="s2">) entry is: &quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This is the data 4th line (row): [ 2.  5. nan  6.]
The data type of the 3rd (nan) entry is: &lt;class &#39;numpy.float64&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>In addition, or as an alternative, the function <code class="docutils literal notranslate"><span class="pre">np.load()</span></code> picks up data from file-like <code class="docutils literal notranslate"><span class="pre">.npz</span></code>, <code class="docutils literal notranslate"><span class="pre">.npy</span></code>, or pickled (saved <em>Python</em> objects) data sources (more information is available in <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.load.html#numpy.load">the <em>NumPy</em> docs</a>).</p>
</div>
<div class="section" id="statistics">
<h2>Statistics<a class="headerlink" href="#statistics" title="Permalink to this headline">¶</a></h2>
<p>The above examples featured some array functions to assess basic array parameters such as the minimum and maximum. <em>NumPy</em> provides many more functions for array statistics such as the mean, median, or standard deviation, including functions that account for <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> values. The following example illustrates some statistic function with the experimental data from the above examples. Note the usage of <code class="docutils literal notranslate"><span class="pre">nanmean</span></code> instead of <code class="docutils literal notranslate"><span class="pre">mean</span></code> and statistics along array axis, where the optional keyword argument <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> corresponds to columns and <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> to statistics along rows in 2-dimensional arrays (maximum axis number corresponds to the array dimensions <em>n</em> minus 1, i.e., maximum <code class="docutils literal notranslate"><span class="pre">axis=n-1</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean value (without nan): &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">)))</span>  <span class="c1"># no applicable result</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean value with np.nan: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">)))</span> 
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean value along axis 0 (columns): &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)))</span> 
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean value along axis 1 (rows): &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">experiment_data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mean value (without nan): nan
Mean value with np.nan: 4.626865671641791
Mean value along axis 0 (columns): [4.11111111 4.25       4.53333333 5.55555556]
Mean value along axis 1 (rows): [4.25       2.5        6.25       4.33333333 6.75       6.33333333
 3.         6.         3.75       4.75       4.66666667 3.75
 3.         4.25       3.25       5.33333333 6.75       5.        ]
</pre></div>
</div>
</div>
</div>
<p>The following sections give a tabular overview of statistical functions in <em>NumPy</em> (source: <em>NumPy</em> v.1.13 docs). The listed functions only represent fundamental statistic functions and <em>NumPy</em> provides many more options, which can be leveraged using any search engine with <em>NumPy</em>  and the desired function as search keywords.</p>
<hr class="docutils" />
<p>Basic statistic functions</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nanmin.html#numpy.nanmin"><code class="docutils literal notranslate"><span class="pre">nanmin(a[,</span> <span class="pre">axis,</span> <span class="pre">out,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Minimum of an array or along an axis, ignoring <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nanmax.html#numpy.nanmax"><code class="docutils literal notranslate"><span class="pre">nanmax(a[,</span> <span class="pre">axis,</span> <span class="pre">out,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Maximum of an array or along an axis, ignoring <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.ptp.html#numpy.ptp"><code class="docutils literal notranslate"><span class="pre">ptp(a[,</span> <span class="pre">axis,</span> <span class="pre">out])</span></code></a></p></td>
<td><p>Range of values (max - min) along an axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.percentile.html#numpy.percentile"><code class="docutils literal notranslate"><span class="pre">percentile(a,</span> <span class="pre">q[,</span> <span class="pre">axis,</span> <span class="pre">out,</span> <span class="pre">...])</span></code></a></p></td>
<td><p>q-th percentile of data along a specified axis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nanpercentile.html#numpy.nanpercentile"><code class="docutils literal notranslate"><span class="pre">nanpercentile(a,</span> <span class="pre">q[,</span> <span class="pre">axis,</span> <span class="pre">out,</span> <span class="pre">...])</span></code></a></p></td>
<td><p>q-th percentile of data along a specified axis, ignoring <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Mean (average), standard deviation, and variances</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.median.html#numpy.median"><code class="docutils literal notranslate"><span class="pre">median(a[,</span> <span class="pre">axis,</span> <span class="pre">out,</span> <span class="pre">overwrite_input,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Median along an (optional) axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.average.html#numpy.average"><code class="docutils literal notranslate"><span class="pre">average(a[,</span> <span class="pre">axis,</span> <span class="pre">weights,</span> <span class="pre">returned])</span></code></a></p></td>
<td><p>Weighted average along an (optional) axis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.mean.html#numpy.mean"><code class="docutils literal notranslate"><span class="pre">mean(a[,</span> <span class="pre">axis,</span> <span class="pre">dtype,</span> <span class="pre">out,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Arithmetic mean along an (optional) axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.std.html#numpy.std"><code class="docutils literal notranslate"><span class="pre">std(a[,</span> <span class="pre">axis,</span> <span class="pre">dtype,</span> <span class="pre">out,</span> <span class="pre">ddof,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Standard deviation along an (optional) axis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.var.html#numpy.var"><code class="docutils literal notranslate"><span class="pre">var(a[,</span> <span class="pre">axis,</span> <span class="pre">dtype,</span> <span class="pre">out,</span> <span class="pre">ddof,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Variance along an (optional) axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nanmedian.html#numpy.nanmedian"><code class="docutils literal notranslate"><span class="pre">nanmedian(a[,</span> <span class="pre">axis,</span> <span class="pre">out,</span> <span class="pre">overwrite_input,</span> <span class="pre">...])</span></code></a></p></td>
<td><p>Median along an (optional) axis, ignoring <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nanmean.html#numpy.nanmean"><code class="docutils literal notranslate"><span class="pre">nanmean(a[,</span> <span class="pre">axis,</span> <span class="pre">dtype,</span> <span class="pre">out,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Arithmetic mean along an (optional) axis, ignoring <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.nanstd.html#numpy.nanstd"><code class="docutils literal notranslate"><span class="pre">nanstd(a[,</span> <span class="pre">axis,</span> <span class="pre">dtype,</span> <span class="pre">out,</span> <span class="pre">ddof,</span> <span class="pre">keepdims])</span></code></a></p></td>
<td><p>Standard deviation along an (optional) axis, while ignoring <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Correlating data (arrays)</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.corrcoef.html#numpy.corrcoef"><code class="docutils literal notranslate"><span class="pre">corrcoef(x[,</span> <span class="pre">y,</span> <span class="pre">rowvar,</span> <span class="pre">bias,</span> <span class="pre">ddof])</span></code></a></p></td>
<td><p>Pearson (product-moment) correlation coefficients.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.correlate.html#numpy.correlate"><code class="docutils literal notranslate"><span class="pre">correlate(a,</span> <span class="pre">v[,</span> <span class="pre">mode])</span></code></a></p></td>
<td><p>Cross-correlation of two 1-dimensional sequences.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.cov.html#numpy.cov"><code class="docutils literal notranslate"><span class="pre">cov(m[,</span> <span class="pre">y,</span> <span class="pre">rowvar,</span> <span class="pre">bias,</span> <span class="pre">ddof,</span> <span class="pre">fweights,</span> <span class="pre">...])</span></code></a></p></td>
<td><p>Estimate covariance matrix, based on data and weights.</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Generate and plot histrograms</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.histogram.html#numpy.histogram"><code class="docutils literal notranslate"><span class="pre">histogram(a[,</span> <span class="pre">bins,</span> <span class="pre">range,</span> <span class="pre">normed,</span> <span class="pre">weights,</span> <span class="pre">...])</span></code></a></p></td>
<td><p>Histogram of a set of data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.histogram2d.html#numpy.histogram2d"><code class="docutils literal notranslate"><span class="pre">histogram2d(x,</span> <span class="pre">y[,</span> <span class="pre">bins,</span> <span class="pre">range,</span> <span class="pre">normed,</span> <span class="pre">weights])</span></code></a></p></td>
<td><p>Bi-dimensional histogram of two data samples.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.histogramdd.html#numpy.histogramdd"><code class="docutils literal notranslate"><span class="pre">histogramdd(sample[,</span> <span class="pre">bins,</span> <span class="pre">range,</span> <span class="pre">normed,</span> <span class="pre">...])</span></code></a></p></td>
<td><p>Multidimensional histogram of some data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.bincount.html#numpy.bincount"><code class="docutils literal notranslate"><span class="pre">bincount(x[,</span> <span class="pre">weights,</span> <span class="pre">minlength])</span></code></a></p></td>
<td><p>Count number of occurrences of each value in array of non-negative ints.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.digitize.html#numpy.digitize"><code class="docutils literal notranslate"><span class="pre">digitize(x,</span> <span class="pre">bins[,</span> <span class="pre">right])</span></code></a></p></td>
<td><p>Indices of the bins to which each value in input array belongs.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="can-numpy-do-matlab">
<h2>Can <em>NumPy</em> do <em>MATLAB</em>®?<a class="headerlink" href="#can-numpy-do-matlab" title="Permalink to this headline">¶</a></h2>
<p>Are you considering to switch to <em>Python</em> after starting softly into programming with <em>MATLAB®</em>-like software? There are many reasons for enhancing data analyses with <em>Python</em> and here are some facilitators for previous <em>MATLAB®</em> users:</p>
<ul class="simple">
<li><p><em>MATLAB®</em> matrices can be loaded and saved with <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.loadmat.html#scipy.io.loadmat"><code class="docutils literal notranslate"><span class="pre">scipy.io.loadmat(matrix-file-name)</span></code></a> (use <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">scipy</span></code>).</p></li>
<li><p><em>NumPy</em>’s <code class="docutils literal notranslate"><span class="pre">np.array</span></code> replaces <em>MATLAB®</em>’s matrix notation (even though there is the historic, deprecated <em>NumPy</em> data type <code class="docutils literal notranslate"><span class="pre">np.matrix</span></code>).</p></li>
<li><p>Import many <em>MATLAB®</em> features from <code class="docutils literal notranslate"><span class="pre">np.matlib</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">numpy.matlib</span> <span class="pre">import</span> <span class="pre">rand,</span> <span class="pre">zeros,</span> <span class="pre">ones,</span> <span class="pre">empty,</span> <span class="pre">eye)</span></code> or more generally <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">numpy.matlib</span> <span class="pre">as</span> <span class="pre">M</span></code>).</p></li>
<li><p>Find the <em>NumPy</em> equivalent of many <em>MATLAB®</em> function in the <a class="reference external" href="https://numpy.org/doc/stable/user/numpy-for-matlab-users.html#table-of-rough-matlab-numpy-equivalents"><em>NumPy</em> documentation</a>.</p></li>
<li><p>To emulate <em>MATLAB®</em>’s plot functions use the <code class="docutils literal notranslate"><span class="pre">pylab</span></code> package and import it as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pylab</span> <span class="pre">import</span> <span class="pre">*</span></code>. <br>⚠ This overwrites all other (standard) definitions of the <code class="docutils literal notranslate"><span class="pre">plot()</span></code> function and <code class="docutils literal notranslate"><span class="pre">array()</span></code> objects. So this usage is deprecated. <a class="reference internal" href="pyplot.html"><span class="doc std std-doc">Read the plotting section</span></a> for comprehensive plotting instructions with <em>Python</em>.</p></li>
</ul>
<p><em>MATLAB® is a registered trademark of The MathWorks.</em></p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Practice <em>numpy</em> and <em>csv</em> file handling in the <a class="reference internal" href="../exercises/ex-sp.html"><span class="doc std std-doc">Reservoir design</span></a> exercise.</p>
</div>
</div>
</div>
<div class="section" id="pandas">
<span id="id3"></span><h1>Pandas<a class="headerlink" href="#pandas" title="Permalink to this headline">¶</a></h1>
<p><em>pandas</em> is a powerful module (package) for data analyses and manipulation with <em>Python</em>. It has can handle <em>NumPy</em> arrays, and both packages jointly represent a powerful data processing engine. The power of <em>pandas</em> lies in processing data frames, data labeling (e.g., workbook-like columns names), and flexible file handling functions (e.g., the built-in <code class="docutils literal notranslate"><span class="pre">read_csv(csv-file)</span></code>). While <em>NumPy</em> arrays enable calculations with multidimensional arrays (beyond 2-dimensional tables) and low memory consumption, <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>s efficiently process and label tabular data with more than ~100,000 rows. Because of its labelling capacity, <em>pandas</em> also finds broad application in machine learning. In summary, <em>pandas</em>’ functionality builds on top of <em>NumPy</em> and both packages are developed by the <a class="reference external" href="https://www.scipy.org/"><em>SciPy</em></a> (<em>Scientific computing tools for Python</em>) community that also develops <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> (see <a class="reference internal" href="pyplot.html"><span class="doc std std-doc">the plotting section</span></a> and <em>IPython</em> (<em>Jupyter</em>’s <em>Python</em> kernel).</p>
<div class="section" id="id4">
<h2>Installation<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p><em>pandas</em>’ developer’s recommend to install <em>pandas</em> with the <em>SciPy</em> stack in <a class="reference internal" href="../get-started/ide.html"><span class="doc std std-doc"><em>Anaconda</em></span></a>, similar to the recommendations for installing <em>NumPy</em>. With the provided <a class="reference external" href="https://github.com/hydro-informatics/materials-py-install/blob/master/environment.yml"><em>environment.yml</em> (<code class="docutils literal notranslate"><span class="pre">hypy</span></code>)</a> for <em>Anaconda</em>, <em>NumPy</em> is already installed (more information in the <a class="reference internal" href="pyinstall.html"><span class="doc std std-doc">install <em>Python</em> section</span></a>). To install <em>NumPy</em> in another <em>conda</em> environment, open <em>Anaconda Prompt</em> (<em>Start</em> &gt; type <em>Anaconda Prompt</em>) and type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">ENVIRONMENT</span><span class="o">-</span><span class="n">NAME</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">pandas</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h2>Usage<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p><em>pandas</em> standard import alias is <code class="docutils literal notranslate"><span class="pre">pd</span></code>: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span> <span class="pre">as</span> <span class="pre">pd</span></code>. The following sections provide an overview of basic <em>pandas</em> functions and much more functionalities are documented in the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">developer’s docs</a>.</p>
</div>
<div class="section" id="data-frames-series">
<h2>Data frames &amp; Series<a class="headerlink" href="#data-frames-series" title="Permalink to this headline">¶</a></h2>
<p>The below code block illustrates the creation of <em>pandas</em> data frames, the core object of <em>pandas</em>. Note the difference between a 1-dimensional series (corresponds to a one-column data frame), and a 2-dimensional data frame with <strong>row (=index)</strong> and column names. The default row names number rows starting from 0 (unlike Office software that starts at row no. 1), without column names. Column names can be initially defined as a <a class="reference external" href="pybase.html#list">list</a> and replaced with a <a class="reference external" href="pybase.html#dict">dictionary</a> that maps the initial list entries to new names.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A 1-column pd.DataFrame:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])))</span>  <span class="c1"># a simple pandas data frame with one column</span>

<span class="n">row_names</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">wb_like_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">row_names</span><span class="o">.</span><span class="fm">__len__</span><span class="p">(),</span> <span class="mi">3</span><span class="p">),</span> 
                          <span class="n">index</span><span class="o">=</span><span class="n">row_names</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This is a workbook-like (row and column names) data frame:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">wb_like_df</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Rename column names with dictionary:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">wb_like_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="s1">&#39;Series 1&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="s1">&#39;Series 2&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="s1">&#39;Series 3&#39;</span><span class="p">})))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Transpose the data frame:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">wb_like_df</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A 1-column pd.DataFrame:
0    3.0
1    4.0
2    NaN
dtype: float64

This is a workbook-like (row and column names) data frame:
          A         B         C
1  1.551689 -0.425844 -1.120399
2 -0.472708 -0.619897 -1.491136
3  1.909126  0.273118 -2.425986

Rename column names with dictionary:
   Series 1  Series 2  Series 3
1  1.551689 -0.425844 -1.120399
2 -0.472708 -0.619897 -1.491136
3  1.909126  0.273118 -2.425986

Transpose the data frame:
          1         2         3
A  1.551689 -0.472708  1.909126
B -0.425844 -0.619897  0.273118
C -1.120399 -1.491136 -2.425986
</pre></div>
</div>
</div>
</div>
<p>A <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object can also be created with a <a class="reference external" href="pybase.html#dict">dictionary</a>, where the dictionary keys define column names and the dictionary items constitute the data of each column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Flow depth&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,)),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">),</span>
                   <span class="s1">&#39;Sediment&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">],</span>
                   <span class="s1">&#39;Flow regime&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;fluvial&quot;</span><span class="p">,</span> <span class="s2">&quot;fluvial&quot;</span><span class="p">,</span> <span class="s2">&quot;supercritical&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">]),</span>
                   <span class="s1">&#39;Water&#39;</span><span class="p">:</span> <span class="s2">&quot;Always there&quot;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A dictionary-built data frame:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Frame data types:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A dictionary-built data frame:
   Flow depth Sediment    Flow regime         Water
0    0.210366      yes        fluvial  Always there
1    0.234890       no        fluvial  Always there
2    0.247299      yes  supercritical  Always there
3    0.164717       no       critical  Always there

Frame data types:
Flow depth      float32
Sediment         object
Flow regime    category
Water            object
dtype: object
</pre></div>
</div>
</div>
</div>
<p>Built-in attributes and methods of a <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> enable easy access to the top and the bottom of a data frame and many more features (recall: use <code class="docutils literal notranslate"><span class="pre">dir(dict_df)</span></code> or <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">read the developer’s docs</a>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Head of the dictionary-based dataframe (first two rows):</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">End (tail) of the dictionary-based dataframe (last row):</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Head of the dictionary-based dataframe (first two rows):
   Flow depth Sediment Flow regime         Water
0    0.210366      yes     fluvial  Always there
1    0.234890       no     fluvial  Always there

End (tail) of the dictionary-based dataframe (last row):
   Flow depth Sediment Flow regime         Water
3    0.164717       no    critical  Always there
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="example-create-a-pandas-dataframe-of-froude-numbers">
<span id="exp-froude"></span><h2>Example Create a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> (of Froude Numbers)<a class="headerlink" href="#example-create-a-pandas-dataframe-of-froude-numbers" title="Permalink to this headline">¶</a></h2>
<p>In hydraulics, the <a class="reference external" href="https://en.wikipedia.org/wiki/Froude_number"><em>Froude</em> number <em><strong>Fr</strong></em></a> characterizes the flow regime as <em>“fluvial”</em> (<em>Fr&lt;1</em>), <em>“critical”</em> (<em>Fr=1</em>), and <em>“super-critical”</em> (<em>Fr&gt;1</em>). The precision of measurement devices in physical flume experiments makes the exact determination of the <em>critical</em> moment a challenge and forces researchers to apply an interval around 1, rather than the exact value:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><em><strong>Fr</strong></em></p></th>
<th class="head"><p>(0.00, 0.95(</p></th>
<th class="head"><p>(0.95, 1.00(</p></th>
<th class="head"><p>(1.00)</p></th>
<th class="head"><p>)1.00, 1.05)</p></th>
<th class="head"><p>)1.05, inf(</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>Flow</em></p></td>
<td><p>fluvial</p></td>
<td><p>nearby critical (slow)</p></td>
<td><p>critical</p></td>
<td><p>nearby critical (fast)</p></td>
<td><p>super-critical</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">pd.DataFrame(</span> <span class="pre">...</span> <span class="pre">)</span></code> objects are a convenient for to classify and store flume experiment data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Fr_dict</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.925</span><span class="p">:</span> <span class="s2">&quot;fluvial&quot;</span><span class="p">,</span> <span class="mf">0.975</span><span class="p">:</span> <span class="s2">&quot;nearby critical (slow)&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">:</span> <span class="s2">&quot;critical&quot;</span><span class="p">,</span> <span class="mf">1.025</span><span class="p">:</span> <span class="s2">&quot;nearby critical (fast)&quot;</span><span class="p">,</span> <span class="mf">1.075</span><span class="p">:</span> <span class="s2">&quot;super-critical&quot;</span><span class="p">}</span>
<span class="n">Fr_measured</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">2.00</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,))</span>
<span class="n">Fr_classified</span> <span class="o">=</span> <span class="p">[</span><span class="n">Fr_dict</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">Fr_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">m</span><span class="p">))]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">Fr_measured</span><span class="p">]</span>
<span class="n">obs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;measured&quot;</span><span class="p">:</span> <span class="n">Fr_measured</span><span class="p">,</span> <span class="s2">&quot;flow regime&quot;</span><span class="p">:</span> <span class="n">Fr_classified</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obs_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   measured             flow regime
0  1.462930          super-critical
1  0.430861                 fluvial
2  0.998070                critical
3  0.131475                 fluvial
4  0.174419                 fluvial
5  0.455032                 fluvial
6  1.235265          super-critical
7  0.519341                 fluvial
8  0.659579                 fluvial
9  0.978529  nearby critical (slow)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="append-data-to-a-pandas-dataframe">
<h2>Append Data to a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code><a class="headerlink" href="#append-data-to-a-pandas-dataframe" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">at</span></code>, <code class="docutils literal notranslate"><span class="pre">loc</span></code>, <code class="docutils literal notranslate"><span class="pre">concat</span></code>, and <code class="docutils literal notranslate"><span class="pre">append</span></code> methods of <em>pandas</em> provide direct options for inserting rows or columns into a <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>. However, all three built-in methods are approximately one order of magnitude slower than if we take the detour via a dictionary. This applies especially to data frames with more than 10,000 elements. This means that the fastest method to insert a data set is:</p>
<ol class="simple">
<li><p>Convert an existing <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> object to a <em>dictionary</em> with <code class="docutils literal notranslate"><span class="pre">pd.DataFrame.to_dict()</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">dict_of_df</span> <span class="pre">=</span> <span class="pre">df.to_dict()</span></code>).</p></li>
<li><p>Update the <em>dictionary</em> with new data</p>
<ul class="simple">
<li><p>Append rows with <code class="docutils literal notranslate"><span class="pre">dict_of_df.update{&quot;existing-column-name&quot;:</span> <span class="pre">{&quot;new-row-name&quot;:</span> <span class="pre">NEW_DATA}}</span></code></p></li>
<li><p>Append columns with <code class="docutils literal notranslate"><span class="pre">dict_of_df.update{&quot;newcolumn-name&quot;:</span> <span class="pre">{&quot;existing-row-names&quot;:</span> <span class="pre">NEW_DATA(size=existing-number-of-rows}}</span></code></p></li>
</ul>
</li>
<li><p>Re-convert *dictionary to <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> with <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">pd.DataFrame.from_dict(dict_of_df)</span></code></p></li>
</ol>
<p>The following code blocks illustrates both adding a row and a column to an existing <em>pandas</em> data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># convert data frame to dictionary</span>
<span class="n">dict_of_obs_df</span> <span class="o">=</span> <span class="n">obs_df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="c1"># append new row</span>
<span class="n">new_row_index</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">dict_of_obs_df</span><span class="p">[</span><span class="s2">&quot;measured&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">dict_of_obs_df</span><span class="p">[</span><span class="s2">&quot;measured&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">new_row_index</span><span class="p">:</span> <span class="mf">0.996</span><span class="p">})</span>
<span class="n">dict_of_obs_df</span><span class="p">[</span><span class="s2">&quot;flow regime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">new_row_index</span><span class="p">:</span> <span class="s2">&quot;nearby critical (slow)&quot;</span><span class="p">})</span>

<span class="c1"># append column</span>
<span class="n">dict_of_obs_df</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;with sediment&quot;</span><span class="p">:</span> <span class="p">{}})</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">dict_of_obs_df</span><span class="p">[</span><span class="s2">&quot;measured&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">dict_of_obs_df</span><span class="p">[</span><span class="s2">&quot;with sediment&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">getrandbits</span><span class="p">(</span><span class="mi">1</span><span class="p">))})</span>

<span class="c1"># re-build data frame</span>
<span class="n">obs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dict_of_obs_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obs_df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    measured             flow regime  with sediment
8   0.659579                 fluvial          False
9   0.978529  nearby critical (slow)           True
10  0.996000  nearby critical (slow)           True
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="numpy-arrays-and-pandas-data-frames">
<h2><em>NumPy</em> Arrays and <em>pandas</em> Data Frames<a class="headerlink" href="#numpy-arrays-and-pandas-data-frames" title="Permalink to this headline">¶</a></h2>
<p>The major difference between a <em>NumPy</em> <code class="docutils literal notranslate"><span class="pre">array</span></code> and a <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is that <em>NumPy</em> array only have one single data type (<code class="docutils literal notranslate"><span class="pre">dtype</span></code>), while a <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> can have differents data types (one <code class="docutils literal notranslate"><span class="pre">dtype</span></code> per column). This is why a <em>NumPy</em> <code class="docutils literal notranslate"><span class="pre">array</span></code> can be seamlessly converted to a <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, but the opposite conversion can cause high computational cost. <em>pandas</em> comes with a built-in function to convert a <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> into a <em>NumPy</em> <code class="docutils literal notranslate"><span class="pre">array</span></code>, where numeric variables are maintained where possible. If one column of the <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is non-numeric, the conversion involves copying the object, which then causes high computational cost. Note that <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> <em>index</em> and <em>column</em> labels are lost in the conversion.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">obs_df</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1.4629304199712003 &#39;super-critical&#39; True]
 [0.4308609175144578 &#39;fluvial&#39; True]
 [0.9980702542754516 &#39;critical&#39; False]
 [0.13147505751224464 &#39;fluvial&#39; False]
 [0.1744193402007127 &#39;fluvial&#39; False]
 [0.45503162541640574 &#39;fluvial&#39; True]
 [1.2352651606844145 &#39;super-critical&#39; True]
 [0.5193413669752244 &#39;fluvial&#39; False]
 [0.6595793984115736 &#39;fluvial&#39; False]
 [0.9785285127361709 &#39;nearby critical (slow)&#39; True]
 [0.996 &#39;nearby critical (slow)&#39; True]]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="access-data-frames-entries">
<h2>Access Data Frames Entries<a class="headerlink" href="#access-data-frames-entries" title="Permalink to this headline">¶</a></h2>
<p>Elements of data frames are accessible by the column and row label (<code class="docutils literal notranslate"><span class="pre">df.loc[index=row,</span> <span class="pre">column-label]</span></code>) or number (<code class="docutils literal notranslate"><span class="pre">df.iloc</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Label localization results in: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Flow depth&quot;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Same result with integer grid location: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Label localization results in: 0.2472994
Same result with integer grid location: 0.2472994
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="reshape-data-frames">
<span id="pd-reshape"></span><h2>Reshape Data Frames<a class="headerlink" href="#reshape-data-frames" title="Permalink to this headline">¶</a></h2>
<p>Single or multiple rows (index) and columns can be extracted from and combined into new or existing <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> objects:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Flow depth&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Sediment&quot;</span><span class="p">]]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                   0        1         2         3
Flow depth  0.210366  0.23489  0.247299  0.164717
Sediment         yes       no       yes        no
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">df.stack()</span></code> method pivots the columns of a data frame, which is a powerful tool to classify data that can take different dimensions (e.g., the volume and weight of 1 m<sup>3</sup> water - read more about the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack">stack method</a>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>  <span class="c1"># unstack data frame</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Flow depth         0.210366
Sediment                yes
Flow regime         fluvial
Water          Always there
dtype: object
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Flow depth   0         0.210366
             1          0.23489
             2         0.247299
             3         0.164717
Sediment     0              yes
             1               no
             2              yes
             3               no
Flow regime  0          fluvial
             1          fluvial
             2    supercritical
             3         critical
Water        0     Always there
             1     Always there
             2     Always there
             3     Always there
dtype: object
</pre></div>
</div>
</div>
</div>
<p>Big datasets often contain large amounts of data with many labels, where we are often only interested in a small subset of data. Data frame subsets can be created with <code class="docutils literal notranslate"><span class="pre">df.pivot(index,</span> <span class="pre">columns,</span> <span class="pre">**values)</span></code> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot">Pivot method</a>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pivot table for </span><span class="se">\&#39;</span><span class="s2">Flow regime</span><span class="se">\&#39;</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;Sediment&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Flow depth&quot;</span><span class="p">)[</span><span class="s2">&quot;Flow regime&quot;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Pivot table for </span><span class="se">\&#39;</span><span class="s2">Water</span><span class="se">\&#39;</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;Sediment&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Flow depth&quot;</span><span class="p">)[</span><span class="s2">&quot;Water&quot;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pivot table for &#39;Flow regime&#39;:
Flow depth  0.164717 0.210366 0.234890       0.247299
Sediment                                             
no          critical      NaN  fluvial            NaN
yes              NaN  fluvial      NaN  supercritical

Pivot table for &#39;Water&#39;:
Flow depth      0.164717      0.210366      0.234890      0.247299
Sediment                                                          
no          Always there           NaN  Always there           NaN
yes                  NaN  Always there           NaN  Always there
</pre></div>
</div>
</div>
</div>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">df.pivot_table(index,</span> <span class="pre">columns,</span> <span class="pre">values,</span> <span class="pre">aggfunc)</span></code> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table">Pivot table function</a>) enables inline Office-like function application to one or more rows and/or columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&#39;</span><span class="s2">mean</span><span class="se">\&#39;</span><span class="s2"> for </span><span class="se">\&#39;</span><span class="s2">Flow depth</span><span class="se">\&#39;</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;Sediment&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;Flow regime&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;Flow depth&quot;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;mean&#39; for &#39;Flow depth&#39;:
Flow regime  critical   fluvial  supercritical
Sediment                                      
no           0.164717  0.234890            NaN
yes               NaN  0.210366       0.247299
</pre></div>
</div>
</div>
</div>
<p>Read more about reshaping and pivoting data frames in the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html">developer’s docs</a>.</p>
</div>
<div class="section" id="file-handling-csv-workbooks-and-more">
<span id="pd-files"></span><h2>File Handling (<em>csv</em>, Workbooks, and More)<a class="headerlink" href="#file-handling-csv-workbooks-and-more" title="Permalink to this headline">¶</a></h2>
<p><em>pandas</em> can read from and write to many data file types, which makes it extremely powerful in analyzing any data output. The following table summarizes the most important file types for numerical hydraulic, morphodynamic and fluvial landscape analyses and more file type handlers can be found at the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html">developer’s docs</a>.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>File type</p></th>
<th class="head"><p><em>pandas</em> read</p></th>
<th class="head"><p><em>pandas</em> write</p></th>
<th class="head"><p>Usage example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CSV</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-read-csv-table"><code class="docutils literal notranslate"><span class="pre">read_csv</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-store-in-csv"><code class="docutils literal notranslate"><span class="pre">to_csv</span></code></a></p></td>
<td><p>Reading from data loggers (e.g., discharge, flow depth)</p></td>
</tr>
<tr class="row-odd"><td><p>Google BigQuery</p></td>
<td><p><a class="reference external" href="https://en.wikipedia.org/wiki/BigQuery"><code class="docutils literal notranslate"><span class="pre">read_gbq</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-bigquery"><code class="docutils literal notranslate"><span class="pre">to_gbq</span></code></a></p></td>
<td><p>Analyze social media</p></td>
</tr>
<tr class="row-even"><td><p>JSON</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-json-reader"><code class="docutils literal notranslate"><span class="pre">read_json</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-json-writer"><code class="docutils literal notranslate"><span class="pre">to_json</span></code></a></p></td>
<td><p>Manipulate <a class="reference internal" href="../numerics/basement.html#chpt-basement"><span class="std std-ref">BASEMENT</span></a> model files</p></td>
</tr>
<tr class="row-odd"><td><p>HTML</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-read-html"><code class="docutils literal notranslate"><span class="pre">read_html</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-html"><code class="docutils literal notranslate"><span class="pre">to_html</span></code></a></p></td>
<td><p>Process  web site data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://support.hdfgroup.org/HDF5/doc1.6/UG/08_TheFile.html">HDF5 Format</a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-hdf5"><code class="docutils literal notranslate"><span class="pre">read_hdf</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-hdf5"><code class="docutils literal notranslate"><span class="pre">to_hdf</span></code></a></p></td>
<td><p>Analyze <a class="reference internal" href="../numerics/basement.html#chpt-basement"><span class="std std-ref">BASEMENT</span></a> or <a class="reference external" href="https://www.mdpi.com/2073-4441/10/10/1382"><em>HEC-RAS</em></a> output files</p></td>
</tr>
<tr class="row-odd"><td><p>Python Pickle Format</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-pickle"><code class="docutils literal notranslate"><span class="pre">read_pickle</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-pickle"><code class="docutils literal notranslate"><span class="pre">to_pickle</span></code></a></p></td>
<td><p>Cache memory dump</p></td>
</tr>
<tr class="row-even"><td><p>SQL</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-sql"><code class="docutils literal notranslate"><span class="pre">read_sql</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-sql"><code class="docutils literal notranslate"><span class="pre">to_sql</span></code></a></p></td>
<td><p>Retrieve and write data to SQL data bases</p></td>
</tr>
<tr class="row-odd"><td><p>Workbooks (Excel / Open doc)</p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-excel-reader"><code class="docutils literal notranslate"><span class="pre">read_excel</span></code></a></p></td>
<td><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html#io-excel-writer"><code class="docutils literal notranslate"><span class="pre">to_excel</span></code></a></p></td>
<td><p>Interface with non-programmers (Open only works in read mode)</p></td>
</tr>
</tbody>
</table>
<p>The following code block illustrates how the above produced <em>data/modified-data.csv</em> file can be loaded with new file names and saved to a workbook with <em>pandas</em>. <em>pandas</em> uses the <a class="reference external" href="https://xlsxwriter.readthedocs.io/"><em>xlsxwriter</em></a> or <a class="reference external" href="https://openpyxl.readthedocs.io"><em>openpyxl</em></a> packages to process workbooks, depending on which packages are available in the <em>Python</em> environment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurement_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/modified-data.csv&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Test 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Test 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Test 3&quot;</span><span class="p">,</span> <span class="s2">&quot;Test 4&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Header of data/modified-data.csv:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">measurement_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
<span class="n">measurement_data</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;data/modified-data-wb.xlsx&quot;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;2025-01-01 Tests&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Header of data/modified-data.csv:
   Test 1 Test 2 Test 3  Test 4
0     3.0    5.0    4.0     5.0
1     4.0    2.0    1.0     3.0
2     4.0    8.0    3.0    10.0
</pre></div>
</div>
</div>
</div>
<p><img alt="img" src="https://raw.githubusercontent.com/sschwindt/hydroinformatics/main/docs/img/py-pandas-xlsx-out.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>pandas</em> tries to convert all data into <code class="docutils literal notranslate"><span class="pre">dtype=float</span></code>, but as soon as there is only one text variable in a column, the entire column will be saved as <em>string</em>-data type in a workbook.</p>
</div>
<p>Alternatively, a <em>pandas</em> <code class="docutils literal notranslate"><span class="pre">ExcelWriter</span></code> object can be created to write multiple <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> objects to a workbook, on one or more sheets. Here is an example, where the non-numeric <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code> strings are first replaced in <code class="docutils literal notranslate"><span class="pre">measurement_data</span></code> with <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> to yield a purely numeric data frame in two steps (<code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">(1)</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">(2)</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurement_data</span> <span class="o">=</span> <span class="n">measurement_data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># (1) replace &quot;nan&quot; with np.nan</span>
<span class="n">measurement_data</span> <span class="o">=</span> <span class="n">measurement_data</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">)</span>  <span class="c1"># (2) convert all data to numeric</span>

<span class="c1"># write workbook with pd ExcelWriter object</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="s2">&quot;data/modified-data-wb-EW.xlsx&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
    <span class="n">measurement_data</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;2025-01-01 Tests&quot;</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&quot;pandas example&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><img alt="img" src="https://raw.githubusercontent.com/sschwindt/hydroinformatics/main/docs/img/py-pandas-xlsx-out2.png" /></p>
</div>
<div class="section" id="categorical-data">
<h2>Categorical Data<a class="headerlink" href="#categorical-data" title="Permalink to this headline">¶</a></h2>
<p><em>string</em> variables that represent statistical relevant categories are the baseline for data classification and statistics. <em>pandas</em> provides a special data type (<code class="docutils literal notranslate"><span class="pre">dtype=&quot;category&quot;</span></code>) to facilitate statistical analyses.</p>
<p>In the above <a class="reference external" href="#exp-Froude">Froude-number example</a>, we used five categories to classify the flow regime as a function of the <em>Froude number</em>, which can serve as categories. After an experiment, where no water was flowing in one test and the probe broke in the last test, we want to categorize our measurements to filter valid tests only:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flow_regimes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fluvial&quot;</span><span class="p">,</span> <span class="s2">&quot;nearby critical (slow)&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">,</span> <span class="s2">&quot;nearby critical (fast)&quot;</span><span class="p">,</span> <span class="s2">&quot;super-critical&quot;</span><span class="p">]</span>
<span class="n">observation_examples</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fluvial&quot;</span><span class="p">,</span> <span class="s2">&quot;dry&quot;</span><span class="p">,</span> <span class="s2">&quot;critical&quot;</span><span class="p">,</span> <span class="s2">&quot;nearby critical (slow)&quot;</span><span class="p">,</span> <span class="s2">&quot;measurement error&quot;</span><span class="p">]</span>
<span class="n">Fr_cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">observation_examples</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="n">flow_regimes</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">Fr_cat</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0                   fluvial
1                       NaN
2                  critical
3    nearby critical (slow)
4                       NaN
dtype: category
Categories (5, object): [&#39;fluvial&#39;, &#39;nearby critical (slow)&#39;, &#39;critical&#39;, &#39;nearby critical (fast)&#39;, &#39;super-critical&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="data-frame-statistics">
<h2>Data Frame Statistics<a class="headerlink" href="#data-frame-statistics" title="Permalink to this headline">¶</a></h2>
<p><em>pandas</em> has efficient routines to perform workbook-like row or column sorting (e.g., <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_index.html"><code class="docutils literal notranslate"><span class="pre">df.sort_index()</span></code></a> or <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html"><code class="docutils literal notranslate"><span class="pre">df.sort_values()</span></code></a>), and enables the fast calculation of data frame statistics with <code class="docutils literal notranslate"><span class="pre">df.describe()</span></code>, where 25%, 50%, and 75% represent the <em>i-th</em> percentiles:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurement_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Test 1</th>
      <th>Test 2</th>
      <th>Test 3</th>
      <th>Test 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>18.000000</td>
      <td>16.000000</td>
      <td>15.000000</td>
      <td>18.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>4.111111</td>
      <td>4.250000</td>
      <td>4.533333</td>
      <td>5.555556</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.298053</td>
      <td>2.792848</td>
      <td>2.386470</td>
      <td>2.617188</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.250000</td>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>5.500000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>5.000000</td>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>7.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>9.000000</td>
      <td>10.000000</td>
      <td>9.000000</td>
      <td>10.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Statistical <em>pandas</em> data frame methods overlap with <em>NumPy</em> methods and include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">df.abs()</span></code> calculates asbolute values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.cumprod()</span></code> calculates the cumulative product</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.cumsum()</span></code> calculates the cumulative sum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.count()</span></code> counts the number of non-null observations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.max()</span></code> calculates the maximum value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.mean()</span></code> calculates the mean (average)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.min()</span></code> calculates the minimum value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.mode()</span></code> calculates the mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.prod()</span></code> calculates the product</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.std()</span></code> calculates tthe standard deviation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.sum()</span></code> calculates the sum</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">measurement_data</span><span class="o">.</span><span class="n">mean</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Median:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">measurement_data</span><span class="o">.</span><span class="n">median</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Standard deviation:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">measurement_data</span><span class="o">.</span><span class="n">std</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mean:
Test 1    4.111111
Test 2    4.250000
Test 3    4.533333
Test 4    5.555556
dtype: float64
Median:
Test 1    4.0
Test 2    4.0
Test 3    4.0
Test 4    5.5
dtype: float64
Standard deviation:
Test 1    2.298053
Test 2    2.792848
Test 3    2.386470
Test 4    2.617188
dtype: float64
</pre></div>
</div>
</div>
</div>
<p><em>pandas</em> has many more built-in functionalities, for example to plot histograms or any data using the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> library, and machine learning. The following pages of the <em>Python</em> introduction on <em>hydro-informatics</em> occasionally make use of <em>pandas</em> and illustrate more functionalities.</p>
</div>
<div class="section" id="apply-custom-own-functions-to-data-frames">
<h2>Apply Custom (Own) Functions to Data Frames<a class="headerlink" href="#apply-custom-own-functions-to-data-frames" title="Permalink to this headline">¶</a></h2>
<p><em>pandas</em> data frame have a built-in <code class="docutils literal notranslate"><span class="pre">apply(fun)</span></code> method that enables applying a custom function to (parts of) a <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> object. We will use here the <code class="docutils literal notranslate"><span class="pre">feet_to_meter</span></code> function from the <a class="reference external" href="pyfun.html#kwargs">Functions</a> page, which is available at the <a class="reference external" href="https://github.com/hydro-informatics/material-py-codes/raw/master/fun/converter.py">course repository in the <code class="docutils literal notranslate"><span class="pre">fun.converter.py</span></code></a> directory (during lectures only).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fun.converter</span> <span class="kn">import</span> <span class="n">feet_to_meter</span>

<span class="c1"># create data frame with random integers</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Feets&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>
                   <span class="s2">&quot;Meters&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">})</span>

<span class="c1"># apply feet_to_meter to the Meters columns of the data frame</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Meters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Feets&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">feet_to_meter</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   Feets   Meters
0     59  17.9832
1     60  18.2880
2     85  25.9080
3     18   5.4864
4     20   6.0960
5      3   0.9144
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="dates-and-time">
<h1>Dates and Time<a class="headerlink" href="#dates-and-time" title="Permalink to this headline">¶</a></h1>
<p><em>pandas</em> involves methods for calulations and labeling with date and time values with <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Timestamp.html"><code class="docutils literal notranslate"><span class="pre">pd.Timestamp</span></code></a>, which converts date-time-like strings into timestamps or creates timestamps from keyword arguments:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2025-01-01T12&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2025</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">12</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-01-01 12:00:00
2025-01-01 12:00:00
2025-01-01 12:00:00
</pre></div>
</div>
</div>
</div>
<p>The expression <code class="docutils literal notranslate"><span class="pre">pd.Timestamp(2025,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">12)</span></code> mimics the powerful <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> <em>API</em> (Application Programming Interface) of the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> <em>Python</em> package, which provides sophisticated methods for handling time-dependent values. While <em>pandas</em>’ built-in timestamps are convenient for creating time series within <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> objects and workbook-like tables, <code class="docutils literal notranslate"><span class="pre">datetime</span></code> is one of the best solutions for time-dependent calculations in <em>Python</em>. <code class="docutils literal notranslate"><span class="pre">datetime</span></code> is available by default (i.e., it must not be <em>conda</em>-installed) and is efficiently applicable for example to data that were collected over several years including leap years. The <code class="docutils literal notranslate"><span class="pre">datetime</span></code> package comes with many attributes and methods, which are documented in detail in the <a class="reference external" href="https://docs.python.org/3/library/datetime.html"><em>Python</em> docs</a>.</p>
<p>The standard usage is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2024</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Datetime variables can be subtracted:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">start_date</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The result is a </span><span class="si">%s</span><span class="s2"> object.&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">start_date</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Datetime variables can be subtracted:
5 days, 3:45:30
The result is a &lt;class &#39;datetime.timedelta&#39;&gt; object.
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dt.timedelta</span></code> objects can also be separately defined:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_diff</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">milliseconds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">weeks</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">act_time</span> <span class="o">=</span> <span class="n">start_date</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Iterate from start to end date with stepsize=time_diff:&quot;</span><span class="p">)</span>
<span class="k">while</span> <span class="n">act_time</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">act_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m(%h)-</span><span class="si">%d</span><span class="s2">, %H:%M:%S&quot;</span><span class="p">))</span>
    <span class="n">act_time</span> <span class="o">+=</span> <span class="n">time_diff</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Iterate from start to end date with stepsize=time_diff:
2024-02(Feb)-25, 22:30:00
2024-02(Feb)-26, 21:30:00
2024-02(Feb)-27, 20:30:00
2024-02(Feb)-28, 19:30:00
2024-02(Feb)-29, 18:30:00
2024-03(Mar)-01, 17:30:00
</pre></div>
</div>
</div>
</div>
<p>That’s it for the introduction to data and file handling. There is much more to data processing than on this page and the next pages will occasionally feature more tools.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Practice <em>pandas</em> and its <em>csv</em> file handling routines, as well as basic date-time handling in the <a class="reference internal" href="../exercises/ex-floods.html"><span class="doc std std-doc">Flood return period calculation</span></a> exercise.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hydro-informatics/hydro-informatics.github.io",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./python-basics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="data-handling.html" title="previous page">Data and File Handling</a>
    <a class='right-next' id="next-link" href="xml.html" title="next page">Manipulation of Workbooks and JSON Files</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Sebastian Schwindt<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>
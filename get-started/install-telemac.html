

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>TELEMAC (Installation) &#8212; Hydro-Informatics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'get-started/install-telemac';</script>
    <link rel="canonical" href="https://hydro-informatics.com/get-started/install-telemac.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Other Software Resources" href="others.html" />
    <link rel="prev" title="OpenFOAM (Installation)" href="install-openfoam.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/icon.jpg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/icon.jpg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../lectures/classroom.html">The Virtual Classroom</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../lectures/principles.html">Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/lectures.html">Lectures and Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/take_seat.html">Take a Seat</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="software.html">Software Resources</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="vm.html">Virtual Machines and Linux</a></li>

<li class="toctree-l2"><a class="reference internal" href="ide.html">Integrated Development Environments (IDEs)</a></li>




<li class="toctree-l2"><a class="reference internal" href="../python-basics/pyinstall.html">Python (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="git.html">Version Control : git</a></li>
<li class="toctree-l2"><a class="reference internal" href="geo.html">Geospatial Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-openfoam.html">OpenFOAM (Installation)</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">TELEMAC (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="others.html">Other Software Resources</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/python.html">First Steps</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pybase.html">Hello Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyerror.html">Errors, Logging, and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyloop.html">Loops and Conditional Statements</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/modularize.html">Object Orientation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyfun.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pypckg.html">Packages, Modules and Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/classes.html">Object Orientation and Classes</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/data-handling.html">Data and File Handling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pynum.html">Data Files, NumPy &amp; Pandas</a></li>





<li class="toctree-l2"><a class="reference internal" href="../jupyter/xml.html">Structured Data (XML, xlsx &amp; JSON)</a></li>

<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyplot.html">Plotting</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/pystyle.html">Code Style and Conventions</a></li>

<li class="toctree-l1"><a class="reference internal" href="../jupyter/gui.html">Graphical User Interfaces (GUIs)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/python-exercises.html">Python Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-ms.html">1d Hydraulics (Manning-Strickler Formula)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-sp.html">Reservoir Volume (Sequent Peak Algorithm)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-floods.html">Flood Return Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-sediment.html">1d Sediment Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-gui.html">Create a GUI</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Geospatial Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../geopy/geospatial-data.html">Geospatial Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/use-qgis.html">QGIS Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/drone-processing.html">Process Drone (UAV) Imagery</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../geopy/geo-python.html">Geospatial Python</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../geopy/geo-pckg.html">Geospatial Open Source Python Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-shp.html">Shapefile (Vector) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-raster.html">Raster (Grid) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-convert.html">Vectorize and Rasterize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-arcpy.html">The Commercial arcpy Library</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/geo-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-geco.html">Script a Habitat Suitability Map</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numerical Modeling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../numerics/numerical-modeling.html">Principles</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../numerics/basement/basement.html">BASEMENT</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../numerics/pre-qgis-bm.html">Pre-processing with QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../numerics/basement/basement2d.html">Run and Check a Steady 2d Simulation</a></li>



</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../numerics/telemac/telemac.html">TELEMAC</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../numerics/pre-slf-tm.html">Pre-processing</a></li>


<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac/telemac2d.html">Telemac2d</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/telemac2d-steady.html">Steady 2d</a></li>




<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/telemac2d-unsteady.html">Unsteady 2d</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac/telemac3d.html">Telemac3d</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/telemac3d-slf.html">Steady 3d (SLF - Selafin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/telemac3d-med.html">Steady 3d (MED and Salome)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac/telemac-gaia.html">Gaia (Morphodynamics)</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/gaia-coupling.html">Introduction and Coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/gaia-basics.html">Basic Setup of Gaia</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/gaia-bedload.html">Bedload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/gaia-suspended.html">Suspended Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/gaia-run.html">Run and Analyze</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/telemac/mass-balance-bc.html">Boundaries &amp; Mass Convergence</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/boundaries.html">Boundary Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/convergence.html">Convergence (Quantitative)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/telemac/mass-optimization.html">Mass Conservation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../numerics/telemac/roughness.html">Roughness (Friction) Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../numerics/telemac/optimization.html">Optimization</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../numerics/openfoam/of-intro.html">OpenFOAM</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase.html">Multiphase Solver (interFoam Tutorial)</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-mesh.html">Geometry and Mesh Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-setup.html">Case set-up</a></li>




<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-run.html">Run OpenFOAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numerics/openfoam/of-tutorial-multiphase-post.html">Post-processing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning (ML)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../datascience/machinelearning.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datascience/dimensional-analysis.html">About Data</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/supervised-learning.html">Supervised Learning</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../datascience/linear-models.html">Linear Models</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datascience/linear-classification.html">Linear Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/linear-regression.html">Linear Regression</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../datascience/non-linear-models.html">Non-linear models</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datascience/kernelized-supervised-models.html">Kernels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/morphology-predictor-svm.html">Support Vector Machine (SVM)</a></li>


<li class="toctree-l3"><a class="reference internal" href="../datascience/three-based-methods.html">Three-based methods (Coming soon)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datascience/neural-networks.html">Neural Networks (Supervised)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../datascience/unsupervised-learning.html">Unsupervised Learning (Coming soon)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../documentation/documentation.html">How to Markdown and Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/notation.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/bibliography.html">References</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/docs-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-git.html">Git and Markdown</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-programming.html">Programming Tools and IDEs</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-anaconda.html">Debugging Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-python.html">Debugging Python Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-jupyter.html">Debugging Jupyter</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-numerical-models.html">Numerical Models</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-basement.html">Debugging BASEMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-telemac.html">Debugging TELEMAC</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-os.html">Operating Systems (Linux and VMs)</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-linux.html">Debugging Debian Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-vm.html">Debugging Virtual Machines</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-scilife.html">Science Life Hacks</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-24"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-gis.html">GIS, CRS and Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-zotero.html">Zotero Utilities</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../terms/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../terms/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/contributors.html">Contributors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/hydro-informatics/jupyter-python-course" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/get-started/install-telemac.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>TELEMAC (Installation)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preface">Preface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-requirements">Basic Requirements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python3">Python3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#git">GIT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gnu-fortran-95-compiler-gfortran">GNU Fortran 95 Compiler (gfortran)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-compilers-and-essentials">More Compilers and Essentials</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-telemac-repo">Get the TELEMAC Repo</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optional-requirements-parallelism-and-others">Optional Requirements (Parallelism and Others)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parallelism-install-mpi">Parallelism: Install MPI</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parallelism-install-metis">Parallelism: Install Metis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hdf5-and-med-format-handlers">Hdf5 and MED Format Handlers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aed2">AED2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compile-telemac">Compile TELEMAC</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adapt-and-verify-configuration-file-systel-x-cfg">Adapt and Verify Configuration File (systel.x.cfg)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-python-source-file">Setup Python Source File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compile">Compile</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-telemac">Test TELEMAC</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-telemac-docs">Generate Telemac Docs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities-pre-post-processing">Utilities (Pre- &amp; Post-processing)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#qgis-linux-and-windows">QGIS (Linux and Windows)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bluekenue-windows-or-linux-wine">BlueKenue (Windows or Linux+Wine)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fudaa-prepro-linux-and-windows">Fudaa-PrePro (Linux and Windows)</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="telemac-installation">
<span id="telemac-install"></span><h1>TELEMAC (Installation)<a class="headerlink" href="#telemac-installation" title="Permalink to this headline">#</a></h1>
<section id="preface">
<h2>Preface<a class="headerlink" href="#preface" title="Permalink to this headline">#</a></h2>
<p>This tutorial guides through the installation of <a class="reference external" href="http://www.opentelemac.org/">open TELEMAC-MASCARET</a> on <a class="reference external" href="https://www.debian.org/">Debian Linux</a> based platforms (i.e., also works with Ubuntu and its derivatives, such as Mint or Lubuntu). <strong>Account for approximately 1-2 hours for installing TELEMAC and make sure to have a stable internet connection (&gt;1.4 GB file download).</strong></p>
<hr class="docutils" />
<p>This section only guides through the <strong>installation</strong> of TELEMAC. A tutorial for running hydro(-morpho)dynamic models with TELEMAC is currently under construction for this eBook.</p>
<hr class="docutils" />
<p>Before you start, note:</p>
<ul class="simple">
<li><p>Installing TELEMAC on a <a class="reference internal" href="vm.html#chpt-vm-linux"><span class="std std-ref">Virtual Machine (VM)</span></a> is useful for getting started with TELEMAC and its sample cases, but not recommended for running a real-world numerical model (limited performance of VMs).</p></li>
<li><p>Familiarize with the <a class="reference internal" href="vm.html#linux-terminal"><span class="std std-ref">Linux Terminal</span></a> to understand the underpinnings for compiling TELEMAC.</p></li>
<li><p>This tutorial refers to the software package <em>open TELEMAC-MASCARET</em> as TELEMAC because <em>MASCARET</em> is a one-dimensional (1d) model and the numerical simulation schemes in this eBook focus on two-dimensional (2d) and three-dimensional (3d) modeling.</p></li>
<li><p>A couple of installation options are available:</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Custom Installation (Recommended)</label><div class="sd-tab-content docutils">
<p>Continue to read and walk through the following sections.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Mint Hyfo VM</label><div class="sd-tab-content docutils">
<p>If you are working with the <a class="reference internal" href="vm.html#hyfo-vm"><span class="std std-ref">Mint Hyfo Virtual Machine</span></a>, skip the tutorials on this website because TELEMAC v8p3 is already preinstalled and you are good to go for completing the <a class="reference internal" href="../numerics/telemac/telemac.html#chpt-telemac"><span class="std std-ref">TELEMAC tutorials</span></a>.</p>
<p>Load the TELEMAC environment and check if it works with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">v8p3</span><span class="o">/</span><span class="n">configs</span>
<span class="n">source</span> <span class="n">pysource</span><span class="o">.</span><span class="n">hyfo</span><span class="o">.</span><span class="n">sh</span>
<span class="n">config</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
SALOME-HYDRO</label><div class="sd-tab-content docutils">
<p>TELEMAC is also available through the SALOME-HYDRO software suite, which is a spinoff of SALOME. However, the principal functionalities of SALOME-HYDRO may migrate to a new QGIS plugin. Therefore, this eBook recommends installing TELEMAC independently from any pre- or post-processing software.</p>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Docker Image</label><div class="sd-tab-content docutils">
<p>The Austrian engineering office <em>Flussplan</em> provides a Docker container of TELEMAC v8 on their <a class="reference external" href="https://github.com/flussplan/docker-telemac">docker-telemac GitHub repository</a>. Note that a Docker container represents an easy-to-install virtual environment that leverages cross-platform compatibility, but affects computational performance. If you have the proprietary Docker software installed and computational performance is not the primary concern for your models, Flussplan’s Docker container might be a good choice. For instance, purely hydrodynamic models with small numbers of grid nodes and without additional TELEMAC module implications will efficiently run in the Docker container.</p>
</div>
</div>
</section>
<section id="basic-requirements">
<span id="modular-install"></span><h2>Basic Requirements<a class="headerlink" href="#basic-requirements" title="Permalink to this headline">#</a></h2>
<div class="note dropdown admonition">
<p class="admonition-title">Old SVN has been replaced by GIT (since v8p3)</p>
<p>The newest release of TELEMAC (v8p4) is provided on <a class="reference external" href="https://gitlab.pam-retd.fr/otm/telemac-mascaret/-/tree/main">gitlab</a> with the version control system <a class="reference internal" href="git.html#chpt-git"><span class="std std-ref">git</span></a> rather than the previously used <code class="docutils literal notranslate"><span class="pre">svn</span></code> version control.</p>
</div>
<div class="attention dropdown admonition">
<p class="admonition-title">Admin (sudo) rights required</p>
<p>Superuser (<code class="docutils literal notranslate"><span class="pre">sudo</span></code> for <strong>su</strong>per <strong>do</strong>ers list) rights are required for many actions described in this workflow. Read more about how to set up and grant <code class="docutils literal notranslate"><span class="pre">sudo</span></code> rights for a user account on <em>Debian Linux</em> in the tutorial for setting up <a class="reference internal" href="vm.html#user-rights"><span class="std std-ref">Debian Linux</span></a>.</p>
</div>
<p>Working with TELEMAC requires some software for downloading source files, compiling, and running the program. The mandatory software prerequisites for installing TELEMAC on <a class="reference external" href="https://www.debian.org/">Debian Linux</a> are:</p>
<ul class="simple">
<li><p>Python 3.7 (and more recent) with <a class="reference internal" href="../jupyter/pynum.html#numpy"><span class="std std-ref">NumPy &gt;=1.15</span></a></p></li>
<li><p>GNU Fortran 95 compiler (<em>gfortran</em>)</p></li>
</ul>
<section id="python3">
<h3>Python3<a class="headerlink" href="#python3" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 5-8 minutes.</strong></em></p>
<p>The high-level programing language <em>Python3</em> is pre-installed on Debian Linux 10.x and needed to launch the compiler script for TELEMAC. To launch <em>Python3</em>, open Terminal and type <code class="docutils literal notranslate"><span class="pre">python3</span></code>. To exit Python, type <code class="docutils literal notranslate"><span class="pre">exit()</span></code>.</p>
<p>TELEMAC requires the <a class="reference external" href="https://numpy.org/">NumPy</a> Python library that comes along with <a class="reference external" href="https://scipy.org/">SciPy</a> and <a class="reference external" href="https://matplotlib.org/">matplotlib</a>.</p>
<p>To install NumPy libraries, open Terminal and type (hit <code class="docutils literal notranslate"><span class="pre">Enter</span></code> after every line):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">numpy</span> <span class="n">python3</span><span class="o">-</span><span class="n">scipy</span> <span class="n">python3</span><span class="o">-</span><span class="n">matplotlib</span> <span class="n">python3</span><span class="o">-</span><span class="n">distutils</span> <span class="n">python3</span><span class="o">-</span><span class="n">dev</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
</pre></div>
</div>
<div class="warning dropdown admonition">
<p class="admonition-title">Got Qt Errors?</p>
<p>If an error occurs during the installation, install the extended dependencies (includes Qt) with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libgl1</span><span class="o">-</span><span class="n">mesa</span><span class="o">-</span><span class="n">glx</span> <span class="n">libegl1</span><span class="o">-</span><span class="n">mesa</span> <span class="n">libxrandr2</span> <span class="n">libxrandr2</span> <span class="n">libxss1</span> <span class="n">libxcursor1</span> <span class="n">libxcomposite1</span> <span class="n">libasound2</span> <span class="n">libxi6</span> <span class="n">libxtst6</span>
</pre></div>
</div>
<p>Then re-try to install the libraries.</p>
</div>
<p>To test if the installation was successful, type <code class="docutils literal notranslate"><span class="pre">python3</span></code> in Terminal and import the three libraries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Python</span> <span class="mf">3.9.1</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Jul</span>  <span class="mi">25</span> <span class="mi">2030</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span><span class="p">)</span> <span class="p">[</span><span class="n">GCC</span> <span class="mf">9.3.0</span><span class="p">]</span> <span class="n">on</span> <span class="n">linux</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span> <span class="mi">1</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
<p>None of the three library imports should return an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> message. To learn more about Python read the section on <a class="reference internal" href="../jupyter/pypckg.html#sec-pypckg"><span class="std std-ref">Packages, Modules and Libraries</span></a>.</p>
</section>
<section id="git">
<span id="tm-git-requirements"></span><h3>GIT<a class="headerlink" href="#git" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: Less than 5 minutes.</strong></em></p>
<p>The installation of the git version control system and its usage is extensively described in the <a class="reference internal" href="git.html#dl"><span class="std std-ref">git section of this eBook</span></a>. In addition to the git functionalities described in the git section, the following are needed to manage large files that come along with TELEMAC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">git</span><span class="o">-</span><span class="nb">all</span> <span class="n">git</span><span class="o">-</span><span class="n">lfs</span>
</pre></div>
</div>
</section>
<section id="gnu-fortran-95-compiler-gfortran">
<h3>GNU Fortran 95 Compiler (gfortran)<a class="headerlink" href="#gnu-fortran-95-compiler-gfortran" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 3-10 minutes.</strong></em></p>
<p>The Fortran 95 compiler is needed to compile TELEMAC through a Python3 script, which requires that <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> is installed. The Debian Linux retrieves <code class="docutils literal notranslate"><span class="pre">gfortran</span></code> from the standard package repositories. Thus, to install the Fortran 95 compiler, open Terminal and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">gfortran</span>
</pre></div>
</div>
<div class="attention dropdown admonition">
<p class="admonition-title">If the gfortran installation fails…</p>
<p>Add the <a class="reference external" href="https://packages.debian.org/buster/gfortran">buster repository</a> for <em>amd64</em> to the Linux sources file (<code class="docutils literal notranslate"><span class="pre">/etc/apt/sources.list</span></code>). To open the file, go to <em>Activities</em> &gt; <em>Files</em> (file container symbol)&gt; <em>Other Locations</em> &gt; <em>etc</em> &gt; <em>apt</em> and right-click in the free space to open Terminal (you need to be root). In Terminal type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">editor</span> <span class="n">sources</span><span class="o">.</span><span class="n">list</span>
</pre></div>
</div>
<p>If not defined otherwise, the <a class="reference external" href="https://www.nano-editor.org/">GNU nano</a> text editor will open. Add the follow following line at the bottom of the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deb</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">de</span><span class="o">.</span><span class="n">debian</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">debian</span> <span class="n">buster</span> <span class="n">main</span>
</pre></div>
</div>
<p><em>Note:</em> This tutorial was written in Stuttgart (Germany) where <code class="docutils literal notranslate"><span class="pre">http://ftp.de.debian.org/debian</span></code> is one of the closest mirrors. Depending on where you are at the time of installing the Fortran 95 compiler replace the mirror address. A full list of repositories can be found at <a class="reference external" href="https://packages.debian.org/buster/amd64/gfortran-multilib/download">https://packages.debian.org</a>.</p>
<p>Then, save the edits with <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">O</span></code> keys and exit <em>Nano</em> with <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">X</span></code> keys. Next, update the repository information by typing (in Terminal):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">gfortran</span>
</pre></div>
</div>
</div>
</section>
<section id="more-compilers-and-essentials">
<h3>More Compilers and Essentials<a class="headerlink" href="#more-compilers-and-essentials" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 2-5 minutes.</strong></em>
To enable parallelism, a <em>C</em> compiler is required for recognition of the command <code class="docutils literal notranslate"><span class="pre">cmake</span></code> in Terminal. Moreover, we will need <code class="docutils literal notranslate"><span class="pre">build-essential</span></code> for building packages and create a comfortable environment for <code class="docutils literal notranslate"><span class="pre">dialog</span></code>ues. <a class="reference external" href="https://www.vim.org/">VIM</a> is a text editor that we will use for bash file editing. Alternatively to VIM, consider <a class="reference external" href="https://wiki.gnome.org/Apps/Gedit">gedit</a> or <a class="reference external" href="https://www.nano-editor.org/">Nano</a> (remove not-wanted editors from the below list). Therefore, open Terminal (as root/superuser, i.e., type <code class="docutils literal notranslate"><span class="pre">su</span></code>) and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">cmake</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span> <span class="n">dialog</span> <span class="n">vim</span> <span class="n">gedit</span> <span class="n">gedit</span><span class="o">-</span><span class="n">plugins</span>
</pre></div>
</div>
</section>
<section id="get-the-telemac-repo">
<h3>Get the TELEMAC Repo<a class="headerlink" href="#get-the-telemac-repo" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 25-40 minutes (large downloads).</strong></em></p>
<p>Before getting more packages to enable parallelism and compiling, download the latest version of TELEMAC with git in which additional packages will be embedded. To download (i.e., <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code>) TELEMAC, open Terminal, which will by default start in your home directory (<code class="docutils literal notranslate"><span class="pre">/home/USERNAME/</span></code>). The following instructions assume you want to install TELEMAC directly in your home directory. However, it might make sense to create a new sub-folder (e.g., called <code class="docutils literal notranslate"><span class="pre">/modeling</span></code>) to better organize your file system (<code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">~/modeling/</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/modeling</span></code>). To download TELEMAC into the home (or a new) directory, type (enter <code class="docutils literal notranslate"><span class="pre">no</span></code> when asked for password encryption):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitlab</span><span class="o">.</span><span class="n">pam</span><span class="o">-</span><span class="n">retd</span><span class="o">.</span><span class="n">fr</span><span class="o">/</span><span class="n">otm</span><span class="o">/</span><span class="n">telemac</span><span class="o">-</span><span class="n">mascaret</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>This will have downloaded TELEMAC to a sub-directory called <code class="docutils literal notranslate"><span class="pre">/telemac-mascaret</span></code>.</p>
<div class="tip dropdown admonition">
<p class="admonition-title">There are many (experimental) branches of TELEMAC available</p>
<p>The TELEMAC git repository provides many other TELEMAC versions in the form of development or old-version branches. For instance, the following clones the <code class="docutils literal notranslate"><span class="pre">upwind_gaia</span></code> branch to a local sub-folder called <code class="docutils literal notranslate"><span class="pre">telemac/gaia-upwind</span></code>. After cloning this single branch, compiling TELEMAC can be done as described in the following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">-</span><span class="n">b</span> <span class="n">upwind_gaia</span> <span class="o">--</span><span class="n">single</span><span class="o">-</span><span class="n">branch</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitlab</span><span class="o">.</span><span class="n">pam</span><span class="o">-</span><span class="n">retd</span><span class="o">.</span><span class="n">fr</span><span class="o">/</span><span class="n">otm</span><span class="o">/</span><span class="n">telemac</span><span class="o">-</span><span class="n">mascaret</span><span class="o">.</span><span class="n">git</span> <span class="n">telemac</span><span class="o">/</span><span class="n">gaia</span><span class="o">-</span><span class="n">upwind</span>
</pre></div>
</div>
<p>Read more about cloning single TELEMAC branches in the <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=telemac-mascaret_git_repository">TELEMAC wiki</a>.</p>
</div>
<p>After downloading (cloning) the TELEMAC repository, switch to (check out) the latest version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">telemac</span><span class="o">-</span><span class="n">mascaret</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">tags</span><span class="o">/</span><span class="n">v8p4r0</span>
</pre></div>
</div>
</section>
</section>
<section id="optional-requirements-parallelism-and-others">
<h2>Optional Requirements (Parallelism and Others)<a class="headerlink" href="#optional-requirements-parallelism-and-others" title="Permalink to this headline">#</a></h2>
<p>This section guides through the installation of additional packages required for parallelism. Make sure that Terminal recognizes <code class="docutils literal notranslate"><span class="pre">gcc</span></code>, which should be included in the <em>Debian</em> base installation (verify with <code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">--help</span></code>). This section includes installation for:</p>
<ul class="simple">
<li><p>Install packages for parallelism to enable a substantial acceleration of simulations:</p>
<ul>
<li><p>MPI distribution</p></li>
<li><p>Metis 5.1.0</p></li>
</ul>
</li>
<li><p>For the MED file format (input mesh and computation results):</p>
<ul>
<li><p>Hdf5</p></li>
<li><p>MEDFichier 3.2.0</p></li>
</ul>
</li>
</ul>
<section id="parallelism-install-mpi">
<span id="mpi"></span><h3>Parallelism: Install MPI<a class="headerlink" href="#parallelism-install-mpi" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 5 minutes.</strong></em></p>
<p>TELEMAC’s parallelism modules require that the <em>Message Passing Interface</em> (<a class="reference internal" href="../documentation/glossary.html#term-MPI"><span class="xref std std-term">MPI</span></a>) standard is installed either through the <em>MPICH</em> or the <em>Open MPI</em> library. Here, we opt for <em>Open MPI</em>, which can be installed via Terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libopenmpi</span><span class="o">-</span><span class="n">dev</span> <span class="n">openmpi</span><span class="o">-</span><span class="nb">bin</span>
</pre></div>
</div>
<p>To test if the installation was successful type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpif90</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>The Terminal should prompt option flags for processing a <em>gfortran</em> file. The installation of MPI on Linux is also documented in the <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_mpi">opentelemac wiki</a>.</p>
<div class="note admonition">
<p class="admonition-title">How to use MPICH in lieu of Open MPI</p>
<p>This tutorial uses the configuration file <code class="docutils literal notranslate"><span class="pre">systel.edfHy.cfg</span></code>, which includes parallelism compiling options that build on <em>Open MPI</em>. Other configuration files (e.g., <code class="docutils literal notranslate"><span class="pre">systel.cis-ubuntu.cfg</span></code>) use <em>MPICH</em> instead of <em>Open MPI</em>. To use those configuration files, install <em>MPICH</em> with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">mpich</span></code>.</p>
</div>
</section>
<section id="parallelism-install-metis">
<span id="metis"></span><h3>Parallelism: Install Metis<a class="headerlink" href="#parallelism-install-metis" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 10-15 minutes.</strong></em></p>
<p>Metis is a software package for partitioning unstructured graphs, partitioning meshes, and computing fill-reducing orderings of sparse matrices by George Karypis. TELEMAC uses <em>Metis</em> as a part of <em>Partel</em> to split the mesh into multiple parts for parallel runs. <em>Metis</em> is developed by the Karypis Lab at the <a class="reference external" href="https://umn.edu/">University of Minnesota</a>.</p>
<p>Download the <em>Metis</em> archive and unpack it in a temporary (<code class="docutils literal notranslate"><span class="pre">temp</span></code>) directory. The following code block changes to the <code class="docutils literal notranslate"><span class="pre">optionals</span></code> directory (<code class="docutils literal notranslate"><span class="pre">cd</span></code>) of TELEMAC, creates the <code class="docutils literal notranslate"><span class="pre">temp</span></code> folder with <code class="docutils literal notranslate"><span class="pre">mkdir</span></code>, downloads, and unzips the <em>Metis</em> archive (run in Terminal as <em><strong>normal user</strong></em> - <em><strong>not as root</strong></em>):</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>The <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_metis">Telemac installation wiki</a> points to a software repository containing Metis-v5.1.0 that is hosted on the website of the <a class="reference external" href="http://glaros.dtc.umn.edu/gkhome/metis/metis/download">Karypis Lab</a>, which, however, was not available anymore upon our last update. This is why this eBook provides a Metis v5.1.1 fork from the Karypis Lab’s <a class="reference external" href="https://github.com/KarypisLab/GKlib.git">METIS Github repository</a> at <a class="reference external" href="https://github.com/hydro-informatics/metis">hydro-informatics/metis</a>.</p>
</aside>
<p>To install Metis, use the <a class="reference external" href="https://github.com/hydro-informatics/metis">hydro-informatics/metis</a> v5.1.1 fork from the Karypis Lab’s <a class="reference external" href="https://github.com/KarypisLab/METIS">METIS Github repository</a>, which is tweaked for the Telemac installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span>
<span class="n">mkdir</span> <span class="n">metis</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">hydro</span><span class="o">-</span><span class="n">informatics</span><span class="o">/</span><span class="n">metis</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">metis</span>
</pre></div>
</div>
<p>This repository also embraces a fork from the Karypis Labs’ <a class="reference external" href="https://github.com/KarypisLab/GKlib">GKlib</a>, which still needs to be compiled (starting from the <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/metis</span></code> folder):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">GKlib</span>
<span class="n">make</span> <span class="n">config</span> <span class="n">cc</span><span class="o">=</span><span class="n">gcc</span> <span class="n">prefix</span><span class="o">=~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">metis</span><span class="o">/</span><span class="n">GKlib</span> <span class="n">openmp</span><span class="o">=</span><span class="nb">set</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
<span class="n">cd</span> <span class="o">..</span>
</pre></div>
</div>
<p>Next, adapt the Metis’ <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> either with any text editor or the <em>VIM</em> text editor (installed earlier through <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">vim</span></code>):</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
Any text editor</label><div class="sd-tab-content docutils">
<p>Open the metis <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> (i.e., <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/metis/Makefile</span></code>) by navigating through your system browser (also known as <em>Explorer</em> on Windows) and double-clicking on the <em>Makefile</em> (opens, for example, <a class="reference external" href="https://wiki.gnome.org/Apps/Gedit">gedit</a>). At the top of the Makefile, find <code class="docutils literal notranslate"><span class="pre">prefix</span>&#160; <span class="pre">=</span> <span class="pre">not-set</span></code> and <code class="docutils literal notranslate"><span class="pre">cc</span> <span class="pre">=</span> <span class="pre">not-set</span></code> to replace them with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">prefix</span> <span class="o">=</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">metis</span><span class="o">/</span><span class="n">build</span><span class="o">/</span>
<span class="n">cc</span> <span class="o">=</span> <span class="n">gcc</span>
</pre></div>
</div>
<p>Save and close the Makefile.</p>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-5">
VIM</label><div class="sd-tab-content docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vim</span> <span class="n">Makefile</span>
</pre></div>
</div>
<p><em>VIM</em> opens in the Terminal window and the program may be a little bit confusing to use for someone who is used to <em>Windows</em> or <em>mac OS</em>. If <em>VIM</em>/Terminal asks if you want to continue {<strong>E</strong>}diting, confirm with the <code class="docutils literal notranslate"><span class="pre">E</span></code> key. Then click in the file and enable editing through pressing the <code class="docutils literal notranslate"><span class="pre">i</span></code> key. Now, <code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">INSERT</span> <span class="pre">--</span></code> should be prompted on the bottom of the window. Look for the <code class="docutils literal notranslate"><span class="pre">prefix</span>&#160; <span class="pre">=</span> <span class="pre">not-set</span></code> and the <code class="docutils literal notranslate"><span class="pre">cc</span> <span class="pre">=</span> <span class="pre">not-set</span></code> definitions. Click in the corresponding lines and press the <code class="docutils literal notranslate"><span class="pre">i</span></code> key to enable editing (recall: <code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">INSERT</span> <span class="pre">--</span></code> will appear at the bottom of the window). Change both variables to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">prefix</span> <span class="o">=</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">metis</span><span class="o">/</span><span class="n">build</span><span class="o">/</span>
<span class="n">cc</span> <span class="o">=</span> <span class="n">gcc</span>
</pre></div>
</div>
<p>Press <code class="docutils literal notranslate"><span class="pre">Esc</span></code> to leave the <em>INSERT</em> mode and then type <code class="docutils literal notranslate"><span class="pre">:wq</span></code> (the letters are visible on the bottom of the window) to save (write-quit) the file. Hit <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to return to the Terminal.</p>
<div class="dropdown admonition">
<p class="admonition-title">Troubleshoot typical VIM issues</p>
<ul class="simple">
<li><p><strong>VIM freezes</strong>: Did you hit the <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">S</span></code> keys, which is intuitive for <em>Windows</em> users to save a file, but in <em>Linux</em>, it has a different effect? So, you have freezed the window. To unfreeze, simply hit <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">Q</span></code></p></li>
<li><p><strong>IS <code class="docutils literal notranslate"><span class="pre">:wq</span></code> not working?</strong> Maybe you enabled the <em>easy mode</em>. Disable <em>easy mode</em> by hitting the <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">O</span></code> keys.</p></li>
<li><p><strong>Are you on a virtual machine or remote desktop?</strong> Check if another keyboard layout is installed on the VM guest / remote machine the host machine /your computer uses.</p></li>
</ul>
</div>
</div>
</div>
<p>Back in Terminal, install Metis (make sure to be in the right directory, that is, <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/metis/</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">config</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>To verify the successful installation, make sure that the file <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/metis/build/lib/libmetis.a</span></code> exists (i.e., <code class="docutils literal notranslate"><span class="pre">&lt;install_path&gt;/lib/libmetis.a</span></code> ).</p>
<div class="tip dropdown admonition">
<p class="admonition-title">Debian alternative: apt-install libmetis-dev</p>
<p>Alternatively, on Debian-based systems, install <code class="docutils literal notranslate"><span class="pre">libmetis-dev</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libmetis</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>This package currently provides Metis v5.1.0, but verify the version on <a class="reference external" href="https://packages.debian.org/sid/libmetis-dev">https://packages.debian.org</a> to be sure having a workable version of Metis available. However, we did not test the integration of Metis in the Telemac installation.</p>
</div>
</section>
<section id="hdf5-and-med-format-handlers">
<span id="med-hdf"></span><h3>Hdf5 and MED Format Handlers<a class="headerlink" href="#hdf5-and-med-format-handlers" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 15-25 minutes (building libraries takes time).</strong></em></p>
<p><strong>HDF5</strong> is a portable file format that incorporates metadata and communicates efficiently with <em>C/C++</em> and <em>Fortran</em> on small laptops as well as massively parallel systems. The <em>hdf5</em> file library is provided by the <a class="reference external" href="https://portal.hdfgroup.org/">HDFgroup.org</a>.</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>The <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_on_linux">Telemac installation wiki</a> suggests using version <code class="docutils literal notranslate"><span class="pre">1.10.7</span></code>, which, however, will cause an error when compiling the medfile library.</p>
</aside>
<p>We will install here version <code class="docutils literal notranslate"><span class="pre">1.10.3</span></code>. Do not try to use any other <em>hdf5</em> version because those will not work with the <em>med file</em> library (next step). The following code block downloads and unzips the <em>hdf-5-1.10.3</em> archive in the above-created (metis) <code class="docutils literal notranslate"><span class="pre">temp/</span></code> folder (run in Terminal as normal user - not as root):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">temp</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">support</span><span class="o">.</span><span class="n">hdfgroup</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ftp</span><span class="o">/</span><span class="n">HDF5</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">hdf5</span><span class="o">-</span><span class="mf">1.10</span><span class="o">/</span><span class="n">hdf5</span><span class="o">-</span><span class="mf">1.10.3</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">hdf5</span><span class="o">-</span><span class="mf">1.10.3</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">gunzip</span> <span class="n">hdf5</span><span class="o">-</span><span class="mf">1.10.3</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">hdf5</span><span class="o">-</span><span class="mf">1.10.3</span><span class="o">.</span><span class="n">tar</span>
<span class="n">cd</span> <span class="n">hdf5</span><span class="o">-</span><span class="mf">1.10.3</span>
</pre></div>
</div>
<p>Configure and compile <em>hdf5</em> (enter every command one-by-one):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">USERNAME</span><span class="o">/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">hdf5</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">parallel</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>The flag <code class="docutils literal notranslate"><span class="pre">--prefix=/home/USERNAME/telemac/optionals/hdf5</span></code> determines the installation directory for the <em>hdf5</em> library, which we will need in the next step for installing the <em>med file</em> library. The absolute path <code class="docutils literal notranslate"><span class="pre">/home/USERNAME/</span></code> is required because <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> does not accept a relative path.
The installation of <em>hdf5</em> on Linux is also documented in the <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_hdf5">Telemac wiki</a>.</p>
<p><em><strong>MED FILE LIBRARY:</strong></em> The <em>med file</em> library is provided by <a class="reference external" href="https://salome-platform.org/">salome-platform.org</a> and we need to use the file (<a class="reference external" href="http://files.salome-platform.org/Salome/other/med-4.0.0.tar.gz">med-4.0.0.tar.gz</a> to ensure compatibility with <em>hdf5</em>. So do not try to use any other <em>med file</em> library version because those will not work properly with the <em>hdf5</em> file library. Moreover, the <em>med file</em> library requires that <em>zlib</em> is installed. To install <em>zlib</em> open Terminal and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">cache</span> <span class="n">search</span> <span class="n">zlib</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">i</span> <span class="n">zlib</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">zlib1g</span> <span class="n">zlib1g</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>The following command block, switches to the above-created <code class="docutils literal notranslate"><span class="pre">temp</span></code> folder, downloads, and unzips the <em>med-4.0.0</em> archive (run in Terminal as <em><strong>normal user</strong></em> - <em><strong>not as root</strong></em>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">temp</span>
<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="o">.</span><span class="n">salome</span><span class="o">-</span><span class="n">platform</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">Salome</span><span class="o">/</span><span class="n">other</span><span class="o">/</span><span class="n">med</span><span class="o">-</span><span class="mf">4.0.0</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">gunzip</span> <span class="n">med</span><span class="o">-</span><span class="mf">4.0.0</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">med</span><span class="o">-</span><span class="mf">4.0.0</span><span class="o">.</span><span class="n">tar</span>
<span class="n">cd</span> <span class="n">med</span><span class="o">-</span><span class="mf">4.0.0</span>
</pre></div>
</div>
<p>To compile the <em>med file</em> library type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">USERNAME</span><span class="o">/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">med</span><span class="o">-</span><span class="mf">4.0.0</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">hdf5</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">USERNAME</span><span class="o">/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">hdf5</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">python</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>The flag <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> sets the installation directory and <code class="docutils literal notranslate"><span class="pre">--width-hdf5</span></code> tells the med library where it can find the <em>hdf5</em> library. Thus, adapt <code class="docutils literal notranslate"><span class="pre">/home/USERNAME/telemac/optionals/hdf5</span></code> to your local <code class="docutils literal notranslate"><span class="pre">&lt;install_path&gt;</span></code> of the <em>hdf5</em> library. Both flags do not accept relative paths (<code class="docutils literal notranslate"><span class="pre">~/telemac/...</span></code>), and therefore, we need to use the absolute paths (<code class="docutils literal notranslate"><span class="pre">home/USERNAME/telemac/...</span></code>) here.</p>
<div class="note dropdown admonition">
<p class="admonition-title">Why <em>–disable-python</em>?</p>
<p>We need to disable Python for the <em>med file</em> library because this feature would require <em>SWIG</em> version 2.0 and it is not compatible with the current versions of <em>SWIG</em> (4.x). Because <em>SWIG</em> has no full backward compatibility, the only option is to disable Python integrity for the <em>med file</em> library. Otherwise, Python integrity could be implemented by installing Python developer kits ( <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">python3-dev</span></code>  and  <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">python3.7-dev</span></code> ) and using the configuration <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-hdf5=/home/USERNAME/Telemac/hdf5</span> <span class="pre">PYTHON_LDFLAGS='-lpython3.7m'</span> <span class="pre">--with-swig=yes</span></code>. To find out what version of Python is installed, type <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-V</span></code>.</p>
</div>
<p>The installation of the <em>med file</em> library on Linux is also documented in the <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_med">opentelemac wiki</a>.</p>
<div class="attention dropdown admonition">
<p class="admonition-title">Permission denied?</p>
<p>If you consistently get <em><strong>permission denied</strong></em> messages, you are probably installing Telemac in a directory where you should not install it. If your are sure about the ownership of the installation directory, you may unlock all read and write rights for the <code class="docutils literal notranslate"><span class="pre">telemac</span></code> directory with the following command: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-R</span> <span class="pre">777</span>&#160; <span class="pre">/home/USERNAME/telemac</span></code> (replace <code class="docutils literal notranslate"><span class="pre">USERNAME</span></code> with the user for whom TELEMAC is installed).</p>
</div>
<p>Finally, <strong>remove the <code class="docutils literal notranslate"><span class="pre">temp</span></code> folder</strong> to avoid storing garbage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span>
<span class="n">sudo</span> <span class="n">rm</span> <span class="o">-</span><span class="n">r</span> <span class="n">temp</span>
</pre></div>
</div>
</section>
<section id="aed2">
<h3>AED2<a class="headerlink" href="#aed2" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: &lt; 5 minutes.</strong></em></p>
<p>To use TELEMAC’s water quality (<em><strong>waqtel</strong></em>) module, the <em>AED2</em> is (partially) required. In some versions of TELEMAC, the make files for installing <em>AED2</em> are provided with the <code class="docutils literal notranslate"><span class="pre">git</span></code> repository in the <em>optionals</em> folder. Otherwise, download and unpack the <em>aed2</em> folder from the manual installation sources on <a class="reference external" href="http://www.opentelemac.org/index.php/component/jdownloads/summary/39-manual-installation-sources/2126-aed2?Itemid=54">opentelemac.org</a>. Then, to install <em>AED2</em>, <em>cd</em> to the <em>aed2</em> folder and run <code class="docutils literal notranslate"><span class="pre">make</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">optionals</span><span class="o">/</span><span class="n">aed2</span>
<span class="n">make</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>AED2</em> is not needed for the tutorials on this website and the installation of this module can be skipped.</p>
</div>
</section>
</section>
<section id="compile-telemac">
<span id="compile-tm"></span><h2>Compile TELEMAC<a class="headerlink" href="#compile-telemac" title="Permalink to this headline">#</a></h2>
<section id="adapt-and-verify-configuration-file-systel-x-cfg">
<h3>Adapt and Verify Configuration File (systel.x.cfg)<a class="headerlink" href="#adapt-and-verify-configuration-file-systel-x-cfg" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 2-20 minutes.</strong></em></p>
<p>Two options are described in this section for setting up a configuration file: (i) a modification (reduced module availability) of the default-available <code class="docutils literal notranslate"><span class="pre">~/telemac/configs/systel.edf.cgf</span></code> configuration file, and (ii) extended descriptions for setting up a custom configuration file. Option (i) provides a powerful HPC environment, but does not include the installation of the excludes <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_aed">AED2 (waqtel)</a>, <a class="reference external" href="http://mumps.enseeiht.fr/">MUMPS</a>, and <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_gotm">GOTM (general ocean)</a> modules.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-6">
EDF Template</label><div class="sd-tab-content docutils">
<p>To facilitate setting up the <code class="docutils literal notranslate"><span class="pre">systel</span></code> file, use our edf-based template: right-click on <a class="reference external" href="https://raw.githubusercontent.com/Ecohydraulics/telemac-helpers/main/edf/systel.edfHy.cfg">this download of systel.edfHy.cfg</a> &gt; <em>Save Link As…</em> &gt; <code class="docutils literal notranslate"><span class="pre">~/telemac/configs/systel.edfHy.cfg</span></code>, which was tested on Debian 10, Debian 11, and Linux Mint 21.3.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">systel.edfHy.cfg</span></code> is designed to be used with the <code class="docutils literal notranslate"><span class="pre">S10.gfortran.dyn</span></code> configuration, for which we removed all dependencies of AED2, MUMPS, and GOTM. That is, none of the flags <code class="docutils literal notranslate"><span class="pre">[flags_mumps]</span> <span class="pre">[flags_aed]</span> <span class="pre">[flags_gotm]</span></code> is enabled and they were removed from the <code class="docutils literal notranslate"><span class="pre">S10.gfortran.dyn</span></code> configuration, which is fully sufficient for running the <a class="reference internal" href="../numerics/telemac/telemac.html#chpt-telemac"><span class="std std-ref">Telemac tutorials</span></a> in this eBook.</p>
<div class="warning admonition">
<p class="admonition-title">How to add AED2, MUMPS, and GOTM</p>
<p>To add AED2, MUMPS, and GOTM functionality install the corresponding modules in the <code class="docutils literal notranslate"><span class="pre">optionals/</span></code> directory and use the default <code class="docutils literal notranslate"><span class="pre">systel.edf.cfg</span></code> configuration file. The installation of AED2, MUMPS, and GOTM is described in the <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_on_linux">Telemac installation wiki</a>, though not straight forward because multiple links and additional dependencies are outdated.</p>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-7">
Custom Setup</label><div class="sd-tab-content docutils">
<div class="warning admonition">
<p class="admonition-title">Python API Not Set Up</p>
<p>The following descriptions for setting up a custom <code class="docutils literal notranslate"><span class="pre">systel.X.cfg</span></code> configuration file do not enable Telemac’s Python API. For enabling the Python API, follow the template-based installation instructions, or use <code class="docutils literal notranslate"><span class="pre">systel.edf.cfg</span></code>.</p>
</div>
<p>The configuration file will tell the compiler how flags are defined and where optional software lives. Here, we use the configuration file <code class="docutils literal notranslate"><span class="pre">systel.cis-debian.cfg</span></code>, which lives in <code class="docutils literal notranslate"><span class="pre">~/telemac/configs/</span></code>. In particular, we are interested in the following section of the file:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="cp"># _____                          ___________________________________</span>
<span class="cp"># ____/ Debian gfortran openMPI /__________________________________/</span>
<span class="p">[</span><span class="n">debgfopenmpi</span><span class="p">]</span>
<span class="cp">#</span>
<span class="n">par_cmdexec</span><span class="p">:</span><span class="w">   </span><span class="o">&lt;</span><span class="n">config</span><span class="o">&gt;/</span><span class="n">partel</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">partel</span><span class="p">.</span><span class="n">par</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">partel</span><span class="p">.</span><span class="nb">log</span><span class="o">&gt;</span>
<span class="cp">#</span>
<span class="n">mpi_cmdexec</span><span class="p">:</span><span class="w">   </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mpiexec</span><span class="w"> </span><span class="o">-</span><span class="n">wdir</span><span class="w"> </span><span class="o">&lt;</span><span class="n">wdir</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ncsize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">exename</span><span class="o">&gt;</span>
<span class="n">mpi_hosts</span><span class="p">:</span>
<span class="cp">#</span>
<span class="n">cmd_obj</span><span class="p">:</span><span class="w">    </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mpif90</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">O3</span><span class="w"> </span><span class="o">-</span><span class="n">DHAVE_MPI</span><span class="w"> </span><span class="o">-</span><span class="n">fconvert</span><span class="o">=</span><span class="n">big</span><span class="o">-</span><span class="n">endian</span><span class="w"> </span><span class="o">-</span><span class="n">frecord</span><span class="o">-</span><span class="n">marker</span><span class="o">=</span><span class="mi">4</span><span class="w"> </span><span class="o">&lt;</span><span class="n">mods</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">incs</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">f95name</span><span class="o">&gt;</span>
<span class="n">cmd_lib</span><span class="p">:</span><span class="w">    </span><span class="n">ar</span><span class="w"> </span><span class="n">cru</span><span class="w"> </span><span class="o">&lt;</span><span class="n">libname</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">objs</span><span class="o">&gt;</span>
<span class="n">cmd_exe</span><span class="p">:</span><span class="w">    </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mpif90</span><span class="w"> </span><span class="o">-</span><span class="n">fconvert</span><span class="o">=</span><span class="n">big</span><span class="o">-</span><span class="n">endian</span><span class="w"> </span><span class="o">-</span><span class="n">frecord</span><span class="o">-</span><span class="n">marker</span><span class="o">=</span><span class="mi">4</span><span class="w"> </span><span class="o">-</span><span class="n">lpthread</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">lm</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="o">&lt;</span><span class="n">exename</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">objs</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">libs</span><span class="o">&gt;</span>
<span class="cp">#</span>
<span class="n">mods_all</span><span class="p">:</span><span class="w">   </span><span class="o">-</span><span class="n">I</span><span class="w"> </span><span class="o">&lt;</span><span class="n">config</span><span class="o">&gt;</span>
<span class="cp">#</span>
<span class="n">libs_all</span><span class="p">:</span><span class="w">   </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">openmpi</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libmpi</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">telemac</span><span class="o">/</span><span class="n">metis</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libmetis</span><span class="p">.</span><span class="n">a</span>
</pre></div>
</div>
<p>The configuration file contains other configurations such as a <em>scalar</em> or a <em>debug</em> configuration for compiling TELEMAC. Here, we only use the <em>Debian gfortran open MPI</em> section that has the configuration name <code class="docutils literal notranslate"><span class="pre">[debgfopenmpi]</span></code>. To verify if this section if correctly defined, check where the following libraries live on your system (use Terminal and <code class="docutils literal notranslate"><span class="pre">cd</span></code> + <code class="docutils literal notranslate"><span class="pre">ls</span></code> commands or Debian’s <em>File</em> browser):</p>
<ul class="simple">
<li><p><em>Metis</em> is typically located in <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/metis/build</span></code> (if you used this directory for <code class="docutils literal notranslate"><span class="pre">&lt;install_path&gt;</span></code>), where <code class="docutils literal notranslate"><span class="pre">libmetis.a</span></code> typically lives in <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/metis/build/lib/libmetis.a</span></code></p></li>
<li><p><em>Open MPI</em>’s <em>include</em> folder is typically located in <code class="docutils literal notranslate"><span class="pre">/usr/lib/x86_64-linux-gnu/openmpi/include</span></code></p></li>
<li><p><em>Open MPI</em> library typically lives in <code class="docutils literal notranslate"><span class="pre">/usr/lib/x86_64-linux-gnu/openmpi/libmpi.so</span></code><br>The number <strong>40.20.3</strong> may need to be added after <strong><a class="reference external" href="http://libmpi.so">libmpi.so</a></strong> when your system is based on Debian 10.</p></li>
<li><p><em>mpiexec</em> is typically installed in <code class="docutils literal notranslate"><span class="pre">/usr/bin/mpiexec</span></code></p></li>
<li><p><em>mpif90</em> is typically installed in <code class="docutils literal notranslate"><span class="pre">/usr/bin/mpif90</span></code></p></li>
<li><p>If installed, <em>AED2</em> typically lives in <code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/aed2/</span></code>, which should contain the file <code class="docutils literal notranslate"><span class="pre">libaed2.a</span></code> (among others) and the folders <em>include</em>, <em>obj</em>, and <em>src</em>.</p></li>
</ul>
<p>Then open the configuration file in <em>VIM</em> (or any other text editor) to verify and adapt the <em>Debian gfortran open MPI</em> section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">configs</span>
<span class="n">vim</span> <span class="n">systel</span><span class="o">.</span><span class="n">edfHy</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<div class="admonition-enable-parallelism admonition" id="parcmd">
<p class="admonition-title">Enable Parallelism</p>
<p>Make the following adaptations in <em>Debian gfortran open MPI</em> section to enable parallelism:</p>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">par_cmdexec</span></code> from the configuration file; that means delete the line (otherwise, parallel processing will crash with a message that says <em>cannot find PARTEL.PAR</em>):<br><code class="docutils literal notranslate"><span class="pre">par_cmdexec:</span>&#160;&#160; <span class="pre">&lt;config&gt;/partel</span> <span class="pre">&lt;</span> <span class="pre">PARTEL.PAR</span> <span class="pre">&gt;&gt;</span> <span class="pre">&lt;partel.log&gt;</span></code></p></li>
<li><p>Find <code class="docutils literal notranslate"><span class="pre">libs_all</span></code> to add and adapt the following items:</p>
<ul>
<li><p><em>metis</em> (all <em>metis</em>-related directories to <code class="docutils literal notranslate"><span class="pre">/home/USERNAME/telemac/optionals/metis/build/lib/libmetis.a</span></code>).</p></li>
<li><p><em>openmpi</em> (correct the library file to <code class="docutils literal notranslate"><span class="pre">/usr/lib/x86_64-linux-gnu/openmpi/libmpi.so</span></code> or wherever <code class="docutils literal notranslate"><span class="pre">libmpi.so.xx.xx.x</span></code> lives on your machine).</p></li>
<li><p><em>med</em> including <em>hdf5</em> (<code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/</span></code>).</p></li>
<li><p><em>aed2</em> (<code class="docutils literal notranslate"><span class="pre">~/telemac/optionals/aed2/libaed2.a</span></code>).</p></li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">libs_all:</span>&#160;&#160;&#160; <span class="pre">/usr/lib/x86_64-linux-gnu/openmpi/lib/libmpi.so</span> <span class="pre">/home/USERNAME/telemac/optionals/metis/build/lib/libmetis.a</span> <span class="pre">/home/USERNAME/telemac/optionals/aed2/libaed2.a</span> <span class="pre">/home/USERNAME/telemac/optionals/med-4.0.0/lib/libmed.so</span> <span class="pre">/home/USERNAME/telemac/optionals/hdf5/lib/libhdf5.so</span></code></p>
<ul class="simple">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">incs_all</span></code> variable to point include <em>openmpi</em>, <em>med</em>, and <em>aed2</em>:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">incs_all:</span> <span class="pre">-I</span> <span class="pre">/usr/lib/x86_64-linux-gnu/openmpi/include</span> <span class="pre">-I</span> <span class="pre">/home/USERNAME/telemac/optionals/aed2</span> <span class="pre">-I</span> <span class="pre">/home/USERNAME/telemac/optionals/aed2/include</span>&#160; <span class="pre">-I</span> <span class="pre">/home/USERNAME/telemac/optionals/med-4.0.0/include</span></code></p>
<ul class="simple">
<li><p>Search for <em>openmpi</em> in <code class="docutils literal notranslate"><span class="pre">libs_all</span></code> and</p></li>
<li><p>Search for <code class="docutils literal notranslate"><span class="pre">cmd_obj:</span></code> definitions, add <code class="docutils literal notranslate"><span class="pre">-cpp</span></code> in front of the <code class="docutils literal notranslate"><span class="pre">-c</span></code> flags, <code class="docutils literal notranslate"><span class="pre">-DHAVE_AED2</span></code>, and <code class="docutils literal notranslate"><span class="pre">-DHAVE_MED</span></code>. For example:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">cmd_obj:</span>&#160;&#160;&#160; <span class="pre">/usr/bin/mpif90</span> <span class="pre">-cpp</span> <span class="pre">-c</span> <span class="pre">-O3</span> <span class="pre">-DHAVE_AED2</span> <span class="pre">-DHAVE_MPI</span> <span class="pre">-DHAVE_MED</span> <span class="pre">-fconvert=big-endian</span> <span class="pre">-frecord-marker=4</span> <span class="pre">&lt;mods&gt;</span> <span class="pre">&lt;incs&gt;</span> <span class="pre">&lt;f95name&gt;</span></code></p>
<p>An additional keyword in the configurations is <code class="docutils literal notranslate"><span class="pre">options:</span></code> that accepts multiple keywords including <code class="docutils literal notranslate"><span class="pre">mpi</span></code>, <code class="docutils literal notranslate"><span class="pre">api</span></code> (<em>TelApy</em> - <em>TELEMAC’s Python API</em>), <code class="docutils literal notranslate"><span class="pre">hpc</span></code>, and <code class="docutils literal notranslate"><span class="pre">dyn</span></code> or <code class="docutils literal notranslate"><span class="pre">static</span></code>. The provided <code class="docutils literal notranslate"><span class="pre">cfg</span></code> file primarily uses the <code class="docutils literal notranslate"><span class="pre">mpi</span></code> keyword. To use other installation options (e.g., HPC or dynamic), read the instructions for HPC installation on <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_on_linux">opentelemac.org</a> and have a look at the most advanced default config file from EDF (<code class="docutils literal notranslate"><span class="pre">~/telemac/configs/systel.edf.cfg</span></code>).</p>
</div>
</div>
</div>
</section>
<section id="setup-python-source-file">
<h3>Setup Python Source File<a class="headerlink" href="#setup-python-source-file" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 4-20 minutes.</strong></em></p>
<p>A Python source file lives in <code class="docutils literal notranslate"><span class="pre">~/telemac/configs</span></code>, where also a template called <code class="docutils literal notranslate"><span class="pre">pysource.template.sh</span></code> is available. This section guides through either using our <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> (without AED2 and MUMPS), or a custom source file.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
Template Usage</label><div class="sd-tab-content docutils">
<p>To facilitate setting up the <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> file, our template is designed for use with the above-described <code class="docutils literal notranslate"><span class="pre">systel.edfHy.cfg</span></code> configuration file, and it is  based on the default-provided <code class="docutils literal notranslate"><span class="pre">pysource.template.sh</span></code>. Either <a class="reference external" href="https://raw.githubusercontent.com/Ecohydraulics/telemac-helpers/main/edf/pysource.gfortranHPC.sh">download pysource.gfortranHPC.sh</a> &gt; <em>Save Link As…</em> &gt; <code class="docutils literal notranslate"><span class="pre">~/telemac/configs/pysource.gfortranHPC.sh</span></code> or create a new pysource file with the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>### TELEMAC settings -----------------------------------------------------------
###
# Path to telemac root dir
export HOMETEL=/home/USER-NAME/telemac/v8p4r0
# Adding python scripts to PATH
export PATH=$HOMETEL/scripts/python3:.:$PATH
# Configuration file
export SYSTELCFG=$HOMETEL/configs/systel.edfHy.cfg
# Name of the configuration to use
export USETELCFG=S10.gfortran.dyn
# Path to this file
export SOURCEFILE=$HOMETEL/configs/pysource.gfortranHPC.sh
### Python
# To force python to flush its output
export PYTHONUNBUFFERED=&#39;true&#39;
### API
export PYTHONPATH=$HOMETEL/scripts/python3:$PYTHONPATH
export LD_LIBRARY_PATH=$HOMETEL/builds/$USETELCFG/lib:$HOMETEL/builds/$USETELCFG/wrap_api/lib:$LD_LIBRARY_PATH
export PYTHONPATH=$HOMETEL/builds/$USETELCFG/wrap_api/lib:$PYTHONPATH
###
### EXTERNAL LIBRARIES -----------------------------------------------------------
###
### METIS ----------------------------
###
### COMPILERS -----------------------------------------------------------
###
# Here are a few examples for external libraries
export SYSTEL=$HOMETEL/optionals

### MPI -----------------------------------------------------------
export MPIHOME=/usr/bin/mpifort.openmpi
export PATH=/usr/lib/x86_64-linux-gnu/openmpi:$PATH
export LD_LIBRARY_PATH=$PATH/lib:$LD_LIBRARY_PATH
###
### EXTERNAL LIBRARIES -----------------------------------------------------------
###
### HDF5 -----------------------------------------------------------
export HDF5HOME=$SYSTEL/hdf5
export LD_LIBRARY_PATH=$HDF5HOME/lib:$LD_LIBRARY_PATH
export LD_RUN_PATH=$HDF5HOME/lib:$MEDHOME/lib:$LD_RUN_PATH
### MED  -----------------------------------------------------------
export MEDHOME=$SYSTEL/med-4.0.0
export LD_LIBRARY_PATH=$MEDHOME/lib:$LD_LIBRARY_PATH
export PATH=$MEDHOME/bin:$PATH
### MUMPS -------------------------------------------------------------
#export MUMPSHOME=$SYSTEL/LIBRARY/mumps/gnu
#export SCALAPACKHOME=$SYSTEL/LIBRARY/scalapack/gnu
#export BLACSHOME=$SYSTEL/LIBRARY/blacs/gnu
### METIS -------------------------------------------------------------
export METISHOME=$SYSTEL/metis/build/
export LD_LIBRARY_PATH=$METISHOME/lib:$LD_LIBRARY_PATH
</pre></div>
</div>
<p><strong>Make sure do adapt the variable <code class="docutils literal notranslate"><span class="pre">HOMETEL=/home/USER-NAME/telemac/v8p4r0</span></code>.</strong></p>
<div class="note admonition">
<p class="admonition-title">AED2, MUMPS, and GOTM deactivated</p>
<p><a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_aed">AED2 (waqtel)</a>, <a class="reference external" href="http://mumps.enseeiht.fr/">MUMPS</a>, and <a class="reference external" href="http://wiki.opentelemac.org/doku.php?id=installation_linux_gotm">GOTM (general ocean)</a> are deactivated in our template. To activate them, uncomment (i.e., remove <code class="docutils literal notranslate"><span class="pre">#</span></code>) before the MUMPS variables, add AED2 and GOTM variables, and use the <code class="docutils literal notranslate"><span class="pre">systel.edf.cfg</span></code> configuration file.</p>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-9">
Custom Bash File</label><div class="sd-tab-content docutils">
<p>Here, we use the template to create our own Python source file called <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> tailored for compiling the parallel version of TELEMAC on Debian Linux with the <em>Open MPI</em> library. The Python source file starts with the definition of the following variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HOMETEL</span></code>: The path to the <code class="docutils literal notranslate"><span class="pre">telemac/VERSION</span></code> folder (<code class="docutils literal notranslate"><span class="pre">&lt;root&gt;</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYSTELCFG</span></code>: The path to the above-modified configuration file  (<code class="docutils literal notranslate"><span class="pre">systel.edfHy.cfg</span></code>) relative to <code class="docutils literal notranslate"><span class="pre">HOMETEL</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">USETELCFG</span></code>: The name of the configuration to be used (<code class="docutils literal notranslate"><span class="pre">debgfopenmpi</span></code>). Configurations enabled are defined in the <code class="docutils literal notranslate"><span class="pre">systel.*.cfg</span></code> file, in the brackets (<code class="docutils literal notranslate"><span class="pre">[debgfopenmpi]</span></code>) directly below the header of every configuration section.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SOURCEFILE</span></code>: The path to this file and its name relative to <code class="docutils literal notranslate"><span class="pre">HOMETEL</span></code>.</p></li>
</ul>
<p>More definitions are required to define TELEMAC’s <em>Application Programming Interface</em> (<em>API</em>), (parallel) compilers to build TELEMAC with <em>Open MPI</em>, and external libraries located in the <code class="docutils literal notranslate"><span class="pre">optionals</span></code> folder. The following code block shows how the Python source file <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> should look like. Make sure to <strong>verify every directory on your local file system</strong>, use your <em>USERNAME</em>, and take your time to get all directories right, without typos (critical task).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>### TELEMAC settings -----------------------------------------------
###
# Path to Telemac s root dir
export HOMETEL=/home/USERNAME/telemac-mascaret
# Add Python scripts to PATH
export PATH=$HOMETEL/scripts/python3:.:$PATH
# Configuration file
export SYSTELCFG=$HOMETEL/configs/systel.edfHy.cfg
# Name of the configuration to use
export USETELCFG=debgfopenmpi
# Path to this Python source file
export SOURCEFILE=$HOMETEL/configs/pysource.openmpi.sh
# Force python to flush its output
export PYTHONUNBUFFERED=&#39;true&#39;
### API
export PYTHONPATH=$HOMETEL/scripts/python3:$PYTHONPATH
export LD_LIBRARY_PATH=$HOMETEL/builds/$USETELCFG/wrap_api/lib:$LD_LIBRARY_PATH
export PYTHONPATH=$HOMETEL/builds/$USETELCFG/wrap_api/lib:$PYTHONPATH
###
### COMPILERS -----------------------------------------------------
export SYSTEL=$HOMETEL/optionals
### MPI -----------------------------------------------------------
export MPIHOME=/usr/bin/mpifort.mpich
export PATH=lib/x86_64-linux-gnu/openmpi:$PATH
export LD_LIBRARY_PATH=$PATH/lib:$LD_LIBRARY_PATH
###
### EXTERNAL LIBRARIES ---------------------------------------------
### HDF5 -----------------------------------------------------------
export HDF5HOME=$SYSTEL/hdf5
export LD_LIBRARY_PATH=$HDF5HOME/lib:$LD_LIBRARY_PATH
export LD_RUN_PATH=$HDF5HOME/lib:$MEDHOME/lib:$LD_RUN_PATH
### MED  -----------------------------------------------------------
export MEDHOME=$SYSTEL/med-4.0.0
export LD_LIBRARY_PATH=$MEDHOME/lib:$LD_LIBRARY_PATH
export PATH=$MEDHOME/bin:$PATH
### METIS ----------------------------------------------------------
export METISHOME=$SYSTEL/metis/build/
export LD_LIBRARY_PATH=$METISHOME/lib:$LD_LIBRARY_PATH
### AED ------------------------------------------------------------
export AEDHOME=$SYSTEL/aed2
export LD_LIBRARY_PATH=$AEDHOME/obj:$LD_LIBRARY_PATH
</pre></div>
</div>
</div>
</div>
</section>
<section id="compile">
<h3>Compile<a class="headerlink" href="#compile" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 20-30 minutes (compiling takes time).</strong></em></p>
<p>The compiler is called through Python and the above-created bash script ( <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> or <code class="docutils literal notranslate"><span class="pre">pysource.openmpi.sh</span></code>). Thus, the Python source file <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> knows where helper programs and libraries are located, and it knows the configuration to be used. With the Python source file, compiling TELEMAC becomes an easy task in Terminal. First, load the Python source file <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> as source in Terminal, and then, test if it is correctly configured by running <code class="docutils literal notranslate"><span class="pre">config.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">configs</span>
<span class="n">source</span> <span class="n">pysource</span><span class="o">.</span><span class="n">gfortranHPC</span><span class="o">.</span><span class="n">sh</span>
<span class="n">config</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">config.py</span></code> should produce a character-based image in Terminal and end with <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">done</span></code>. If that is not the case and error messages occur, <em>attentively read the error messages</em> to identify the issue (e.g., there might be a typo in a directory or file name, or a misplaced character somewhere in <code class="docutils literal notranslate"><span class="pre">pysource.gfortranHPC.sh</span></code> or <code class="docutils literal notranslate"><span class="pre">systel.edfHy.cfg</span></code>).
When <code class="docutils literal notranslate"><span class="pre">config.py</span></code> ran successfully, start compiling TELEMAC with the <code class="docutils literal notranslate"><span class="pre">--clean</span></code> flag to avoid any interference with earlier installations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compile_telemac</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">clean</span>
</pre></div>
</div>
<p>The compilation should run for a while (can take more than 30 minutes) and successfully end with the phrase <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">done</span></code>.</p>
<div class="attention admonition">
<p class="admonition-title">Troubleshoot errors in the compiling process</p>
<p>If an error occurred in the compiling process, traceback error messages and identify the component that did not work. Revise setting up the concerned component in this workflow very thoroughly. Do not try to re-invent the wheel - the most likely problem is a tiny little detail in the files that you created on your own. Troubleshooting may be a tough task, in particular, because you need to put into question your own work.</p>
</div>
</section>
<section id="test-telemac">
<span id="testrun"></span><h3>Test TELEMAC<a class="headerlink" href="#test-telemac" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 5-10 minutes.</strong></em></p>
<p>Once Terminal was closed or any clean system start-up requires to load the TELEMAC source environment in Terminal before running TELEMAC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">configs</span>
<span class="n">source</span> <span class="n">pysource</span><span class="o">.</span><span class="n">gfortranHPC</span><span class="o">.</span><span class="n">sh</span>
<span class="n">config</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>To run and test if TELEMAC works, use a pre-defined case from the provided <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">telemac2d</span><span class="o">/</span><span class="n">gouttedo</span>
<span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">t2d_gouttedo</span><span class="o">.</span><span class="n">cas</span>
</pre></div>
</div>
<div class="error dropdown admonition">
<p class="admonition-title">Examples are not working?</p>
<p>If running any test case provided in the <code class="docutils literal notranslate"><span class="pre">/examples/</span></code> folder crashes, <strong>worry not!</strong>. Your installation is most likely OK if the installation finished without errors and the <code class="docutils literal notranslate"><span class="pre">config.py</span></code> runs smoothly. However, for being able to run the examples, you will need to install <a class="reference internal" href="#tm-git-requirements"><span class="std std-ref">all git requirements (cf. above descriptions)</span></a>, re-download the TELEMAC git repository, and re-compile TELEMAC (basically: start over, beginning with the <a class="reference internal" href="#tm-git-requirements"><span class="std std-ref">git section</span></a>).</p>
</div>
<p>To test if parallelism works, install <em>htop</em> to visualize CPU usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">htop</span>
</pre></div>
</div>
<p>Start htop’s CPU monitor with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">htop</span>
</pre></div>
</div>
<p>In a new Terminal tab run the above TELEMAC example with the flag <code class="docutils literal notranslate"><span class="pre">--ncsize=N</span></code> (NCSIZE), where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the number of processors (CPUs) to use for parallel computation (make sure that <code class="docutils literal notranslate"><span class="pre">N</span></code> CPUs are also available on your machine):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">telemac2d</span><span class="o">/</span><span class="n">gouttedo</span>
<span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">t2d_gouttedo</span><span class="o">.</span><span class="n">cas</span> <span class="o">--</span><span class="n">ncsize</span><span class="o">=</span><span class="mi">4</span>
</pre></div>
</div>
<p>Alternatively, the <code class="docutils literal notranslate"><span class="pre">--nctile</span></code> and <code class="docutils literal notranslate"><span class="pre">--ncnode</span></code> flags can be used to define a number of core per node (NCTILE) and a number of nodes (NCNODE), respectively. The relationship between these flags is <code class="docutils literal notranslate"><span class="pre">NCSIZE</span> <span class="pre">=</span> <span class="pre">NCTILE</span> <span class="pre">*</span> <span class="pre">NCNODE</span></code>. Thus, the following two lines yield the same result (run in <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/telemac/examples/telemac2d/donau</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">t2d_donau</span><span class="o">.</span><span class="n">cas</span> <span class="o">--</span><span class="n">nctile</span><span class="o">=</span><span class="mi">4</span> <span class="o">--</span><span class="n">ncnode</span><span class="o">=</span><span class="mi">2</span>
<span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">t2d_donau</span><span class="o">.</span><span class="n">cas</span> <span class="o">--</span><span class="n">ncsize</span><span class="o">=</span><span class="mi">8</span>
</pre></div>
</div>
<div class="error dropdown admonition">
<p class="admonition-title">Cannot find &lt;&lt;PARTEL.PAR&gt;&gt;?</p>
<p>If there is an error message such as <strong><code class="docutils literal notranslate"><span class="pre">Cannot</span> <span class="pre">find</span> <span class="pre">&lt;&lt;</span> <span class="pre">PARTEL.PAR</span> <span class="pre">&gt;&gt;</span></code></strong> … <strong><code class="docutils literal notranslate"><span class="pre">TypeError:</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">concatenate</span> <span class="pre">str</span> <span class="pre">(not</span> <span class="pre">...)</span> <span class="pre">to</span> <span class="pre">str</span></code></strong>, make sure that <code class="docutils literal notranslate"><span class="pre">par_cmdexec</span></code> is removed from the configuration file (<a class="reference internal" href="#parcmd"><span class="std std-ref">see above</span></a>).</p>
</div>
<p>When the computation is running, observe the CPU charge. If the CPUs are all working with different percentages, the parallel version is working well.</p>
<p>TELEMAC should startup, run the example case, and again end with the phrase <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">done</span></code>. To assess the efficiency of the number of CPUs used, vary <code class="docutils literal notranslate"><span class="pre">ncsize</span></code>. For instance, the <em>donau</em> example (<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/telemac/examples/telemac2d/donau</span></code>) ran with <code class="docutils literal notranslate"><span class="pre">telemac2d.py</span> <span class="pre">t2d_donau.cas</span> <span class="pre">--ncsize=4</span></code> may take approximately 1.5 minutes, while <code class="docutils literal notranslate"><span class="pre">telemac2d.py</span> <span class="pre">t2d_donau.cas</span> <span class="pre">--ncsize=2</span></code> (i.e., half the number of CPUs) takes approximately 2.5 minutes. The computing time may differ depending on your hardware, but note that doubling the number of CPUs does not cut the calculation time by a factor of two. So to optimize system resources, it can be reasonable to start several simulation cases on fewer cores than one simulation on multiple cores.</p>
<div class="attention dropdown admonition">
<p class="admonition-title">Troubleshoot <em>No such file or directory</em></p>
<p>If you interrupted the Terminal session and get an error message such as <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>, you may need to re-define (re-load) the Python source file: In Terminal go (<code class="docutils literal notranslate"><span class="pre">cd</span></code>) to <code class="docutils literal notranslate"><span class="pre">~/telemac/configs</span></code>, type <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">pysource.gfortranHPC.sh</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">config.py</span></code>, and then go back to the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder to re-run the example.</p>
</div>
</section>
<section id="generate-telemac-docs">
<h3>Generate Telemac Docs<a class="headerlink" href="#generate-telemac-docs" title="Permalink to this headline">#</a></h3>
<p>TELEMAC comes with many application examples in the subdirectory <code class="docutils literal notranslate"><span class="pre">~/telemac/examples/</span></code> and the documentation plus reference manuals can be generated locally. To this end, make sure to source the TELEMAC environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">configs</span><span class="o">/</span><span class="n">pysource</span><span class="o">.</span><span class="n">gfortranHPC</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>To generate the user manual type (takes a while):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doc_telemac</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>To generate the reference manual type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">doc_telemac</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">reference</span>
</pre></div>
</div>
<p>To create the documentation of all example causes use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">validate_telemac</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">validate_telemac.py</span></code> essentially runs through all examples, but some of them are broken and will cause the script to crash. This may also happen if not all modules are installed (e.g., <em>Hermes</em> is missing).</p>
</div>
</section>
</section>
<section id="utilities-pre-post-processing">
<h2>Utilities (Pre- &amp; Post-processing)<a class="headerlink" href="#utilities-pre-post-processing" title="Permalink to this headline">#</a></h2>
<div class="note admonition">
<p class="admonition-title">More Pre- and Post-processing Software</p>
<p>More software for dealing with Telemac pre- and post-processing is available in the form of <a class="reference internal" href="install-openfoam.html#salome-install"><span class="std std-ref">SALOME</span></a> and ParaView.</p>
</div>
<section id="qgis-linux-and-windows">
<span id="qgis-telemac"></span><h3>QGIS (Linux and Windows)<a class="headerlink" href="#qgis-linux-and-windows" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 5-10 minutes (depends on connection speed).</strong></em></p>
<p>QGIS is a powerful tool for viewing, creating, and editing geospatial data that can be useful in pre- and post-processing. Detailed installation guidelines are provided in the <a class="reference internal" href="geo.html#qgis-install"><span class="std std-ref">QGIS</span></a> installation instructions and the <a class="reference internal" href="../geopy/use-qgis.html#qgis-tutorial"><span class="std std-ref">QGIS tutorial</span></a>in this eBook. For working with TELEMAC, consider installing the following <strong>QGIS Plugins</strong> (<em>Plugins</em> &gt; <em>Manage and Install Plugins…</em>):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://plugins.qgis.org/plugins/telemac_tools/">Telemac Tools</a> is an experimental mesh generator plugin for <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> files developed by <em>Artelia</em>. Make sure to check the <strong>experimental plugins</strong> box in the <strong>Settings</strong> of QGIS’ plugins window.</p></li>
<li><p><a class="reference internal" href="../numerics/pre-qgis-bm.html#get-basemesh"><span class="std std-ref">BASEmesh</span></a> enables to create a <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> file that can be converted to a selafin geometry for TELEMAC (read more in the <a class="reference internal" href="../numerics/pre-slf-tm.html#tm-qgis-prepro"><span class="std std-ref">QGIS pre-processing tutorial for TELEMAC</span></a>).</p></li>
<li><p><em>PostTelemac</em> visualizes <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> (and others such as <code class="docutils literal notranslate"><span class="pre">*.res</span></code>) geometry files at different time steps.</p></li>
<li><p><em>DEMto3D</em> enables to export <em>STL</em> geometry files for working with <em>SALOME</em> and creating 3D meshes.</p></li>
</ul>
<p>Note that <em>DEMto3D</em> will be available in the <em>Raster</em> menu: <em>DEMto3D</em> &gt; <em>DEM 3D printing</em>.</p>
</section>
<section id="bluekenue-windows-or-linux-wine">
<span id="bluekenue"></span><h3>BlueKenue (Windows or Linux+Wine)<a class="headerlink" href="#bluekenue-windows-or-linux-wine" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 10 minutes.</strong></em></p>
<p><a class="reference external" href="https://nrc.canada.ca/en/research-development/products-services/software-applications/blue-kenuetm-software-tool-hydraulic-modellers">BlueKenue</a><sup>TM</sup> is a pre- and post-processing software provided by the <a class="reference external" href="https://nrc.canada.ca/en">National Research Council Canada</a>, which is compatible with TELEMAC. It provides similar functions as the <a class="reference external" href="http://www.opentelemac.org/index.php/latest-news-development-and-distribution/240-fudaa-mascaret-3-6">Fudaa</a> software featured by the TELEMAC developers and additionally comes with a powerful mesh generator. It is particularly for the mesh generator that you want to install BlueKenue<sup>TM</sup> after <a class="reference external" href="https://chyms.nrc.gc.ca/download_public/KenueClub/BlueKenue/Installer/BlueKenue_3.12.0-alpha+20201006_64bit.msi">downloading the latest version</a> (login details in the <a class="reference external" href="http://www.opentelemac.org/index.php/assistance/forum5/blue-kenue">Telemac Forum</a>). Next, there are two options for installing BlueKenue<sup>TM</sup> depending on your platform:</p>
<ol class="arabic simple">
<li><p>On Windows: directly use the BLueKenue (<code class="docutils literal notranslate"><span class="pre">.msi</span></code>) installer.</p></li>
<li><p>On Linux: use <a class="reference external" href="https://wiki.debian.org/Wine">Wine amd64</a> through <a class="reference internal" href="vm.html#play-on-linux"><span class="std std-ref">PlayOneLinux</span></a> to install BlueKenue<sup>TM</sup> on <em>Linux</em>. For Ubuntu (Debian) - based Linux, the <a class="reference internal" href="vm.html#play-on-linux"><span class="std std-ref">PlayOnLinux</span></a> section in this eBook provides detailed instructions. Direct installation of BlueKenue through Wine only is discouraged because of severe compatibility issues.</p></li>
</ol>
<p>Note the typical installation directories of BlueKenue<sup>TM</sup> executable are:</p>
<ul class="simple">
<li><p>32-bit version is typically installed in <code class="docutils literal notranslate"><span class="pre">&quot;C:\\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\\CHC\\BlueKenue\\BlueKenue.exe&quot;</span></code></p></li>
<li><p>64-bit version is typically installed in <code class="docutils literal notranslate"><span class="pre">&quot;C:\\Program</span> <span class="pre">Files\\CHC\\BlueKenue\\BlueKenue.exe&quot;</span></code></p></li>
</ul>
<p>Additionally, the Canadian Hydrological Model Stewardship (CHyMS) provides more guidance for installing BlueKenue<sup>TM</sup> on other platforms than <em>Windows</em> on their <a class="reference external" href="https://chyms.nrc.gc.ca/docs/FAQ.html">FAQ</a> page in the troubleshooting section (<a class="reference external" href="https://chyms.nrc.gc.ca/docs/FAQ.html#troubleshooting-how-run-on-another-os">direct link to <em>how to run Blue Kenue on another operating system</em></a>).</p>
</section>
<section id="fudaa-prepro-linux-and-windows">
<span id="fudaa"></span><h3>Fudaa-PrePro (Linux and Windows)<a class="headerlink" href="#fudaa-prepro-linux-and-windows" title="Permalink to this headline">#</a></h3>
<p><em><strong>Estimated duration: 5-15 minutes (upper time limit if java needs to be installed).</strong></em></p>
<p>Get ready with the pre- and post-processing software Fudaa-PrePro:</p>
<ul class="simple">
<li><p>Install <em>java</em>:</p>
<ul>
<li><p>On Linux: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">default-jdk</span></code></p></li>
<li><p>On Windows: Get java from <a class="reference external" href="https://java.com/">java.com</a></p></li>
</ul>
</li>
<li><p>Download the latest version from the <a class="reference external" href="https://fudaa-project.atlassian.net/wiki/spaces/PREPRO/pages/237993985/Fudaa-Prepro+Downloads">Fudaa-PrePro repository</a></p></li>
<li><p>Un-zip the downloaded file an proceed depending on what platform you are working with (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span></code> to the directory where you un-zipped the Fudaa-PrePro program files</p></li>
<li><p>Start Fudaa-PrePro from Terminal or <em>Prompt</em></p>
<ul>
<li><p>On <em>Linux</em>: tap <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">supervisor.sh</span></code></p></li>
<li><p>On <em>Windows</em>: tap <code class="docutils literal notranslate"><span class="pre">supervisor.bat</span></code></p></li>
</ul>
</li>
</ul>
<p>There might be an error message such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span><span class="p">:</span> <span class="n">Could</span> <span class="ow">not</span> <span class="n">find</span> <span class="ow">or</span> <span class="n">load</span> <span class="n">main</span> <span class="k">class</span> <span class="nc">org</span><span class="o">.</span><span class="n">fudaa</span><span class="o">.</span><span class="n">fudaa</span><span class="o">.</span><span class="n">tr</span><span class="o">.</span><span class="n">TrSupervisor</span>
</pre></div>
</div>
<p>In this case, open <em><a class="reference external" href="http://supervisor.sh">supervisor.sh</a></em> in a text editor and correct <code class="docutils literal notranslate"><span class="pre">$PWD</span> <span class="pre">Fudaa</span></code> to <code class="docutils literal notranslate"><span class="pre">$(pwd)/Fudaa</span></code>. In addition, you can edit the default random-access memory (RAM) allocation in the <em><a class="reference external" href="http://supervisor.sh">supervisor.sh</a></em> (or<em>bat</em>) file. Fudaa-PrePro starts with a default RAM allocation of 6 GB, which might be too small for grid files with more than 3·10<sup>6</sup> nodes, or too large if your system’s RAM is small. To adapt the RAM allocation and7or fix the above error message, right-click on <em><a class="reference external" href="http://supervisor.sh">supervisor.sh</a></em> (or on <em>Windows</em>: <em>supervisor.bat</em>), and find the tag <code class="docutils literal notranslate"><span class="pre">-Xmx6144m</span></code>, where <code class="docutils literal notranslate"><span class="pre">6144</span></code> defines the RAM allocation. Modify this values an even-number multiple of 512. For example, set it to 4·512=2048 and correct <code class="docutils literal notranslate"><span class="pre">$PWD</span> <span class="pre">Fudaa</span></code> to <code class="docutils literal notranslate"><span class="pre">$(pwd)/Fudaa</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
cd `dirname $0`
java -Xmx2048m -Xms512m -cp &quot;$(pwd)/Fudaa-Prepro-1.4.2-SNAPSHOT.jar&quot;
org.fudaa.fudaa.tr.TrSupervisor $1 $2 $3 $4 $5 $6 $7 $8 $9
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hydro-informatics/jupyter-python-course",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./get-started"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="install-openfoam.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">OpenFOAM (Installation)</p>
      </div>
    </a>
    <a class="right-next"
       href="others.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Other Software Resources</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preface">Preface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-requirements">Basic Requirements</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python3">Python3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#git">GIT</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gnu-fortran-95-compiler-gfortran">GNU Fortran 95 Compiler (gfortran)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-compilers-and-essentials">More Compilers and Essentials</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-telemac-repo">Get the TELEMAC Repo</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optional-requirements-parallelism-and-others">Optional Requirements (Parallelism and Others)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parallelism-install-mpi">Parallelism: Install MPI</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parallelism-install-metis">Parallelism: Install Metis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hdf5-and-med-format-handlers">Hdf5 and MED Format Handlers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aed2">AED2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compile-telemac">Compile TELEMAC</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adapt-and-verify-configuration-file-systel-x-cfg">Adapt and Verify Configuration File (systel.x.cfg)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-python-source-file">Setup Python Source File</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compile">Compile</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-telemac">Test TELEMAC</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-telemac-docs">Generate Telemac Docs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities-pre-post-processing">Utilities (Pre- &amp; Post-processing)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#qgis-linux-and-windows">QGIS (Linux and Windows)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bluekenue-windows-or-linux-wine">BlueKenue (Windows or Linux+Wine)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fudaa-prepro-linux-and-windows">Fudaa-PrePro (Linux and Windows)</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Sebastian Schwindt, Beatriz Negreiros, Federica Scolari, Ricardo Barros
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
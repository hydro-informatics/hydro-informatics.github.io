
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Steady 2d Simulation &#8212; Hydro-Informatics</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="canonical" href="https://hydro-informatics.com/numerics/telemac2d-steady.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Unsteady 2d Simulation" href="telemac2d-unsteady.html" />
    <link rel="prev" title="Telemac2d" href="telemac2d.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      <img src="../_static/icon.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Hydro-Informatics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Get Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../lectures/classroom.html">
   The Virtual Classroom
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../lectures/lectures.html">
     Lectures and Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../lectures/take_seat.html">
     Take a Seat
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../get-started/software.html">
   Software Resources
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/vm.html">
     Virtual Machines and Linux
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/ide.html">
     Integrated Development Environments (IDEs)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python-basics/pyinstall.html">
     Install Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/git.html">
     Introduction to git
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/geo.html">
     Geospatial Software
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/install-openfoam.html">
     OpenFOAM (Installation)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/install-telemac.html">
     TELEMAC (Installation)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get-started/others.html">
     Other Software Resources
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Python Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python-basics/python.html">
   First Steps
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pybase.html">
     Hello Data Types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pyerror.html">
     Errors, Logging, and Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pyloop.html">
     Loops and Conditional Statements
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python-basics/modularize.html">
   Object Orientation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pyfun.html">
     Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pypckg.html">
     Packages, Modules and Libraries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/classes.html">
     Object Orientation and Classes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python-basics/data-handling.html">
   Data and File Handling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pynum.html">
     Load and Write Basic Data Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/xml.html">
     Workbooks (xlsx) and JSON
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/pyplot.html">
     Plotting
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../jupyter/pystyle.html">
   Code Style and Conventions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../jupyter/gui.html">
   Graphical User Interfaces (GUIs)
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../exercises/python-exercises.html">
   Python Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-ms.html">
     1d Hydraulics (Manning-Strickler Formula)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-sp.html">
     Reservoir Volume (Sequent Peak Algorithm)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-floods.html">
     Flood Return Periods
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-sediment.html">
     1d Sediment Transport
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-gui.html">
     Create a GUI
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Geospatial Analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../geopy/geospatial-data.html">
   Geospatial Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../geopy/use-qgis.html">
   QGIS Tutorial
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../geopy/geo-python.html">
   Geospatial Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../geopy/geo-pckg.html">
     Geospatial Open Source Python Libraries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/geo-shp.html">
     Shapefile (Vector Dataset) Handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/geo-raster.html">
     Raster (Gridded) Dataset Handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/geo-convert.html">
     Raster to Vector Conversion and Vice Versa
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter/geo-arcpy.html">
     The Commercial arcpy Library
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../exercises/geo-exercises.html">
   Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-geco.html">
     Script a Habitat Suitability Map
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Numerical Modeling
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="numerical-modeling.html">
   Principles
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="basement.html">
   BASEMENT
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pre-qgis-bm.html">
     Pre-processing with QGIS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="basement2d.html">
     Simulation Setup (Steady 2d)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="telemac.html">
   TELEMAC
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="pre-slf-tm.html">
     Pre-processing
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="telemac2d.html">
     Telemac2d
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Steady 2d Simulation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="telemac2d-unsteady.html">
       Unsteady 2d Simulation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="telemac-gaia.html">
       Unsteady Hydro-Morphodynamic 2d Simulation (Gaia)
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="telemac3d.html">
     Telemac3d
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="telemac3d-slf.html">
       Telemac3d (SLF)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="telemac3d-med.html">
       Telemac3d (Salome-Hydro and MED)
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="openfoam.html">
   OpenFOAM
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="pre-qgis-of.html">
     Pre-processing with QGIS
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="calibration.html">
   Calibration and Validation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../documentation/documentation.html">
   Markdown and Code Documentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../documentation/glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../documentation/notation.html">
   Notation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../documentation/bibliography.html">
   References
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../exercises/docs-exercises.html">
   Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises/ex-git.html">
     Git and markdown
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Troubleshoot
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../troubleshoot/dbg-programming.html">
   Programming Tools and IDEs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-anaconda.html">
     Debugging Anaconda
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-python.html">
     Debugging Python Code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-jupyter.html">
     Debugging Jupyter
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../troubleshoot/dbg-numerical-models.html">
   Numerical Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-basement.html">
     Debugging BASEMENT
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-telemac.html">
     Debugging TELEMAC/SALOME
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../troubleshoot/dbg-os.html">
   Operating Systems (Linux and VMs)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-linux.html">
     Debugging Debian Linux
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../troubleshoot/dbg-vm.html">
     Debugging Virtual Machines
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Disclaimer and License
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../terms/license.html">
   License
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../terms/disclaimer.html">
   Disclaimer
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Written by <a href="https://sebastian-schwindt.org">Sebastian Schwindt</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/numerics/telemac2d-steady.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/hydro-informatics/hydro-informatics.github.io"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Steady 2d Simulation
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-started">
     Get Started
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#steering-file-cas">
     Steering File (CAS)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#overview-of-the-cas-file">
       Overview of the CAS File
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#general-parameters">
       General Parameters
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#general-numerical-parameters">
       General Numerical Parameters
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#numerical-parameters-for-finite-elements">
       Numerical Parameters for Finite Elements
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#numerical-parameters-for-finite-volumes">
       Numerical Parameters for Finite Volumes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#numerical-solver-parameters">
       Numerical Solver Parameters
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#numerical-accuracy">
       Numerical Accuracy
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tidal-flats">
       Tidal Flats
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#matrix-handling">
       Matrix Handling
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#friction-boundary-conditions">
       Friction Boundary Conditions
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#liquid-boundary-and-initial-conditions">
       Liquid Boundary and Initial Conditions
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#turbulence">
       Turbulence
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#run-telemac2d">
     Run Telemac2d
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#load-environment-and-files">
       Load environment and files
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#post-processing">
   Post-processing
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#verify-discharge-convergence">
     Verify Discharge Convergence
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="steady-2d-simulation">
<span id="telemac2d-steady"></span><h1>Steady 2d Simulation<a class="headerlink" href="#steady-2d-simulation" title="Permalink to this headline">¶</a></h1>
<div class="admonition-requirements admonition">
<p class="admonition-title">Requirements</p>
<p>This tutorial is designed for <strong>advanced beginners</strong> and before diving into this tutorial make sure to do the <a class="reference internal" href="pre-slf-tm.html#slf-prepro-tm"><span class="std std-ref">TELEMAC pre-processing tutorial</span></a>.</p>
<p>The case featured in this tutorial was established with the following software:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../get-started/others.html#npp"><span class="std std-ref">Notepad++</span></a> text editor (any other text editor will do just as well.)</p></li>
<li><p>TELEMAC v8p2r0 (<a class="reference internal" href="../get-started/install-telemac.html#modular-install"><span class="std std-ref">stand-alone installation</span></a>).</p></li>
<li><p><a class="reference internal" href="../get-started/geo.html#qgis-install"><span class="std std-ref">QGIS</span></a> and the <a class="reference internal" href="pre-slf-tm.html#tm-qgis-plugins"><span class="std std-ref">PostTelemac plugin</span></a>.</p></li>
<li><p>Debian Linux 10 (Buster) installed on a Virtual Machine (read more in the <a class="reference internal" href="../get-started/vm.html#chpt-vm-linux"><span class="std std-ref">software chapter</span></a>).</p></li>
</ul>
</div>
<div class="section" id="get-started">
<h2>Get Started<a class="headerlink" href="#get-started" title="Permalink to this headline">¶</a></h2>
<p>This section builds on the SELAFIN (<code class="docutils literal notranslate"><span class="pre">*.slf</span></code>) and Conlim (<code class="docutils literal notranslate"><span class="pre">*.cli</span></code>) boundary condition files that result from the <a class="reference internal" href="pre-slf-tm.html#slf-prepro-tm"><span class="std std-ref">TELEMAC pre-processing tutorial</span></a>. Both files can also be downloaded from the supplemental materials repository of this eBook:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/qgismesh.slf">Download qgismesh.slf</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/boundaries.cli">Download boundaries.cli</a>.</p></li>
</ul>
<p>Consider saving both files in a new folder, such as <code class="docutils literal notranslate"><span class="pre">/steady2d-tutorial/</span></code> that will contain all model files.</p>
<div class="admonition-download-simulation-files admonition">
<p class="admonition-title">Download simulation files</p>
<p>All simulation files used in this tutorial are available at <a class="reference external" href="https://github.com/hydro-informatics/telemac/tree/main/steady2d-tutorial/">https://github.com/hydro-informatics/telemac/tree/main/steady2d-tutorial/</a>.</p>
</div>
</div>
<div class="section" id="steering-file-cas">
<h2>Steering File (CAS)<a class="headerlink" href="#steering-file-cas" title="Permalink to this headline">¶</a></h2>
<p>The steering file has the file ending <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> (presumably derived from the French word <em>cas</em>, which means <em>case</em> in English). The <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> file is the main simulation file with information about references to the two always mandatory files (i.e., the <a class="reference external" href="https://gdal.org/drivers/vector/selafin.html">SELAFIN / SERAFIN</a> <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> geometry and the <code class="docutils literal notranslate"><span class="pre">*.cli</span></code> boundary files) and optional files, as well as definitions of simulation parameters. The steering file can be created or edited with a basic text editor or advanced software such as <a class="reference internal" href="../get-started/install-telemac.html#fudaa"><span class="std std-ref">Fudaa PrePro</span></a> or <a class="reference internal" href="../get-started/install-telemac.html#bluekenue"><span class="std std-ref">Blue Kenue</span></a>. This tutorial uses <a class="reference internal" href="../get-started/others.html#npp"><span class="std std-ref">Notepad++</span></a> as a basic text editor to minimize the number of software involved.</p>
<div class="admonition-fudaa-prepro admonition">
<p class="admonition-title">Fudaa PrePro</p>
<p><em>Fudaa PrePro</em> comes with variable descriptions that facilitate the definition of boundaries, initial conditions, and numerical parameters in the steering file. However, Fudaa PrePro refers to the platform system to reference simulation files (<code class="docutils literal notranslate"><span class="pre">\</span></code> on Windows and <code class="docutils literal notranslate"><span class="pre">/</span></code> on Linux) and writes absolute file paths to the <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> file, which often require manual correction (e.g., if Fudaa PrePro is used for setting up a <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> file on Windows for running a TELEMAC simulation on Linux). For working with Fudaa PrePro, follow the download instructions in the <a class="reference internal" href="../get-started/install-telemac.html#fudaa"><span class="std std-ref">software chapter</span></a>. To launch Fudaa Prepro, open <em>Terminal</em> (Linux) or <em>Command Prompt</em> (Windows) and tap:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span></code> to the installation (download) directory of Fudaa PrePro</p></li>
<li><p>Start the GUI (requires java):</p>
<ul>
<li><p><em>Linux</em>: <code class="docutils literal notranslate"><span class="pre">sh</span> <span class="pre">supervisor.sh</span></code></p></li>
<li><p><em>Windows</em>: <code class="docutils literal notranslate"><span class="pre">supervisor.bat</span></code></p></li>
</ul>
</li>
</ul>
</div>
<p>For this tutorial, <strong>create a new text file</strong> in the same folder where <code class="docutils literal notranslate"><span class="pre">qgismesh.slf</span></code> and <code class="docutils literal notranslate"><span class="pre">boundaries.cli</span></code> live and name it, for instance, <code class="docutils literal notranslate"><span class="pre">steady2d.cas</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">/steady2d-tutorial/steady2d.cas</span></code>). The next sections guide through variable definitions that stem from the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>. The final steering file can be downloaded from the supplemental materials repository (<a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/steady2d-tutorial/steady2d.cas">download steady2d.cas</a>).</p>
<div class="section" id="overview-of-the-cas-file">
<h3>Overview of the CAS File<a class="headerlink" href="#overview-of-the-cas-file" title="Permalink to this headline">¶</a></h3>
<p>The below box shows the provided <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/steady2d-tutorial/steady2d.cas">steady2d.cas</a> file that can be used for running this tutorial.</p>
<div class="note dropdown admonition">
<p class="admonition-title">Expand to view the complete .CAS file</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="o">/---------------------------------------------------------------------</span>
<span class="o">/</span> <span class="n">TELEMAC2D</span> <span class="n">Version</span> <span class="n">v8p2</span>
<span class="o">/</span> <span class="n">STEADY</span> <span class="n">HYDRODYNAMICS</span> <span class="n">TRAINING</span>
<span class="o">/---------------------------------------------------------------------</span>

<span class="o">/</span> <span class="n">steady2d</span><span class="p">.</span><span class="n">cas</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>			<span class="n">COMPUTATION</span> <span class="n">ENVIRONMENT</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="n">TITLE</span> <span class="p">:</span> <span class="s1">&#39;2d steady flow&#39;</span>
<span class="o">/</span>
<span class="n">BOUNDARY</span> <span class="n">CONDITIONS</span> <span class="k">FILE</span> <span class="p">:</span> <span class="n">boundaries</span><span class="p">.</span><span class="n">cli</span>
<span class="n">GEOMETRY</span> <span class="k">FILE</span>            <span class="p">:</span> <span class="n">qgismesh</span><span class="p">.</span><span class="n">slf</span>
<span class="n">RESULTS</span> <span class="k">FILE</span>           <span class="p">:</span> <span class="n">r2dsteady</span><span class="p">.</span><span class="n">slf</span>
<span class="o">/</span>
<span class="n">VARIABLES</span> <span class="n">FOR</span> <span class="n">GRAPHIC</span> <span class="n">PRINTOUTS</span> <span class="p">:</span> <span class="n">U</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="n">Q</span><span class="p">,</span><span class="n">F</span>
<span class="o">/</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>			<span class="n">GENERAL</span> <span class="n">PARAMETERS</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="nb">TIME </span><span class="n">STEP</span> <span class="p">:</span> <span class="mf">1.</span>
<span class="n">NUMBER</span> <span class="n">OF</span> <span class="nb">TIME </span><span class="n">STEPS</span> <span class="p">:</span> <span class="mi">8000</span>
<span class="n">GRAPHIC</span> <span class="n">PRINTOUT</span> <span class="n">PERIOD</span> <span class="p">:</span> <span class="mi">100</span>
<span class="n">LISTING</span> <span class="n">PRINTOUT</span> <span class="n">PERIOD</span> <span class="p">:</span> <span class="mi">100</span>
<span class="o">/</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>			<span class="n">NUMERICAL</span> <span class="n">PARAMETERS</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">CONVECTION</span><span class="o">-</span><span class="n">DIFFUSION</span>
<span class="o">/------------------------------------------------------------------</span>
<span class="n">DISCRETIZATIONS</span> <span class="n">IN</span> <span class="n">SPACE</span> <span class="p">:</span> <span class="mi">11</span><span class="p">;</span><span class="mi">11</span>
<span class="k">TYPE </span><span class="n">OF</span> <span class="n">ADVECTION</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span><span class="mi">5</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">1</span>
<span class="n">ADVECTION</span> <span class="p">:</span> <span class="n">YES</span>
<span class="o">/</span>
<span class="n">SUPG</span> <span class="n">OPTION</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">2</span>  <span class="o">/</span> <span class="n">classic</span> <span class="n">supg</span> <span class="n">for</span> <span class="n">U</span> <span class="nb">and </span><span class="n">V</span>  <span class="n">see</span> <span class="n">docs</span> <span class="n">sec</span> <span class="mf">6.2</span><span class="p">.</span><span class="mi">2</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">PROPAGATION</span> <span class="n">HEIGHT</span> <span class="nb">AND </span><span class="n">STABILITY</span>
<span class="o">/</span> <span class="o">------------------------------------------------------------------</span>
<span class="n">IMPLICITATION</span> <span class="n">FOR</span> <span class="n">DEPTH</span> <span class="p">:</span> <span class="mf">0.55</span> <span class="o">/</span> <span class="n">should</span> <span class="n">be</span> <span class="n">between</span> <span class="mf">0.55</span> <span class="nb">and </span><span class="mf">0.6</span>
<span class="n">IMPLICITATION</span> <span class="n">FOR</span> <span class="n">VELOCITY</span> <span class="p">:</span> <span class="mf">0.55</span> <span class="o">/</span> <span class="n">should</span> <span class="n">be</span> <span class="n">between</span> <span class="mf">0.55</span> <span class="nb">and </span><span class="mf">0.6</span>
<span class="n">FREE</span> <span class="n">SURFACE</span> <span class="n">GRADIENT</span> <span class="n">COMPATIBILITY</span> <span class="p">:</span> <span class="mf">0.1</span>  <span class="o">/</span> <span class="n">default</span> <span class="mf">1.</span>
<span class="n">CONTINUITY</span> <span class="n">CORRECTION</span> <span class="p">:</span> <span class="n">YES</span>
<span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">THE</span> <span class="n">LINEAR</span> <span class="nb">SYSTEM</span> <span class="p">:</span> <span class="mi">2</span>
<span class="n">MASS</span><span class="o">-</span><span class="n">BALANCE</span> <span class="p">:</span> <span class="n">YES</span>
<span class="n">MASS</span><span class="o">-</span><span class="n">LUMPING</span> <span class="n">ON</span> <span class="n">H</span> <span class="p">:</span> <span class="mi">1</span>
<span class="o">/</span> <span class="n">MATRIX</span> <span class="n">STORAGE</span> <span class="p">:</span> <span class="mi">3</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">HYDRODYNAMIC</span> <span class="n">SOLVER</span>
<span class="o">/------------------------------------------------------------------</span>
<span class="n">INFORMATION</span> <span class="n">ABOUT</span> <span class="n">SOLVER</span> <span class="p">:</span> <span class="n">YES</span>
<span class="n">SOLVER</span> <span class="p">:</span> <span class="mi">1</span>
<span class="n">MAXIMUM</span> <span class="n">NUMBER</span> <span class="n">OF</span> <span class="n">ITERATIONS</span> <span class="n">FOR</span> <span class="n">SOLVER</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="n">YES</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">BOUNDARY</span> <span class="n">CONDITIONS</span>
<span class="o">/------------------------------------------------------------------</span>
<span class="n">LAW</span> <span class="n">OF</span> <span class="n">BOTTOM</span> <span class="n">FRICTION</span> <span class="p">:</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">4</span><span class="o">-</span><span class="n">Manning</span>
<span class="n">FRICTION</span> <span class="n">COEFFICIENT</span> <span class="p">:</span> <span class="mf">0.03</span> <span class="o">/</span> <span class="n">Roughness</span> <span class="n">coefficient</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">Liquid</span> <span class="n">boundaries</span>
<span class="n">PRESCRIBED</span> <span class="n">FLOWRATES</span>  <span class="p">:</span> <span class="mi">3</span><span class="mf">5.</span><span class="p">;</span><span class="mi">3</span><span class="mf">5.</span>
<span class="n">PRESCRIBED</span> <span class="n">ELEVATIONS</span> <span class="p">:</span> <span class="mf">0.</span><span class="p">;</span><span class="mi">37</span><span class="mf">1.33</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">INITIAL</span> <span class="n">CONDITIONS</span>
<span class="o">/</span> <span class="o">------------------------------------------------------------------</span>
<span class="n">INITIAL</span> <span class="n">CONDITIONS</span> <span class="p">:</span> <span class="s1">&#39;CONSTANT DEPTH&#39;</span>
<span class="n">INITIAL</span> <span class="n">DEPTH</span> <span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="kt">INTEGER </span><span class="n">for</span> <span class="n">speeding</span> <span class="n">up</span> <span class="n">calculations</span>
<span class="o">/</span>
<span class="o">/</span> <span class="k">Type </span><span class="n">of</span> <span class="n">velocity</span> <span class="n">profile</span> <span class="n">can</span> <span class="n">be</span> <span class="mi">1</span><span class="o">-</span><span class="n">constant</span> <span class="n">normal</span> <span class="n">profile</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span> <span class="mi">2</span><span class="o">-</span><span class="n">UBOR</span> <span class="nb">and </span><span class="n">VBOR</span> <span class="n">in</span> <span class="n">the</span> <span class="n">boundary</span> <span class="n">conditions</span> <span class="k">file</span> <span class="p">(</span><span class="n">cli</span><span class="p">)</span> <span class="mi">3</span><span class="o">-</span><span class="n">vector</span> <span class="n">in</span> <span class="n">UBOR</span> <span class="n">in</span> <span class="n">the</span> <span class="n">boundary</span> <span class="n">conditions</span> <span class="k">file</span> <span class="p">(</span><span class="n">cli</span><span class="p">)</span> <span class="mi">4</span><span class="o">-</span><span class="n">vector</span> <span class="k">is </span><span class="n">proportional</span> <span class="n">to</span> <span class="n">root</span> <span class="p">(</span><span class="n">water</span> <span class="n">depth</span><span class="p">,</span> <span class="k">only </span><span class="n">for</span> <span class="n">Q</span><span class="p">)</span> <span class="mi">5</span><span class="o">-</span><span class="n">vector</span> <span class="k">is </span><span class="n">proportional</span> <span class="n">to</span> <span class="n">root</span> <span class="p">(</span><span class="n">virtual</span> <span class="n">water</span> <span class="n">depth</span><span class="p">),</span> <span class="n">the</span> <span class="n">virtual</span> <span class="n">water</span> <span class="n">depth</span> <span class="k">is </span><span class="n">obtained</span> <span class="n">from</span> <span class="n">a</span> <span class="n">lower</span> <span class="n">point</span> <span class="n">at</span> <span class="n">the</span> <span class="n">boundary</span> <span class="n">condition</span> <span class="p">(</span><span class="k">only </span><span class="n">for</span> <span class="n">Q</span><span class="p">)</span>
<span class="n">VELOCITY</span> <span class="n">PROFILES</span> <span class="p">:</span> <span class="mi">4</span><span class="p">;</span><span class="mi">1</span>
<span class="o">/</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>			<span class="n">TURBULENCE</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>
<span class="n">TURBULENCE</span> <span class="n">MODEL</span> <span class="p">:</span> <span class="mi">1</span>

<span class="p">&amp;</span><span class="n">ETA</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">What means &amp;ETA?</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&amp;ETA</span></code> keyword at the bottom of the <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> template file makes TELEMAC printing out keyword and the values assigned to them when it runs its <em>Damocles</em> algorithm.</p>
</div>
</div>
</div>
<div class="section" id="general-parameters">
<h3>General Parameters<a class="headerlink" href="#general-parameters" title="Permalink to this headline">¶</a></h3>
<p>The general parameters define the computation environment starting with a simulation title and the most important links to the two mandatory input files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BOUNDARY</span> <span class="pre">CONDITIONS</span> <span class="pre">FILE</span></code> : <code class="docutils literal notranslate"><span class="pre">boundaries.cli</span></code> - with a <em>MED</em> file, use a <em>BND</em> boundary file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GEOMETRY</span> <span class="pre">FILE</span></code>: <code class="docutils literal notranslate"><span class="pre">qgismesh.slf</span></code></p></li>
</ul>
<p>The model <strong>output</strong> can be defined with the following keywords:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RESULTS</span> <span class="pre">FILE</span></code> : <code class="docutils literal notranslate"><span class="pre">r2dsteady.slf</span></code> - can be either a <em>MED</em> file or a <em>SLF</em> file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VARIABLES</span> <span class="pre">FOR</span> <span class="pre">GRAPHIC</span> <span class="pre">PRINTOUTS</span></code>:  <code class="docutils literal notranslate"><span class="pre">U,V,H,S,Q,F</span></code> - many more options can be found in section 1.317 (page 85) of the <a class="reference external" href="http://svn.opentelemac.org/svn/opentelemac/tags/v8p2r1/documentation/telemac2d/reference/telemac2d_reference_v8p2.pdf">Telemac2d reference manual</a>.</p></li>
</ul>
<p>The velocities (<code class="docutils literal notranslate"><span class="pre">U</span></code> and <code class="docutils literal notranslate"><span class="pre">V</span></code>), the water depth (<code class="docutils literal notranslate"><span class="pre">H</span></code>), and the discharge (<code class="docutils literal notranslate"><span class="pre">Q</span></code>) are standard variables that should be used in every simulation. In particular, the discharge (<code class="docutils literal notranslate"><span class="pre">Q</span></code>) is required to check when a (steady) flow converges at the inflow and outflow boundaries. Moreover, the discharge (<code class="docutils literal notranslate"><span class="pre">Q</span></code>) enables to trace fluxes along any user-defined line in the model. The procedure for verifying and identify discharges is described in the <a class="reference internal" href="#verify-steady-tm2d"><span class="std std-ref">discharge verification</span></a> section in the post-processing.</p>
<p>The time variables (<code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">STEP</span></code> and <code class="docutils literal notranslate"><span class="pre">NUMBER</span> <span class="pre">OF</span> <span class="pre">TIME</span> <span class="pre">STEPS</span></code>) define the simulation length and the printout periods (<code class="docutils literal notranslate"><span class="pre">GRAPHIC</span> <span class="pre">PRINTOUT</span> <span class="pre">PERIOD</span></code> and <code class="docutils literal notranslate"><span class="pre">LISTING</span> <span class="pre">PRINTOUT</span> <span class="pre">PERIOD</span></code>) define the result output frequency. The <strong>smaller the printout period</strong>, <strong>the longer will take the simulation</strong> because writing results is one of the most time consuming processes in numerical modeling. The printout periods (frequencies) refer to a multiple of the <code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">STEPS</span></code> parameter and need to be a smaller number than the <code class="docutils literal notranslate"><span class="pre">NUMBER</span> <span class="pre">OF</span> <span class="pre">TIME</span> <span class="pre">STEPS</span></code>. Read more about time step parameters in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> in the sections 5 and 12.4.2.</p>
<p>In addition, the <code class="docutils literal notranslate"><span class="pre">MASS-BALANCE</span> <span class="pre">:</span> <span class="pre">YES</span></code> setting will printout the mass fluxes and errors in the computation region, which is an important parameter for verifying the plausibility of the model. Note that this keyword only enables mass balance printouts and does not imply mass balance of the model, which must be achieved through a consistent model setup following this tutorial and the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</p>
<div class="note dropdown admonition">
<p class="admonition-title">Expand to recall GENERAL PARAMETERS in the cas file</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">steady2d</span><span class="p">.</span><span class="n">cas</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>			<span class="n">GENERAL</span> <span class="n">PARAMETERS</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="n">TITLE</span> <span class="p">:</span> <span class="s1">&#39;2d steady flow&#39;</span>
<span class="o">/</span>
<span class="n">BOUNDARY</span> <span class="n">CONDITIONS</span> <span class="k">FILE</span> <span class="p">:</span> <span class="n">boundaries</span><span class="p">.</span><span class="n">cli</span>
<span class="n">GEOMETRY</span> <span class="k">FILE</span> <span class="p">:</span> <span class="n">qgismesh</span><span class="p">.</span><span class="n">slf</span>
<span class="n">RESULTS</span> <span class="k">FILE</span> <span class="p">:</span> <span class="n">r2dsteady</span><span class="p">.</span><span class="n">slf</span>
<span class="o">/</span>
<span class="n">MASS</span><span class="o">-</span><span class="n">BALANCE</span> <span class="p">:</span> <span class="n">YES</span> <span class="o">/</span> <span class="n">activates</span> <span class="n">mass</span> <span class="n">balance</span> <span class="n">printouts</span> <span class="o">-</span> <span class="n">does</span> <span class="nb">not </span><span class="n">enforce</span> <span class="n">mass</span> <span class="n">balance</span>
<span class="n">VARIABLES</span> <span class="n">FOR</span> <span class="n">GRAPHIC</span> <span class="n">PRINTOUTS</span> <span class="p">:</span> <span class="n">U</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="n">Q</span><span class="p">,</span><span class="n">F</span> <span class="o">/</span> <span class="n">Q</span> <span class="n">enables</span> <span class="n">boundary</span> <span class="n">flux</span> <span class="n">equilibrium</span> <span class="n">controls</span>
<span class="o">/</span>
<span class="nb">TIME </span><span class="n">STEP</span> <span class="p">:</span> <span class="mf">1.</span>
<span class="n">NUMBER</span> <span class="n">OF</span> <span class="nb">TIME </span><span class="n">STEPS</span> <span class="p">:</span> <span class="mi">8000</span>
<span class="n">GRAPHIC</span> <span class="n">PRINTOUT</span> <span class="n">PERIOD</span> <span class="p">:</span> <span class="mi">100</span>
<span class="n">LISTING</span> <span class="n">PRINTOUT</span> <span class="n">PERIOD</span> <span class="p">:</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="general-numerical-parameters">
<span id="tm2d-numerical"></span><h3>General Numerical Parameters<a class="headerlink" href="#general-numerical-parameters" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 7.1 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>Telemac2d comes with three solvers for approximating the depth-averaged <a class="reference internal" href="../documentation/glossary.html#term-Navier-Stokes-Equation"><span class="xref std std-term">Navier-Stokes Equation</span></a> (shallow water) <span id="id1">[<a class="reference internal" href="../documentation/bibliography.html#id330">KC08</a>]</span> that can be chosen by adding an <strong>EQUATIONS</strong> keyword:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">EQUATIONS</span> <span class="pre">:</span> <span class="pre">SAINT-VENANT</span> <span class="pre">FE</span></code> is the <strong>default</strong> that make Telemac2d use a Saint-Venant finite element method,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EQUATIONS</span> <span class="pre">:</span> <span class="pre">SAINT-VENANT</span> <span class="pre">FV</span></code> makes Telemac2d use a Saint-Venant finite volume method, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EQUATIONS</span> <span class="pre">:</span> <span class="pre">BOUSSINESQ</span></code> makes Telemac2d use the <a class="reference internal" href="../documentation/glossary.html#term-Boussinesq"><span class="xref std std-term">Boussinesq</span></a> approximations (constant density except in the vertical momentum equation).</p></li>
</ul>
<p>In addition, a type of discretization has to be specified with the <strong>DISCRETIZATIONS IN SPACE</strong> keyword, which is a list of five integer values. The five list elements define spatial discretization scheme for (1) velocity, (2) depth, (3) tracers, (4) <span class="math notranslate nohighlight">\(k-\epsilon\)</span> turbulence, and (5) <span class="math notranslate nohighlight">\(\tilde{\nu}\)</span> advection (Spalart-Allmaras). The minimum length of the keyword list is 2 (for velocity and depth) and all other elements are optional. The list elements may take the following values defining spatial discretization:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">11</span></code> (default) activates triangular discretization in space (i.e., 3-node triangles),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">12</span></code> activates quasi-bubble discretization with 4-node triangles, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">13</span></code> activates quadratic discretization with 6-node triangles.</p></li>
</ul>
<p>The <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> recommend using the default value of <code class="docutils literal notranslate"><span class="pre">DISCRETIZATIONS</span> <span class="pre">IN</span> <span class="pre">SPACE</span> <span class="pre">:</span> <span class="pre">11;11</span></code> that assign a linear discretization for velocity and water depth (computationally fastest). The option <code class="docutils literal notranslate"><span class="pre">12;11</span></code> may be used to reduce free surface instabilities or oscillations (e.g., along with steep bathymetry gradients). The option <code class="docutils literal notranslate"><span class="pre">13;11</span></code> increase the accuracy of results, the computation time, memory usage, and it is currently not available in Telemac2d.</p>
<p>In addition, the <strong>FREE SURFACE GRADIENT</strong> keyword can be defined for increasing the stability of a model. Its default value is <code class="docutils literal notranslate"><span class="pre">1.0</span></code>, but it can be reduced close to zero to achieve stability. The developers propose a minimum value of <code class="docutils literal notranslate"><span class="pre">0.</span></code>, but this would lead to non-meaningful results and this is why this eBook recommends a value slightly higher than zero. For instance, the following keyword combination may reduce surface instabilities (also referred to as <em>wiggles</em> or <em>oscillations</em>):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">DISCRETIZATIONS</span> <span class="n">IN</span> <span class="n">SPACE</span> <span class="p">:</span> <span class="mi">12</span><span class="p">;</span><span class="mi">11</span>
<span class="n">FREE</span> <span class="n">SURFACE</span> <span class="n">GRADIENT</span> <span class="p">:</span> <span class="mf">0.03</span>
</pre></div>
</div>
<p>By default <a class="reference internal" href="../documentation/glossary.html#term-Advection"><span class="xref std std-term">Advection</span></a> is activated through the keyword <code class="docutils literal notranslate"><span class="pre">ADVECTION</span> <span class="pre">:</span> <span class="pre">YES</span></code> and it can be deactivated for particular terms only:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">H</span> <span class="p">:</span> <span class="n">NO</span> <span class="o">/</span> <span class="n">deactivates</span> <span class="n">depth</span> <span class="n">advection</span>
<span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">U</span> <span class="nb">AND </span><span class="n">V</span> <span class="p">:</span> <span class="n">NO</span> <span class="o">/</span> <span class="n">deactivates</span> <span class="n">velocity</span> <span class="n">advection</span>
<span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">K</span> <span class="nb">AND EPSILON</span> <span class="p">:</span> <span class="n">NO</span> <span class="o">/</span> <span class="n">deactivates</span> <span class="n">turbulent</span> <span class="n">energy</span> <span class="nb">and </span><span class="n">dissipation</span> <span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="n">e</span> <span class="n">model</span><span class="p">)</span> <span class="nb">or </span><span class="n">the</span> <span class="n">Spalart</span><span class="o">-</span><span class="n">Allmaras</span> <span class="n">advection</span>
<span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="n">NO</span> <span class="o">/</span> <span class="n">deactivates</span> <span class="n">tracer</span> <span class="n">advection</span>
</pre></div>
</div>
<p>The <strong>PROPAGATION</strong> keyword (default: <code class="docutils literal notranslate"><span class="pre">YES</span></code>) affects the modelling of propagation and related phenomena. For instance, disabling propagation (<code class="docutils literal notranslate"><span class="pre">PROPAGATION</span> <span class="pre">:</span> <span class="pre">NO</span></code>) will also disable <a class="reference internal" href="../documentation/glossary.html#term-Diffusion"><span class="xref std std-term">Diffusion</span></a>. The other way round, when propagation is enabled, <a class="reference internal" href="../documentation/glossary.html#term-Diffusion"><span class="xref std std-term">Diffusion</span></a> can be disabled separately. Read more about <a class="reference internal" href="../documentation/glossary.html#term-Diffusion"><span class="xref std std-term">Diffusion</span></a> in Telemac2d in the <a class="reference internal" href="#tm2d-turbulence"><span class="std std-ref">turbulence</span></a> section.</p>
</div>
<div class="section" id="numerical-parameters-for-finite-elements">
<span id="tm2d-fe"></span><h3>Numerical Parameters for Finite Elements<a class="headerlink" href="#numerical-parameters-for-finite-elements" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 7.2.1 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>Telemac2d uses finite elements for iterative solutions to the <a class="reference internal" href="../documentation/glossary.html#term-Navier-Stokes-Equation"><span class="xref std std-term">Navier-Stokes Equation</span></a>. To this end, a <strong>TREATMENT OF THE LINEAR SYSTEM</strong> keyword enables replacing the original set of equations (option <code class="docutils literal notranslate"><span class="pre">1</span></code>) involved in TELEMAC’s finite element solver with a generalized wave equation (option <code class="docutils literal notranslate"><span class="pre">2</span></code>). The replacement (i.e., the use of the <strong>generalized wave equation</strong>) is set to <strong>default since v8p2</strong> and decreases computation time, but smoothens the results. The default (<code class="docutils literal notranslate"><span class="pre">TREATMENT</span> <span class="pre">OF</span> <span class="pre">THE</span> <span class="pre">LINEAR</span> <span class="pre">SYSTEM</span> <span class="pre">:</span> <span class="pre">2</span></code>) automatically activates mass lumping for depth and velocity, and implies explicit velocity diffusion.</p>
<div class="note dropdown admonition">
<p class="admonition-title">Use SCHEME FOR ADVECTION in lieu of TYPE OF ADVECTION</p>
<p>The <strong>TYPE OF ADVECTION</strong> keyword is a list of four integers that define the advection schemes for (1) velocities (both <span class="math notranslate nohighlight">\(u\)</span> and <span class="math notranslate nohighlight">\(v\)</span>), (2) water depth <span class="math notranslate nohighlight">\(h\)</span>, (3) tracers, and (4) turbulence (<span class="math notranslate nohighlight">\(k-\epsilon\)</span> or <span class="math notranslate nohighlight">\(\tilde{\nu}\)</span>). The value provided for (2) depth is ignored since v6p0 and a list of two values is sufficient in the absence of (3) tracers and a specific (4) turbulence model. Thus, in lieu of <code class="docutils literal notranslate"><span class="pre">TYPE</span> <span class="pre">OF</span> <span class="pre">ADVECTION</span></code>, the <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">OF</span> <span class="pre">VELOCITIES</span></code> keyword may be used. The default is <code class="docutils literal notranslate"><span class="pre">TYPE</span> <span class="pre">OF</span> <span class="pre">ADVECTION</span> <span class="pre">:</span> <span class="pre">1;5;1;1</span></code> (where the <code class="docutils literal notranslate"><span class="pre">5</span></code> for depth refers to an older Telemac2d version and does not trigger the PSI scheme). <strong>The <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> state that the TYPE OF ADVECTION keyword will be deprecated in future releases.</strong></p>
</div>
<p>The <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> state that the following scalar <strong>SCHEME FOR ADVECTION</strong> keywords apply instead of the soon deprecated TYPE OF ADVECTION list:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">VELOCITIES</span> <span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">default</span>
<span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">default</span>
<span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">K</span><span class="o">-</span><span class="nb">EPSILON</span> <span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">default</span>
</pre></div>
</div>
<p>The three <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span></code> scalar keywords values may take the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> sets a not mass-conservative method of characteristics (default for all);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> sets a semi-implicit scheme and activates the Streamline Upwind Petrov Galerkin (SUPG - see below);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">4</span></code>, <code class="docutils literal notranslate"><span class="pre">13</span></code>, and <code class="docutils literal notranslate"><span class="pre">14</span></code> activate the so-called NERD scheme (these numbers activate different schemes in 3d only);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code> sets a mass-conservative PSI distributive scheme; and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">15</span></code> sets the mass-conservative ERIA scheme that works with tidal flats.</p></li>
</ul>
<p>Options <code class="docutils literal notranslate"><span class="pre">4</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code> require that the <a class="reference internal" href="../documentation/glossary.html#term-CFL"><span class="xref std std-term">CFL</span></a> condition is smaller than 1.</p>
<div class="tip admonition">
<p class="admonition-title">Recommended SCHEME OF ADVECTION … keywords</p>
<p>The <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> recommend specific combinations depending on the simulation scenario.</p>
<p>For models <strong>without any dry zones</strong> use:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">VELOCITIES</span> <span class="p">:</span> <span class="mi">4</span> <span class="o">/</span> <span class="n">alternatively</span> <span class="n">keep</span> <span class="mi">1</span>
<span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">K</span><span class="o">-</span><span class="nb">EPSILON</span> <span class="p">:</span> <span class="mi">4</span>
</pre></div>
</div>
<p>For models with <strong>tidal flats</strong> use (like in this tutorial):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">VELOCITIES</span> <span class="p">:</span> <span class="mi">14</span> <span class="o">/</span> <span class="n">alternatively</span> <span class="n">keep</span> <span class="mi">1</span>
<span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mi">5</span>
<span class="n">SCHEME</span> <span class="n">FOR</span> <span class="n">ADVECTION</span> <span class="n">OF</span> <span class="n">K</span><span class="o">-</span><span class="nb">EPSILON</span> <span class="p">:</span> <span class="mi">14</span>
</pre></div>
</div>
</div>
<p><strong>Without any SCHEME FOR ADVECTION …</strong> keyword, the <strong>SUPG OPTION</strong> (Streamline Upwind Petrov Galerkin) keyword can be used to define if upwinding applies and what type of upwinding applies. The <code class="docutils literal notranslate"><span class="pre">SUPG</span> <span class="pre">OPTION</span></code> is a list of four integers that may take the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> disables upwinding,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> enables upwinding with a classical SUPG scheme (recommended when the <a class="reference internal" href="../documentation/glossary.html#term-CFL"><span class="xref std std-term">CFL</span></a> condition is unknown), and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> enables upwinding with a modified SUPG scheme, where upwinding equals the <a class="reference internal" href="../documentation/glossary.html#term-CFL"><span class="xref std std-term">CFL</span></a> condition (recommended when the <a class="reference internal" href="../documentation/glossary.html#term-CFL"><span class="xref std std-term">CFL</span></a> condition is small).</p></li>
</ul>
<p>The default is <code class="docutils literal notranslate"><span class="pre">SUPG</span> <span class="pre">OPTION</span> <span class="pre">:</span> <span class="pre">2;2;2;2</span></code>, where</p>
<ul class="simple">
<li><p>the first list element refers to flow velocity (default <code class="docutils literal notranslate"><span class="pre">2</span></code>),</p></li>
<li><p>the second to water depth (default <code class="docutils literal notranslate"><span class="pre">2</span></code> - set to <code class="docutils literal notranslate"><span class="pre">0</span></code> when <code class="docutils literal notranslate"><span class="pre">MATRIX</span> <span class="pre">STORAGE</span> <span class="pre">:</span> <span class="pre">3</span></code>),</p></li>
<li><p>the third to tracers (default <code class="docutils literal notranslate"><span class="pre">2</span></code>), and</p></li>
<li><p>the last (forth) to the k-epsilon model (default <code class="docutils literal notranslate"><span class="pre">2</span></code>).</p></li>
</ul>
<p><strong>Implicitation parameters</strong> (<code class="docutils literal notranslate"><span class="pre">IMPLICITATION</span> <span class="pre">FOR</span> <span class="pre">DEPTH</span></code>, <code class="docutils literal notranslate"><span class="pre">IMPLICITATION</span> <span class="pre">FOR</span> <span class="pre">VELOCITIES</span></code>, and <code class="docutils literal notranslate"><span class="pre">IMPLICITATION</span> <span class="pre">FOR</span> <span class="pre">DIFFUSION</span> <span class="pre">OF</span> <span class="pre">VELOCITY</span></code>) apply to the semi-implicit time discretization used in Telemac2d. To enable cross-version compatibility, implicitation parameters should be defined in the <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> file. For <code class="docutils literal notranslate"><span class="pre">DEPTH</span></code> and <code class="docutils literal notranslate"><span class="pre">VELOCITIES</span></code> use values between <code class="docutils literal notranslate"><span class="pre">0.55</span></code> and <code class="docutils literal notranslate"><span class="pre">0.60</span></code> (<strong>default is <code class="docutils literal notranslate"><span class="pre">0.55</span></code> since v8p1</strong>); for <code class="docutils literal notranslate"><span class="pre">IMPLICITATION</span> <span class="pre">FOR</span> <span class="pre">DIFFUSION</span> <span class="pre">OF</span> <span class="pre">VELOCITY</span></code> set the v8p2 default of <code class="docutils literal notranslate"><span class="pre">1.0</span></code>.</p>
<p>The default <code class="docutils literal notranslate"><span class="pre">TREATMENT</span> <span class="pre">OF</span> <span class="pre">THE</span> <span class="pre">LINEAR</span> <span class="pre">SYSTEM</span> <span class="pre">:</span> <span class="pre">2</span></code> involves so-called <strong>mass lumping</strong>, which leads to a smoothening of results. Specific mass lumping keywords and values are required for the flux control option of the <code class="docutils literal notranslate"><span class="pre">TREATMENT</span> <span class="pre">OF</span> <span class="pre">NEGATIVE</span> <span class="pre">DEPTHS</span></code> keyword and the default value for the treatment of tidal flats. To this end, the mass lumping keywords should be defined as:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">MASS</span><span class="o">-</span><span class="n">LUMPING</span> <span class="n">ON</span> <span class="n">H</span> <span class="p">:</span> <span class="mf">1.</span>
<span class="n">MASS</span><span class="o">-</span><span class="n">LUMPING</span> <span class="n">ON</span> <span class="n">VECLOCITY</span> <span class="p">:</span> <span class="mf">1.</span>
<span class="n">MASS</span><span class="o">-</span><span class="n">LUMPING</span> <span class="n">ON</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mf">1.</span>
</pre></div>
</div>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">MASS-LUMPING</span> <span class="pre">FOR</span> <span class="pre">WEAK</span> <span class="pre">CHARACTERISTICS</span> <span class="pre">:</span> <span class="pre">1.</span></code> may be defined, which will make Telemac2d using weak characteristics (see below). The default value of any <code class="docutils literal notranslate"><span class="pre">MASS-LUMPING</span> <span class="pre">...</span></code> keyword is <code class="docutils literal notranslate"><span class="pre">0.</span></code> and the maximum value is <code class="docutils literal notranslate"><span class="pre">1.</span></code>, which makes mass matrices diagonal.</p>
<p>The <strong>OPTION OF CHARACTERISTICS</strong> keyword defines the method of characteristics that can take a <strong>strong (default of <code class="docutils literal notranslate"><span class="pre">1</span></code>)</strong> or a <strong>weak (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</strong> form. A weak form decreases <a class="reference internal" href="../documentation/glossary.html#term-Diffusion"><span class="xref std std-term">Diffusion</span></a>, is more conservative, and increases computation time. Telemac2d automatically switches from the default strong (<code class="docutils literal notranslate"><span class="pre">1</span></code>) to the weak (<code class="docutils literal notranslate"><span class="pre">2</span></code>) form when</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">TYPE</span> <span class="pre">OF</span> <span class="pre">ADVECTION</span></code> is set to <code class="docutils literal notranslate"><span class="pre">1</span></code>,</p></li>
<li><p>any <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">...</span></code> is set to <code class="docutils literal notranslate"><span class="pre">1</span></code>, or</p></li>
<li><p>any <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">OPTION</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">OF</span> <span class="pre">...</span></code> is set to <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p></li>
</ul>
<p>None of these options should be used with tracers because they are not mass-conservative.</p>
</div>
<div class="section" id="numerical-parameters-for-finite-volumes">
<h3>Numerical Parameters for Finite Volumes<a class="headerlink" href="#numerical-parameters-for-finite-volumes" title="Permalink to this headline">¶</a></h3>
<p>The finite volume method is mentioned here for completeness and detailed descriptions are available in section 7.2.2 of the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</p>
<p>The finite volume method involves the definition of a scheme through the <strong>FINITE VOLUME SCHEME</strong> keyword that can take integer values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> enables the <span id="id2">Roe [<a class="reference internal" href="../documentation/bibliography.html#id1348">Roe81</a>]</span> scheme ,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> is the <strong>default</strong> and enables the kinetic scheme <span id="id3">[<a class="reference internal" href="../documentation/bibliography.html#id1347">ABP00</a>]</span>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> enables the <span id="id4">Zokagoa and Soulaïmani [<a class="reference internal" href="../documentation/bibliography.html#id1350">ZS10</a>]</span> scheme that is incompatible with tidal flats,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span></code> enables the <span id="id5">Tchamen and Kahawita [<a class="reference internal" href="../documentation/bibliography.html#id1351">TK98</a>]</span> scheme for modelling wetting and drying of a complex bathymetry,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code> enables the frequently use Harten Lax Leer-Contact (HLLC) scheme <span id="id6">[<a class="reference internal" href="../documentation/bibliography.html#id1349">Tor09</a>]</span>, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">6</span></code> enables the Weighted Average Flux (WAF) <span id="id7">[<a class="reference internal" href="../documentation/bibliography.html#id1346">Ata12</a>]</span> scheme where parallelism is currently not implemented.</p></li>
</ul>
<p>All finite volume schemes are explicit and potentially subjected to instability. For this reason, a desired <a class="reference internal" href="../documentation/glossary.html#term-CFL"><span class="xref std std-term">CFL</span></a> condition and a variable timestep should be defined through:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">DESIRED</span> <span class="n">COURANT</span> <span class="n">NUMBER</span> <span class="p">:</span> <span class="mf">0.9</span>
<span class="n">VARIABLE</span> <span class="nb">TIME</span><span class="o">-</span><span class="n">STEP</span> <span class="p">:</span> <span class="n">YES</span> <span class="o">/</span> <span class="n">default</span> <span class="k">is </span><span class="n">NO</span>
</pre></div>
</div>
<p>The variable timestep will cause irregular listing outputs, while the graphic output frequency stems from the above-defined <code class="docutils literal notranslate"><span class="pre">TIME</span> <span class="pre">STEP</span></code>.</p>
<p>The <strong>FINITE VOLUME SCHEME TIME ORDER</strong> keyword defines the second order time scheme, which is by default set to <em>Euler explicit</em> (<code class="docutils literal notranslate"><span class="pre">1</span></code>). Setting the time scheme order to <code class="docutils literal notranslate"><span class="pre">2</span></code> makes Telemac2d using the Newmark scheme where an integration coefficient may be used to change the integration parameter (<code class="docutils literal notranslate"><span class="pre">NEWMARK</span> <span class="pre">TIME</span> <span class="pre">INTEGRATION</span> <span class="pre">COEFFICIENT</span> <span class="pre">:</span> <span class="pre">1</span></code> corresponds to <em>Euler explicit</em>). To implement these options in the steering file, use the following settings:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">FINITE</span> <span class="n">VOLUME</span> <span class="n">SCHEME</span> <span class="nb">TIME </span><span class="n">ORDER</span> <span class="p">:</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">default</span> <span class="k">is </span><span class="mi">1</span> <span class="o">-</span> <span class="n">Euler</span> <span class="n">explicit</span>
<span class="n">NEWMARK</span> <span class="nb">TIME </span><span class="n">INTEGRATION</span> <span class="n">COEFFICIENT</span> <span class="p">:</span> <span class="mf">0.5</span> <span class="o">/</span> <span class="n">default</span> <span class="k">is </span><span class="mf">0.5</span>
</pre></div>
</div>
<p>Depending on the type of analysis, the solver-related parameters of <code class="docutils literal notranslate"><span class="pre">SOLVER</span></code>, <code class="docutils literal notranslate"><span class="pre">SOLVER</span> <span class="pre">OPTIONS</span></code>, <code class="docutils literal notranslate"><span class="pre">MAXIMUM</span> <span class="pre">NUMBER</span> <span class="pre">OF</span> <span class="pre">ITERATION</span> <span class="pre">FOR</span> <span class="pre">SOLVER</span></code>, and <code class="docutils literal notranslate"><span class="pre">TIDAL</span> <span class="pre">FLATS</span></code> may be modified.</p>
</div>
<div class="section" id="numerical-solver-parameters">
<span id="tm2d-solver-pars"></span><h3>Numerical Solver Parameters<a class="headerlink" href="#numerical-solver-parameters" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 7.3.1 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>The solver can be selected and specified with the <strong>SOLVER</strong>, <strong>SOLVER FOR DIFFUSION OF TRACERS</strong>, and <strong>SOLVER FOR K-EPSILON MODEL</strong> keywords where the following settings are recommended values:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">SOLVER</span> <span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">default</span> <span class="k">is </span><span class="mi">3</span>
<span class="n">SOLVER</span> <span class="n">FOR</span> <span class="n">DIFFUSION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mi">1</span>
<span class="n">SOLVER</span> <span class="n">FOR</span> <span class="n">K</span><span class="o">-</span><span class="nb">EPSILON </span><span class="n">MODEL</span> <span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Setting the <code class="docutils literal notranslate"><span class="pre">SOLVER</span></code> to <code class="docutils literal notranslate"><span class="pre">1</span></code> instead of the default value of <code class="docutils literal notranslate"><span class="pre">3</span></code> is recommended with <code class="docutils literal notranslate"><span class="pre">TREATMENT</span> <span class="pre">OF</span> <span class="pre">THE</span> <span class="pre">LINEAR</span> <span class="pre">SYSTEM</span> <span class="pre">:</span> <span class="pre">2</span></code> (i.e., the default since v8p2) to write consistent and backward-compatible steering files.</p>
<p>Every solver keyword can take an integer value between <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">8</span></code>, where <code class="docutils literal notranslate"><span class="pre">1</span></code>-<code class="docutils literal notranslate"><span class="pre">6</span></code> use conjugate gradient methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> sets the conjugate gradient method for symmetric matrices,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> sets the conjugate residual method,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> sets the conjugate gradient on normal equation method,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span></code> sets the minimum error method,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code> sets the squared conjugate gradient method,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">6</span></code> sets the stabilized biconjugate gradient (BICGSTAB) method,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">7</span></code> sets the Generalised Minimum RESidual (<strong>GMRES</strong>) method, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">8</span></code> set the Yale university direct solver (YSMP) that does not work with parallelism.</p></li>
</ul>
<p>The <strong>GMRES method may be enabled with the finite element scheme</strong>, where the following solver options for the <a class="reference internal" href="../documentation/glossary.html#term-Krylov-space"><span class="xref std std-term">Krylov space</span></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">SOLVER</span> <span class="n">OPTION</span> <span class="p">:</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">hydrodynamic</span> <span class="n">propagation</span>
<span class="n">SOLVER</span> <span class="n">OPTION</span> <span class="n">FOR</span> <span class="n">TRACERS</span> <span class="n">DIFFUSION</span> <span class="p">:</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">tracer</span> <span class="n">diffusion</span>
<span class="n">OPTION</span> <span class="n">FOR</span> <span class="n">THE</span> <span class="n">SOLVER</span> <span class="n">FOR</span> <span class="n">K</span><span class="o">-</span><span class="nb">EPSILON </span><span class="n">MODEL</span> <span class="p">:</span> <span class="mi">2</span> <span class="o">/</span>  <span class="n">k</span><span class="o">-</span><span class="n">e</span> <span class="nb">or </span><span class="n">Spalart</span><span class="o">-</span><span class="n">Allmaras</span>
</pre></div>
</div>
<p>The solver options vary between values of <strong><code class="docutils literal notranslate"><span class="pre">2</span></code> for a small mesh</strong> and <strong><code class="docutils literal notranslate"><span class="pre">5</span></code> for a large mesh</strong>. Integers between <code class="docutils literal notranslate"><span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code> can be used for medium-sized meshes. The <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> recommends to run simulations multiple times for finding an optimum value, where higher values (close to <code class="docutils literal notranslate"><span class="pre">5</span></code>) increase the time required for an iteration, but leads to faster convergence.</p>
</div>
<div class="section" id="numerical-accuracy">
<span id="tm2d-accuracy"></span><h3>Numerical Accuracy<a class="headerlink" href="#numerical-accuracy" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 7.3.2 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>The accuracy keywords make Telemac2d stop an iteration when two consecutive solutions for the same element vary by less than an <strong>ACCURACY</strong> threshold. To this end, the following default accuracy thresholds may be varied (Telemac2d ignores non-relevant parameters):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">SOLVER</span> <span class="n">ACCURACY</span> <span class="p">:</span> <span class="mf">1.E-4</span> <span class="o">/</span> <span class="n">propagation</span> <span class="n">steps</span>
<span class="n">ACCURACY</span> <span class="n">FOR</span> <span class="n">DIFFUSION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mf">1.E-6</span> <span class="o">/</span> <span class="n">tracer</span> <span class="n">diffusion</span>
<span class="n">ACCURACY</span> <span class="n">OF</span> <span class="n">K</span> <span class="p">:</span> <span class="mf">1.E-9</span> <span class="o">/</span> <span class="n">diffusion</span> <span class="nb">and </span><span class="n">source</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">turbulent</span> <span class="n">energy</span> <span class="n">transport</span>
<span class="n">ACCURACY</span> <span class="n">OF</span> <span class="nb">EPSILON</span> <span class="p">:</span> <span class="mf">1.E-9</span> <span class="o">/</span> <span class="n">diffusion</span> <span class="nb">and </span><span class="n">source</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">turbulent</span> <span class="n">dissipation</span> <span class="n">transport</span>
<span class="n">ACCURACY</span> <span class="n">OF</span> <span class="n">SPALART</span><span class="o">-</span><span class="n">ALLMARAS</span> <span class="p">:</span> <span class="mf">1.E-9</span> <span class="o">/</span> <span class="n">diffusion</span> <span class="nb">and </span><span class="n">source</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Spalart</span><span class="o">-</span><span class="n">Allmaras</span> <span class="n">equation</span>
</pre></div>
</div>
<p>In experience, the solver accuracy should not be larger than <code class="docutils literal notranslate"><span class="pre">1.E-3</span></code> (10<span class="math notranslate nohighlight">\(^{-3}\)</span>). In contrast, very small accuracies will lead to longer computation times. In addition or alternatively to the accuracy keywords, the following default numbers of iterations can be modified to speed up calculations:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">MAXIMUM</span> <span class="n">NUMBER</span> <span class="n">OF</span> <span class="n">ITERATIONS</span> <span class="n">FOR</span> <span class="n">SOLVER</span> <span class="p">:</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">maximum</span> <span class="n">number</span> <span class="n">of</span> <span class="n">iterations</span> <span class="n">when</span> <span class="n">solving</span> <span class="n">the</span> <span class="n">propagation</span> <span class="n">step</span>
<span class="n">MAXIMUM</span> <span class="n">NUMBER</span> <span class="n">OF</span> <span class="n">ITERATIONS</span> <span class="n">FOR</span> <span class="n">DIFFUSION</span> <span class="n">OF</span> <span class="n">TRACERS</span> <span class="p">:</span> <span class="mi">60</span> <span class="o">/</span> <span class="n">tracer</span> <span class="n">diffusion</span>
<span class="n">MAXIMUM</span> <span class="n">NUMBER</span> <span class="n">OF</span> <span class="n">ITERATIONS</span> <span class="n">FOR</span> <span class="n">K</span> <span class="nb">AND EPSILON</span> <span class="p">:</span> <span class="mi">50</span> <span class="o">/</span> <span class="n">diffusion</span> <span class="nb">and </span><span class="n">source</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">k</span><span class="o">-</span><span class="n">e</span> <span class="nb">or </span><span class="n">Spalart</span><span class="o">-</span><span class="n">Allmaras</span>
</pre></div>
</div>
<p>Telemac2d will printout warning messages when convergence could not be reached with the defined combination of accuracy and maximum iteration number keywords. The warning message printouts can be deactivated with the <code class="docutils literal notranslate"><span class="pre">INFORMATION</span> <span class="pre">ABOUT</span> <span class="pre">SOLVER</span></code> keyword, but deactivating convergence warnings is not recommended.</p>
</div>
<div class="section" id="tidal-flats">
<span id="tm2d-tidal"></span><h3>Tidal Flats<a class="headerlink" href="#tidal-flats" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 7.5 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>The <strong>TIDAL FLATS (default: YES)</strong> keyword applies to the <strong>finite elements scheme only (<a class="reference internal" href="#tm2d-numerical"><span class="std std-ref">EQUATIONS keyword</span></a>)</strong> and can be ignored with finite volumes. The term <em>tidal</em> may be slightly confusing because tidal flats can occur beyond coastal regions. Tidal flats occur wherever there are flow transitions, such as when fast-flowing water enters a backwater zone. Flow transitions occur in almost all environments more complex than a square-like flume, and therefore, the activation of tidal flats in Telemac2d models is highly recommended. Though activating tidal flats leads to longer computation times, in most cases only with tidal flats physically reasonable results and stable models can be achieved.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">TIDAL</span> <span class="pre">FLATS</span></code> keyword is linked with a couple of other Telemac2d keywords driving model stability and physical meaningfulness. The following keyword setups may be generally applied to (quasi) steady, real-world rivers and channels (as opposed to lab flumes):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="n">YES</span>
<span class="n">CONTINUITY</span> <span class="n">CORRECTION</span> <span class="p">:</span> <span class="n">YES</span> <span class="o">/</span> <span class="n">default</span> <span class="k">is </span><span class="n">NO</span>
<span class="n">OPTION</span> <span class="n">FOR</span> <span class="n">THE</span> <span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="mi">1</span>
<span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">NEGATIVE</span> <span class="n">DEPTHS</span> <span class="p">:</span> <span class="mi">2</span> <span class="o">/</span> <span class="k">value </span><span class="mi">2</span> <span class="nb">or </span><span class="mi">3</span> <span class="k">is </span><span class="n">required</span> <span class="n">with</span> <span class="n">tidal</span> <span class="n">flats</span>
</pre></div>
</div>
<p>The <strong>OPTION FOR THE TREATMENT OF TIDAL FLATS</strong> accepts integer values between <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">3</span></code> to select one of the following schemes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> detects tidal flats and corrects the free surface gradient.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> removes tidal flat elements by using a masking table that eliminates any contribution of concerned mesh elements. This option may affect the mass conservation of the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> resembles <code class="docutils literal notranslate"><span class="pre">1</span></code> and adds a porosity term to half-dry mesh elements. This affects the amount of water in the model, which here equals the depth integral multiplied by the porosity. A user Fortran file may be used to modify the porosity term in the <code class="docutils literal notranslate"><span class="pre">USER_CORPOR</span></code> subroutine.</p></li>
</ul>
<p>The <strong>TREATMENT OF NEGATIVE DEPTHS (default: 1)</strong> keyword defines an approach for eliminating negative water depth values where the following integer numbers can be used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> disables any treatment of negative water depths.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> conservatively smoothens negative water depths (<strong>default</strong>).</p>
<ul>
<li><p>A float number keyword <code class="docutils literal notranslate"><span class="pre">THRESHOLD</span> <span class="pre">FOR</span> <span class="pre">NEGATIVE</span> <span class="pre">DEPTHS</span></code> (default <code class="docutils literal notranslate"><span class="pre">0.</span></code>) is available ony for this option.</p></li>
<li><p>Setting the threshold to, for instance, <code class="docutils literal notranslate"><span class="pre">-0.1</span></code> makes that negative water depths larger than -0.1 meters remain unchanged.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> imposes a flux limitation that strictly ensures positive water depths.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> acts similarly as <code class="docutils literal notranslate"><span class="pre">2</span></code> but for the ERIA <a class="reference internal" href="../documentation/glossary.html#term-Advection"><span class="xref std std-term">Advection</span></a> scheme (set <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">OF</span> <span class="pre">TRACERS</span></code> to <code class="docutils literal notranslate"><span class="pre">4</span></code> or <code class="docutils literal notranslate"><span class="pre">5</span></code>). This option is appropriate for modelling conservative tracers.</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">TIDAL FLATS options require particular keyword combinations</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">...</span></code> keywords (see the <a class="reference internal" href="#tm2d-fe"><span class="std std-ref">finite element parameters</span></a> section) must be set for <code class="docutils literal notranslate"><span class="pre">TRACERS</span></code> to LIPS (either <code class="docutils literal notranslate"><span class="pre">4</span></code> or <code class="docutils literal notranslate"><span class="pre">5</span></code>) and for all others either to a NERD (<code class="docutils literal notranslate"><span class="pre">13</span></code> or <code class="docutils literal notranslate"><span class="pre">14</span></code>) or ERIA (<code class="docutils literal notranslate"><span class="pre">15</span></code>) scheme.</p>
<p>When using LIPS (<code class="docutils literal notranslate"><span class="pre">4</span></code> or <code class="docutils literal notranslate"><span class="pre">5</span></code>) with NERD (<code class="docutils literal notranslate"><span class="pre">13</span></code> or <code class="docutils literal notranslate"><span class="pre">14</span></code>) use the following combination (<strong>used in this tutorial</strong>):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="n">YES</span>
<span class="n">OPTION</span> <span class="n">FOR</span> <span class="n">THE</span> <span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="mi">1</span>
<span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">NEGATIVE</span> <span class="n">DEPTHS</span> <span class="p">:</span> <span class="mi">2</span>
</pre></div>
</div>
<p>When using LIPS (<code class="docutils literal notranslate"><span class="pre">4</span></code> or <code class="docutils literal notranslate"><span class="pre">5</span></code>) with ERIA (<code class="docutils literal notranslate"><span class="pre">15</span></code>) use the following combination:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="n">YES</span>
<span class="n">OPTION</span> <span class="n">FOR</span> <span class="n">THE</span> <span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">TIDAL</span> <span class="n">FLATS</span> <span class="p">:</span> <span class="mi">1</span>
<span class="n">TREATMENT</span> <span class="n">OF</span> <span class="n">NEGATIVE</span> <span class="n">DEPTHS</span> <span class="p">:</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="matrix-handling">
<h3>Matrix Handling<a class="headerlink" href="#matrix-handling" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 7.6 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>Telemac2d provides multiple options for matrix handling that need to be set up for particular solver schemes.</p>
<p>The <strong>MATRIX STORAGE</strong> keyword may be set to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> for using classic element-by-element matrix storage, or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> for using edge-based matrix storage (default). This default is required when any <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">...</span></code> keyword is set to <code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">4</span></code>, <code class="docutils literal notranslate"><span class="pre">5</span></code>, <code class="docutils literal notranslate"><span class="pre">13</span></code>, <code class="docutils literal notranslate"><span class="pre">14</span></code>, or <code class="docutils literal notranslate"><span class="pre">15</span></code>, and when any direct <code class="docutils literal notranslate"><span class="pre">SOLVER</span></code> is set to <code class="docutils literal notranslate"><span class="pre">8</span></code>.</p></li>
</ul>
<p>The additional <strong>MATRIX-VECTOR PRODUCT</strong> keyword may be used to switch between multiplication methods for the finite element scheme. However, the default value of <code class="docutils literal notranslate"><span class="pre">1</span></code> (vector multiplication by a non-assembled matrix) should currently <strong>not be changed</strong> because the only alternative (<code class="docutils literal notranslate"><span class="pre">2</span></code> for frontal assembled matrix multiplication) is not implemented for parallelism and quasi-bubble discretization.</p>
</div>
<div class="section" id="friction-boundary-conditions">
<h3>Friction Boundary Conditions<a class="headerlink" href="#friction-boundary-conditions" title="Permalink to this headline">¶</a></h3>
<p>Parameters for <strong>Boundary Conditions</strong> enable the definition of roughness laws and properties of liquid boundaries.</p>
<p><strong>The following descriptions of friction parameters refer to section 6.1 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong>
The <strong>LAW OF BOTTOM FRICTION</strong> keyword defines a friction law for topographic boundaries, which can be set to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> for no friction.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> for the <span id="id8">Haaland [<a class="reference internal" href="../documentation/bibliography.html#id1358">Haa83</a>]</span> equation, which is an implicit form of the <span id="id9">Colebrook and White [<a class="reference internal" href="../documentation/bibliography.html#id1354">CW37</a>]</span> equation that builds on the Darcy-Weisbach friction factor <span class="math notranslate nohighlight">\(f_D\)</span>. This law involves a high degree of uncertainty that stems from the underlying experimental dataset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> for the <span id="id10">Chézy [<a class="reference internal" href="../documentation/bibliography.html#id116">Che76</a>]</span> roughness, that can be similarly used as <code class="docutils literal notranslate"><span class="pre">3</span></code> and <code class="docutils literal notranslate"><span class="pre">4</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> for <span id="id11">Strickler [<a class="reference internal" href="../documentation/bibliography.html#id558">Str23</a>]</span> roughness <span class="math notranslate nohighlight">\(k_{st}\)</span> (read more in the <a class="reference internal" href="../exercises/ex-ms.html#ex-1d-hydraulics"><span class="std std-ref"> 1d hydraulics exercise</span></a>), which is the inverse of <span class="math notranslate nohighlight">\(n_m\)</span> (<code class="docutils literal notranslate"><span class="pre">4</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">4</span></code> for <span id="id12">Manning [<a class="reference internal" href="../documentation/bibliography.html#id376">Man91</a>]</span> roughness <span class="math notranslate nohighlight">\(n_m\)</span> (read more in the <a class="reference internal" href="../exercises/ex-ms.html#ex-1d-hydraulics"><span class="std std-ref"> 1d hydraulics exercise</span></a>), which is the inverse of <span class="math notranslate nohighlight">\(k_{st}\)</span> (<code class="docutils literal notranslate"><span class="pre">3</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code> for the <span id="id13">Nikuradse [<a class="reference internal" href="../documentation/bibliography.html#id417">Nik33</a>]</span> roughness law, which should correspond to 3 <span class="math notranslate nohighlight">\(\cdot D_{90}\)</span> according to <span id="id14">van Rijn [<a class="reference internal" href="../documentation/bibliography.html#id1353">vR19</a>]</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">6</span></code> for the logarithmic law of the wall for turbulent flows assuming that the average flow velocity is a logarithmic function of the distance from the wall beyond the viscous and buffer layers. The thickness of these layers is a function of wall roughness length <span id="id15">[<a class="reference internal" href="../documentation/bibliography.html#id592">VK30</a>]</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">7</span></code> for the <span id="id16">Colebrook and White [<a class="reference internal" href="../documentation/bibliography.html#id1354">CW37</a>]</span> equation that calculates the Darcy-Weisbach friction factor <span class="math notranslate nohighlight">\(f_D\)</span> for turbulent flows in smooth pipes.</p></li>
</ul>
<p>With respect to the 2d applications in this eBook, the most relevant bottom friction laws are <code class="docutils literal notranslate"><span class="pre">3</span></code> <span id="id17">[<a class="reference internal" href="../documentation/bibliography.html#id558">Str23</a>]</span>, <code class="docutils literal notranslate"><span class="pre">4</span></code> <span id="id18">[<a class="reference internal" href="../documentation/bibliography.html#id376">Man91</a>]</span>, and <code class="docutils literal notranslate"><span class="pre">6</span></code> (log law). The <span id="id19">Nikuradse [<a class="reference internal" href="../documentation/bibliography.html#id417">Nik33</a>]</span> roughness law (<code class="docutils literal notranslate"><span class="pre">5</span></code>) is recommended for 3d simulations (see the <a class="reference internal" href="telemac3d-med.html#tm3d-hydrodynamics"><span class="std std-ref">Telemac3d tutorial</span></a>).</p>
<p>The <strong>FRICTION COEFFICIENT FOR THE BOTTOM</strong> keyword sets the value for a characteristic roughness coefficient. For instance, when the friction law keyword is set to <code class="docutils literal notranslate"><span class="pre">3</span></code> <span id="id20">[<a class="reference internal" href="../documentation/bibliography.html#id558">Str23</a>]</span>, the friction corresponds to the Strickler roughness coefficient <span class="math notranslate nohighlight">\(k_{st}\)</span> (in fictive units of m<span class="math notranslate nohighlight">\(^{1/3}\)</span> s<span class="math notranslate nohighlight">\(^{-1}\)</span>). For rough channels (e.g., mountain rivers) <span class="math notranslate nohighlight">\(k_{st} \approx 20\)</span> m<span class="math notranslate nohighlight">\(^{1/3}\)</span> s<span class="math notranslate nohighlight">\(^{-1}\)</span> and for smooth concrete-lined channels <span class="math notranslate nohighlight">\(k_{st} \approx 75\)</span> m<span class="math notranslate nohighlight">\(^{1/3}\)</span> s<span class="math notranslate nohighlight">\(^{-1}\)</span>. In fully turbulent flows, the Strickler roughness can be approximated as <span class="math notranslate nohighlight">\(k_{st} \approx \frac{26}{D_{90}^{1/6}}\)</span> <span id="id21">[<a class="reference internal" href="../documentation/bibliography.html#id387">MPM48</a>]</span> where <span class="math notranslate nohighlight">\(D_{90}\)</span> is the grain diameter of which 90% of the surface grain mixture are finer.
This tutorial features the application of the <em>Manning</em> roughness coefficient <span class="math notranslate nohighlight">\(n_m\)</span>, which is the inverse of <span class="math notranslate nohighlight">\(k_{st}\)</span> and implemented with:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">LAW</span> <span class="n">OF</span> <span class="n">BOTTOM</span> <span class="n">FRICTION</span> <span class="p">:</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">4</span><span class="o">-</span><span class="n">Manning</span>
<span class="n">FRICTION</span> <span class="n">COEFFICIENT</span> <span class="p">:</span> <span class="mf">0.03</span> <span class="o">/</span> <span class="n">Roughness</span> <span class="n">coefficient</span>
</pre></div>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Expand to see exemplary values for Manning roughness</p>
<p><a class="reference internal" href="#tab-mannings-n"><span class="std std-numref">Table 7</span></a> lists exemplary values for the Manning roughness coefficient <span class="math notranslate nohighlight">\(n_m\)</span> based on <span id="id22">Aldridge and Garrett [<a class="reference internal" href="../documentation/bibliography.html#id1356">AG73</a>]</span> and <span id="id23">Arcement and Schneider [<a class="reference internal" href="../documentation/bibliography.html#id1355">AS89</a>]</span>.</p>
<table class="table" id="tab-mannings-n">
<caption><span class="caption-number">Table 7 </span><span class="caption-text">Exemplary values for Manning roughness for straight uniform channels.</span><a class="headerlink" href="#tab-mannings-n" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Surface type</p></th>
<th class="head"><p>Material diameter (10<span class="math notranslate nohighlight">\(^{-3}\)</span>m)</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(n_m\)</span> (m<span class="math notranslate nohighlight">\(^{-1/3}\)</span>s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Concrete</p></td>
<td><p><span class="math notranslate nohighlight">\(-\)</span></p></td>
<td><p>0.012-0.018</p></td>
</tr>
<tr class="row-odd"><td><p>Firm soil</p></td>
<td><p><span class="math notranslate nohighlight">\(-\)</span></p></td>
<td><p>0.025-0.032</p></td>
</tr>
<tr class="row-even"><td><p>Coarse sand</p></td>
<td><p>1-2</p></td>
<td><p>0.026-0.035</p></td>
</tr>
<tr class="row-odd"><td><p>Gravel</p></td>
<td><p>2-64</p></td>
<td><p>0.028-0.035</p></td>
</tr>
<tr class="row-even"><td><p>Cobble</p></td>
<td><p>64-256</p></td>
<td><p>0.030-0.050</p></td>
</tr>
<tr class="row-odd"><td><p>Boulder</p></td>
<td><p><span class="math notranslate nohighlight">\(&gt;\)</span> 256</p></td>
<td><p>0.040-0.070</p></td>
</tr>
</tbody>
</table>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Friction zones (regional friction values)</p>
<p>Similar to the assignment of multiple friction coefficient values to multiple model regions featured in the <a class="reference internal" href="basement2d.html#bm-geometry"><span class="std std-ref">BASEMENT tutorial</span></a>, Telemac2d provides routines for domain-wise (or zonal) friction definitions. The Appendix E of the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> provide detailed explanations for the implementation of such zonal friction values. The following tips may help to better understand the instructions in Appendix E:</p>
<ul class="simple">
<li><p>The proposed modification of the <strong>FRICTION_USER</strong> Fortran function (subroutine) is not mandatory. If the FRICTION_USER subroutines must be enabled anyway (e.g., to implement a new roughness law such as the <span id="id24">Ferguson [<a class="reference internal" href="../documentation/bibliography.html#id185">Fer07</a>]</span> equation):</p>
<ul>
<li><p>The FICTION_USER subroutine can be found in <code class="docutils literal notranslate"><span class="pre">/telemac/v8p2/sources/telemac2d/friction_user.f</span></code>.</p></li>
<li><p>To use a modified version, copy <code class="docutils literal notranslate"><span class="pre">friction_user.f</span></code> to a new subfolder called <code class="docutils literal notranslate"><span class="pre">/user_fortran/</span></code> in your simulation case folder.</p></li>
<li><p>Modify and save edits in <code class="docutils literal notranslate"><span class="pre">/your/simulation/case/user_fortran/friction_user.f</span></code>.</p></li>
<li><p>Tell the steering (<code class="docutils literal notranslate"><span class="pre">*.cas</span></code>) file to use the modified FRICTION_USER Fortran file by adding the keyword <code class="docutils literal notranslate"><span class="pre">FORTRAN</span> <span class="pre">FILE</span> <span class="pre">:</span> <span class="pre">'user_fortran'</span></code> (makes Telemac2d looking up Fortran files in the <code class="docutils literal notranslate"><span class="pre">/user_fortran/</span></code> subfolder).</p></li>
</ul>
</li>
<li><p>Useful examples are:</p>
<ul>
<li><p>The BAW’s Donau case study that lives in <code class="docutils literal notranslate"><span class="pre">/telemac/v8p2/examples/telemac2d/donau/</span></code> and features the usage of a <code class="docutils literal notranslate"><span class="pre">*.bfr</span></code> <code class="docutils literal notranslate"><span class="pre">ZONES</span> <span class="pre">FILE</span></code> and a <code class="docutils literal notranslate"><span class="pre">roughness.tbl</span></code> <code class="docutils literal notranslate"><span class="pre">FRICTION</span> <span class="pre">DATA</span> <span class="pre">FILE</span></code>, which are enabled through the <code class="docutils literal notranslate"><span class="pre">FRICTION</span> <span class="pre">DATA</span> <span class="pre">:</span> <span class="pre">YES</span></code> keyword in the <code class="docutils literal notranslate"><span class="pre">t2d_donau.cas</span></code> file. The donau examples was presented at the XXth Telemac-Mascaret user conference and the conference proceedings are available at the BAW’s <a class="reference external" href="https://hdl.handle.net/20.500.11970/100418">HENRY portal</a>.</p></li>
<li><p>The <a class="reference external" href="http://www.opentelemac.org/index.php/component/jdownloads/summary/4-training-and-tutorials/185-telemac-2d-tutorial?Itemid=55">Baxter tutorial</a> (look for the contribution <em>Reverse engineering of initial &amp; boundary conditions with TELEMAC and algorithmic differentiation</em>).</p></li>
</ul>
</li>
<li><p>To assign zonal roughness values, use QGIS, Blue Kenue and a text editor:</p>
<ul>
<li><p>Delineate zones with different roughness coefficients draw polygons (e.g., following landscapes characteristics on a basemap) in separate shapefiles with QGIS (see also the <a class="reference internal" href="pre-slf-tm.html#tm-qgis-prepro"><span class="std std-ref">pre-processing tutorial on QGIS</span></a>).</p></li>
<li><p>Import the separate polygons as closed lines in Blue Kenue (see also the <a class="reference internal" href="pre-slf-tm.html#bk-tutorial"><span class="std std-ref">pre-processing tutorial on Blue Kenue</span></a>).</p></li>
<li><p>Assign elevations to the polygons (closed lines) in Blue Kenue (requires <a class="reference internal" href="pre-slf-tm.html#bk-xyz"><span class="std std-ref">elevation information</span></a>).</p></li>
<li><p>Add a new variable to the <span class="xref std std-ref">selafin</span> geometry and call it BOTTOM FRICTION (this can be another <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> file than the one where the computational mesh lives).</p></li>
<li><p>Use the <a class="reference internal" href="pre-slf-tm.html#bk-2dinterp"><span class="std std-ref">Map Object</span></a> function (<em>Tools</em> &gt; <em>Map Object…</em>) to add the polygons (closed lines) to the BOTTOM FRICTION mesh variable.</p></li>
<li><p>Define zone numbers in Blue Kenue and save them (export) as <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> or <code class="docutils literal notranslate"><span class="pre">*.bfr</span></code> zones file (conversion to zones file may required opening the <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> file in a text editor and saving it form there as <code class="docutils literal notranslate"><span class="pre">*.bfr</span></code> file).</p></li>
</ul>
</li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> file, make sure set a value for the FRICTION parameter according to the above descriptions and to set the <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> file with the BOTTOM FRICTION variable for the <code class="docutils literal notranslate"><span class="pre">ZONES</span> <span class="pre">FILE</span></code> keyword.</p></li>
</ul>
</div>
</div>
<div class="section" id="liquid-boundary-and-initial-conditions">
<h3>Liquid Boundary and Initial Conditions<a class="headerlink" href="#liquid-boundary-and-initial-conditions" title="Permalink to this headline">¶</a></h3>
<p>The liquid boundary definitions for <code class="docutils literal notranslate"><span class="pre">PRESCRIBED</span> <span class="pre">FLOWRATES</span></code> and <code class="docutils literal notranslate"><span class="pre">PRESCRIBED</span> <span class="pre">ELEVATIONS</span></code> correspond to the definitions of the <strong>downstream</strong> boundary edge in line 2 and the <strong>upstream</strong> boundary edge in line 3 (see <a class="reference external" href="#bnd-mod">boundary definitions section</a>). From the boundary file, <em>TELEMAC</em> will understand the <strong>downstream</strong> boundary as edge number <strong>1</strong> (first list element) and the <strong>upstream</strong> boundary as edge number <strong>2</strong> (second list element). Hence:</p>
<ul class="simple">
<li><p>The list parameter <code class="docutils literal notranslate"><span class="pre">PRESCRIBED</span> <span class="pre">FLOWRATES</span> <span class="pre">:</span> <span class="pre">50.;50.</span></code> assigns a flow rate of 50 m<sup>3</sup>/s to the <strong>downstream</strong> and the <strong>upstream</strong> boundary edges.</p></li>
<li><p>The list parameter <code class="docutils literal notranslate"><span class="pre">PRESCRIBED</span> <span class="pre">ELEVATIONS</span> <span class="pre">:</span> <span class="pre">2.;0.</span></code> assigns an elevation (i.e., water depth) of two m to the <strong>downstream</strong> boundary and a water depth of 0.0 m to the <strong>upstream</strong> boundary.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">0.</span></code> value for the water does physically not make sense at the upstream boundary, but because they do not make sense, and because the boundary file (<code class="docutils literal notranslate"><span class="pre">flume3d_bc.bnd</span></code>) only defines (<em>prescribes</em>) a flow rate (by setting <code class="docutils literal notranslate"><span class="pre">LIUBOR</span></code> and <code class="docutils literal notranslate"><span class="pre">LIVBOR</span></code> to <code class="docutils literal notranslate"><span class="pre">5</span></code>), <em>TELEMAC</em> will ignore the zero-water depth at the upstream boundary.</p>
<p>Instead of a list in the steering <em>CAS</em> file, the liquid boundary conditions can also be defined with a liquid boundary condition file in <em>ASCII</em> text format. For this purpose, a <code class="docutils literal notranslate"><span class="pre">LIQUID</span> <span class="pre">BOUNDARIES</span> <span class="pre">FILE</span></code> or a <code class="docutils literal notranslate"><span class="pre">STAGE-DISCHARGE</span> <span class="pre">CURVES</span> <span class="pre">FILE</span></code> (sections ??? and??? in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>, respectively can be defined. A liquid boundary file (<em>QSL</em>) may look like this:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="cp"># quasi-unsteady2d.qsl</span>
<span class="cp"># time-dependent inflow upstream-discharge Q(2) and outflow downstream-depth SL(1)</span>
<span class="n">T</span>           <span class="n">Q</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="n">SL</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">s</span>           <span class="n">m3</span><span class="o">/</span><span class="n">s</span>     <span class="n">m</span>
<span class="mf">0.</span>            <span class="mf">0.</span>     <span class="mf">5.0</span>
<span class="mi">50</span><span class="mf">0.</span>        <span class="mi">10</span><span class="mf">0.</span>     <span class="mf">5.0</span>
<span class="mi">500</span><span class="mf">0.</span>       <span class="mi">15</span><span class="mf">0.</span>     <span class="mf">5.0</span>
</pre></div>
</div>
<p>With a prescribed flow rate, a horizontal and a vertical velocity profile can be prescribed for all liquid boundaries. With only a <strong>downstream</strong> and an <strong>upstream</strong> liquid boundary (in that order according to the above-defined boundary file), the velocity profile keywords are lists of two elements each, where the first entry refers to the <strong>downstream</strong> and the second element to <strong>upstream</strong> boundary edges:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VELOCITY</span> <span class="pre">PROFILES</span></code>: <code class="docutils literal notranslate"><span class="pre">1;1</span></code> is the default option for the <strong>horizontal</strong> profiles. If set to <code class="docutils literal notranslate"><span class="pre">2;2</span></code>, the velocity profiles will be read from the boundary condition file.</p></li>
</ul>
<p>Read more about options for defining velocity profiles in section ??? of the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</p>
<p>The <strong>initial conditions</strong> describe the condition at the beginning of the simulation. This tutorial uses a constant elevation (corresponding to a constant water depth) of <code class="docutils literal notranslate"><span class="pre">2.</span></code>, and enables using an initial guess for the water depth to speed up the simulation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INITIAL</span> <span class="pre">CONDITIONS</span></code>: <code class="docutils literal notranslate"><span class="pre">'CONSTANT</span> <span class="pre">ELEVATION'</span></code> can alternatively be set to <code class="docutils literal notranslate"><span class="pre">'CONSTANT</span> <span class="pre">DEPTH'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INITIAL</span> <span class="pre">ELEVATION</span></code>: <code class="docutils literal notranslate"><span class="pre">50.</span></code> may be used to define an initial water surface level of a lake, but this keyword should not be used with a river model. Therefore, it is not included in the provided <em>steady2d.cas</em> file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INITIAL</span> <span class="pre">DEPTH</span></code>: <code class="docutils literal notranslate"><span class="pre">1</span></code> .</p></li>
</ul>
<p>Read more about the initial conditions in section ??? of the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</p>
<div class="note dropdown admonition">
<p class="admonition-title">Expand to recall BOUNDARY and INITIAL CONDITIONS in the cas file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">BOUNDARY</span> <span class="n">CONDITIONS</span>
<span class="o">/------------------------------------------------------------------</span>
<span class="n">LAW</span> <span class="n">OF</span> <span class="n">BOTTOM</span> <span class="n">FRICTION</span> <span class="p">:</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">4</span><span class="o">-</span><span class="n">Manning</span>
<span class="n">FRICTION</span> <span class="n">COEFFICIENT</span> <span class="p">:</span> <span class="mf">0.03</span> <span class="o">/</span> <span class="n">Roughness</span> <span class="n">coefficient</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">Liquid</span> <span class="n">boundaries</span>
<span class="n">PRESCRIBED</span> <span class="n">FLOWRATES</span>  <span class="p">:</span> <span class="mf">35.</span><span class="p">;</span><span class="mf">35.</span>
<span class="n">PRESCRIBED</span> <span class="n">ELEVATIONS</span> <span class="p">:</span> <span class="mf">0.</span><span class="p">;</span><span class="mf">371.33</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">INITIAL</span> <span class="n">CONDITIONS</span>
<span class="o">/</span> <span class="o">------------------------------------------------------------------</span>
<span class="n">INITIAL</span> <span class="n">CONDITIONS</span> <span class="p">:</span> <span class="s1">&#39;CONSTANT DEPTH&#39;</span>
<span class="n">INITIAL</span> <span class="n">DEPTH</span> <span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">INTEGER</span> <span class="k">for</span> <span class="n">speeding</span> <span class="n">up</span> <span class="n">calculations</span>
<span class="o">/</span>
<span class="o">/</span> <span class="n">Type</span> <span class="n">of</span> <span class="n">velocity</span> <span class="n">profile</span> <span class="n">can</span> <span class="n">be</span> <span class="mi">1</span><span class="o">-</span><span class="n">constant</span> <span class="n">normal</span> <span class="n">profile</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span> <span class="mi">2</span><span class="o">-</span><span class="n">UBOR</span> <span class="ow">and</span> <span class="n">VBOR</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">boundary</span> <span class="n">conditions</span> <span class="n">file</span> <span class="p">(</span><span class="n">cli</span><span class="p">)</span> <span class="mi">3</span><span class="o">-</span><span class="n">vector</span> <span class="ow">in</span> <span class="n">UBOR</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">boundary</span> <span class="n">conditions</span> <span class="n">file</span> <span class="p">(</span><span class="n">cli</span><span class="p">)</span> <span class="mi">4</span><span class="o">-</span><span class="n">vector</span> <span class="ow">is</span> <span class="n">proportional</span> <span class="n">to</span> <span class="n">root</span> <span class="p">(</span><span class="n">water</span> <span class="n">depth</span><span class="p">,</span> <span class="n">only</span> <span class="k">for</span> <span class="n">Q</span><span class="p">)</span> <span class="mi">5</span><span class="o">-</span><span class="n">vector</span> <span class="ow">is</span> <span class="n">proportional</span> <span class="n">to</span> <span class="n">root</span> <span class="p">(</span><span class="n">virtual</span> <span class="n">water</span> <span class="n">depth</span><span class="p">),</span> <span class="n">the</span> <span class="n">virtual</span> <span class="n">water</span> <span class="n">depth</span> <span class="ow">is</span> <span class="n">obtained</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">lower</span> <span class="n">point</span> <span class="n">at</span> <span class="n">the</span> <span class="n">boundary</span> <span class="n">condition</span> <span class="p">(</span><span class="n">only</span> <span class="k">for</span> <span class="n">Q</span><span class="p">)</span>
<span class="n">VELOCITY</span> <span class="n">PROFILES</span> <span class="p">:</span> <span class="mi">4</span><span class="p">;</span><span class="mi">1</span>
<span class="o">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="turbulence">
<span id="tm2d-turbulence"></span><h3>Turbulence<a class="headerlink" href="#turbulence" title="Permalink to this headline">¶</a></h3>
<p><strong>The following descriptions refer to section 6.2 in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a>.</strong></p>
<p>Turbulence describes a seemingly random and chaotic state of fluid motion in the form of three-dimensional vortices (eddies). True turbulence is only present in 3d vorticity and when it occurs, it mostly dominates all other flow phenomena through increases in energy dissipation, drag, heat transfer, and mixing. The phenomenon of turbulence has been a mystery to science for a long time, since turbulent flows have been observed, but could not be directly explained by the systems of linear equations. Today, turbulence is considered a random phenomenon that can be accounted for in linear equations, for instance, by introducing statistical parameters. Not surprisingly, there are a variety of options for implementing turbulence in numerical models. The horizontal and vertical dimensions of turbulent eddies can vary greatly, especially in rivers and transitions to backwater zones (tidal flats), with large flow widths (horizontal dimension) compared to small water depths (vertical dimension). For these reasons, <em>TELEMAC</em> provides multiple turbulence models that can be applied in the vertical and horizontal dimensions.</p>
<p>In 2d, <em>TELEMAC</em> developers recommend using either the <span class="math notranslate nohighlight">\(k-\epsilon\)</span> model (<code class="docutils literal notranslate"><span class="pre">3</span></code>) or the <em>Spalart-Allmaras</em> model (<code class="docutils literal notranslate"><span class="pre">5</span></code>) in lieu of the mixing length model (<code class="docutils literal notranslate"><span class="pre">2</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DIFFUSION</span> <span class="n">OF</span> <span class="n">VELOCITY</span> <span class="p">:</span> <span class="n">YES</span> <span class="o">/</span> <span class="n">enabled</span> <span class="n">by</span> <span class="n">default</span>
<span class="n">TURBULENCE</span> <span class="n">MODEL</span> <span class="p">:</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="note dropdown admonition">
<p class="admonition-title">Expand to recall TURBULENCE in the cas file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>			<span class="n">TURBULENCE</span>
<span class="o">/------------------------------------------------------------------/</span>
<span class="o">/</span>
<span class="n">TURBULENCE</span> <span class="n">MODEL</span> <span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="run-telemac2d">
<h2>Run Telemac2d<a class="headerlink" href="#run-telemac2d" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-environment-and-files">
<h3>Load environment and files<a class="headerlink" href="#load-environment-and-files" title="Permalink to this headline">¶</a></h3>
<p>Go to the configuration folder of the local <em>TELEMAC</em> installation (e.g., <code class="docutils literal notranslate"><span class="pre">~/telemac/v8p2/configs/</span></code>) and configure the environment (e.g., <code class="docutils literal notranslate"><span class="pre">pysource.openmpi.sh</span></code> - use the same as for compiling <em>TELEMAC</em>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">v8p1</span><span class="o">/</span><span class="n">configs</span>
<span class="n">source</span> <span class="n">pysource</span><span class="o">.</span><span class="n">openmpi</span><span class="o">.</span><span class="n">sh</span>
<span class="n">config</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>To start a simulation, change to the directory (<code class="docutils literal notranslate"><span class="pre">cd</span></code>) where the simulation files live (see previous page) and ran the steering file (<em>cas</em>) with the <strong><a class="reference external" href="http://telemac2d.py">telemac2d.py</a></strong> script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">go</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">steady2d</span><span class="o">-</span><span class="n">tutorial</span><span class="o">/</span>
<span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">steady2d</span><span class="o">.</span><span class="n">cas</span>
</pre></div>
</div>
<p>As a result, a successful computation should end with the following lines (or similar) in <em>Terminal</em>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="p">[...]</span>
<span class="n">BOUNDARY</span> <span class="n">FLUXES</span> <span class="n">FOR</span> <span class="n">WATER</span> <span class="n">IN</span> <span class="n">M3</span><span class="o">/</span><span class="n">S</span> <span class="p">(</span> <span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span> <span class="n">ENTERING</span> <span class="p">)</span>
<span class="n">FLUX</span> <span class="n">BOUNDARY</span>      <span class="mi">1</span>                          <span class="p">:</span>    <span class="o">-</span><span class="mi">3</span><span class="mf">5.85411</span>
<span class="n">FLUX</span> <span class="n">BOUNDARY</span>      <span class="mi">2</span>                          <span class="p">:</span>     <span class="mi">3</span><span class="mf">5.00000</span>
<span class="o">--------------------------------------------------------------------------------</span>
                <span class="k">FINAL </span><span class="n">MASS</span> <span class="n">BALANCE</span>
<span class="n">T</span> <span class="o">=</span>        <span class="mi">500</span><span class="mf">0.0000</span>

<span class="o">---</span> <span class="n">WATER</span> <span class="o">---</span>
<span class="n">INITIAL</span> <span class="n">MASS</span>                        <span class="p">:</span>     <span class="mi">250000</span><span class="mf">0.</span>
<span class="k">FINAL </span><span class="n">MASS</span>                          <span class="p">:</span>     <span class="mi">10034</span><span class="mf">3.0</span>
<span class="n">MASS</span> <span class="n">LEAVING</span> <span class="n">THE</span> <span class="n">DOMAIN</span> <span class="p">(</span><span class="nb">OR </span><span class="n">SOURCE</span><span class="p">)</span> <span class="p">:</span>     <span class="mi">238421</span><span class="mf">7.</span>
<span class="n">MASS</span> <span class="n">LOSS</span>                           <span class="p">:</span>     <span class="mi">1544</span><span class="mf">0.06</span>

 <span class="k">END </span><span class="n">OF</span> <span class="nb">TIME </span><span class="n">LOOP</span>

 <span class="n">EXITING</span> <span class="n">MPI</span>
                     <span class="o">*************************************</span><span class="k">STOP </span><span class="mi">0</span>
                     <span class="o">*</span>    <span class="k">END </span><span class="n">OF</span> <span class="k">MEMORY </span><span class="n">ORGANIZATION</span><span class="p">:</span>    <span class="o">*</span>
                     <span class="o">*************************************</span>

 <span class="n">CORRECT</span> <span class="k">END </span><span class="n">OF</span> <span class="n">RUN</span>

 <span class="n">ELAPSE</span> <span class="nb">TIME</span> <span class="p">:</span>
                             <span class="mi">44</span>  <span class="n">SECONDS</span>
<span class="p">...</span> <span class="n">merging</span> <span class="n">separated</span> <span class="k">result </span><span class="n">files</span>

<span class="p">...</span> <span class="n">handling</span> <span class="k">result </span><span class="n">files</span>
        <span class="n">moving</span><span class="p">:</span> <span class="n">r2dsteady</span><span class="p">.</span><span class="n">slf</span>
<span class="p">...</span> <span class="n">deleting</span> <span class="n">working</span> <span class="n">dir</span>

<span class="n">My</span> <span class="n">work</span> <span class="k">is </span><span class="n">done</span>
</pre></div>
</div>
<p>Thus, Telemac2d produced the file <code class="docutils literal notranslate"><span class="pre">r2dsteady.slf</span></code> that can now be analyzed in the <a class="reference internal" href="#tm-steady2d-postpro"><span class="std std-ref">post-processing with QGIS</span></a> or ParaView.</p>
</div>
</div>
</div>
<div class="section" id="post-processing">
<span id="tm-steady2d-postpro"></span><h1>Post-processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h1>
<p>The post-processing of the steady 2d scenario only uses QGIS and the <a class="reference internal" href="pre-slf-tm.html#tm-qgis-plugins"><span class="std std-ref">PostTelemac plugin</span></a>.</p>
<div class="section" id="verify-discharge-convergence">
<span id="verify-steady-tm2d"></span><h2>Verify Discharge Convergence<a class="headerlink" href="#verify-discharge-convergence" title="Permalink to this headline">¶</a></h2>
<p>The diagram in <a class="reference internal" href="#convergence-diagram-tm2d"><span class="std std-numref">Fig. 76</span></a> plots inflow and outflow for the simulation setup in this tutorial. The diagram suggests that the model reaches stability after the 55th output listing (simulation time <span class="math notranslate nohighlight">\(t \leq 5500\)</span>). Thus, the simulation time could be limited to <span class="math notranslate nohighlight">\(t = 6000\)</span>, but a simulation time of <span class="math notranslate nohighlight">\(t = 5000\)</span> would be too short.</p>
<div class="figure align-default" id="convergence-diagram-tm2d">
<img alt="telemac2d convergence steady model simulation discharge verification validation" src="../_images/convergence-diagram-tm.png" />
<p class="caption"><span class="caption-number">Fig. 76 </span><span class="caption-text">Convergence of inflow and outflow at the model boundaries.</span><a class="headerlink" href="#convergence-diagram-tm2d" title="Permalink to this image">¶</a></p>
</div>
<p>Note the difference between the convergence duration in this steady simulation with Telemac2d that starts with an initial condition of 1.0 m water depth (plot in <a class="reference internal" href="#convergence-diagram-tm2d"><span class="std std-numref">Fig. 76</span></a>) compared to the longer convergence duration in the BASEMENT tutorial (plot in <a class="reference internal" href="basement2d.html#convergence-diagram-bm"><span class="std std-numref">Fig. 57</span></a>) that starts with a dry model. This difference mainly stems from the type of initial conditions (initial depth versus dry channel) that also reflects in an outflow surplus that is visible in the Telemac2d simulation and a zero-outflow in the BASEMENT simulation at the beginning of the simulations.</p>
<p>Telemac2d provides an efficient way to stop a simulation (step) when the mass fluxes stabilize. To enable this feature, add the following block in the steering (<code class="docutils literal notranslate"><span class="pre">*.cas</span></code>) file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">steady</span> <span class="n">state</span> <span class="n">stop</span> <span class="n">criteria</span> <span class="ow">in</span> <span class="n">steering</span><span class="o">.</span><span class="n">cas</span>
<span class="n">STOP</span> <span class="n">IF</span> <span class="n">A</span> <span class="n">STEADY</span> <span class="n">STATE</span> <span class="n">IS</span> <span class="n">REACHED</span> <span class="p">:</span> <span class="n">YES</span> <span class="o">/</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">NO</span>
<span class="n">STOP</span> <span class="n">CRITERIA</span> <span class="p">:</span> <span class="mf">1.E-3</span> <span class="o">/</span>  <span class="n">default</span> <span class="ow">is</span> <span class="mf">1.E-4</span>
</pre></div>
</div>
<p>Read more about the convergence stop criteria in the <a class="reference external" href="http://ot-svn-public:telemac1*&#64;svn.opentelemac.org/svn/opentelemac/tags/v8p1r1/documentation/telemac2d/user/telemac2d_user_v8p1.pdf">Telemac2d manual</a> (section 5.1).</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hydro-informatics/hydro-informatics.github.io",
            ref: "gh-pages",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./numerics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="telemac2d.html" title="previous page">Telemac2d</a>
    <a class='right-next' id="next-link" href="telemac2d-unsteady.html" title="next page">Unsteady 2d Simulation</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Sebastian Schwindt<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>


<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pre-processing &#8212; Hydro-Informatics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'numerics/pre-slf-tm';</script>
    <link rel="canonical" href="https://hydro-informatics.com/numerics/pre-slf-tm.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Telemac2d" href="telemac2d.html" />
    <link rel="prev" title="TELEMAC" href="telemac.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/icon.jpg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/icon.jpg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../lectures/classroom.html">The Virtual Classroom</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../lectures/principles.html">Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/lectures.html">Lectures and Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/take_seat.html">Take a Seat</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../get-started/software.html">Software Resources</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-started/vm.html">Virtual Machines and Linux</a></li>

<li class="toctree-l2"><a class="reference internal" href="../get-started/ide.html">Integrated Development Environments (IDEs)</a></li>




<li class="toctree-l2"><a class="reference internal" href="../python-basics/pyinstall.html">Python (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/git.html">Version Control : git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/geo.html">Geospatial Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/install-openfoam.html">OpenFOAM (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/install-telemac.html">TELEMAC (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/others.html">Other Software Resources</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/python.html">First Steps</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pybase.html">Hello Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyerror.html">Errors, Logging, and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyloop.html">Loops and Conditional Statements</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/modularize.html">Object Orientation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyfun.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pypckg.html">Packages, Modules and Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/classes.html">Object Orientation and Classes</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/data-handling.html">Data and File Handling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pynum.html">Data Files, NumPy &amp; Pandas</a></li>





<li class="toctree-l2"><a class="reference internal" href="../jupyter/xml.html">Structured Data (XML, xlsx &amp; JSON)</a></li>

<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyplot.html">Plotting</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/pystyle.html">Code Style and Conventions</a></li>

<li class="toctree-l1"><a class="reference internal" href="../jupyter/gui.html">Graphical User Interfaces (GUIs)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/python-exercises.html">Python Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-ms.html">1d Hydraulics (Manning-Strickler Formula)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-sp.html">Reservoir Volume (Sequent Peak Algorithm)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-floods.html">Flood Return Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-sediment.html">1d Sediment Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-gui.html">Create a GUI</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Geospatial Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../geopy/geospatial-data.html">Geospatial Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/use-qgis.html">QGIS Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/drone-processing.html">Process Drone (UAV) Imagery</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../geopy/geo-python.html">Geospatial Python</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../geopy/geo-pckg.html">Geospatial Open Source Python Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-shp.html">Shapefile (Vector) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-raster.html">Raster (Grid) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-convert.html">Vectorize and Rasterize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-arcpy.html">The Commercial arcpy Library</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/geo-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-geco.html">Script a Habitat Suitability Map</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numerical Modeling</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="numerical-modeling.html">Principles</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="basement.html">BASEMENT</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="pre-qgis-bm.html">Pre-processing with QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="basement2d.html">Run and Check a Steady 2d Simulation</a></li>



</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="telemac.html">TELEMAC</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Pre-processing</a></li>


<li class="toctree-l2 has-children"><a class="reference internal" href="telemac2d.html">Telemac2d</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="telemac2d-steady.html">Steady 2d</a></li>



<li class="toctree-l3"><a class="reference internal" href="telemac2d-unsteady.html">Unsteady 2d</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="telemac3d.html">Telemac3d</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="telemac3d-slf.html">Steady 3d (SLF - Selafin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="telemac3d-med.html">Steady 3d (MED and Salome)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="telemac-gaia.html">Gaia (Morphodynamics)</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="gaia-coupling.html">Introduction and Coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-basics.html">Basic Setup of Gaia</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-bedload.html">Bedload</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-suspended.html">Suspended Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-run.html">Run and Analyze</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="openfoam/of-intro.html">OpenFOAM</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="openfoam/of-tutorial-multiphase.html">Multiphase Solver (interFoam Tutorial)</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="openfoam/of-tutorial-multiphase-mesh.html">Geometry and Mesh Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="openfoam/of-tutorial-multiphase-setup.html">Case set-up</a></li>




<li class="toctree-l3"><a class="reference internal" href="openfoam/of-tutorial-multiphase-run.html">Run OpenFOAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="openfoam/of-tutorial-multiphase-post.html">Post-processing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/data-science.html">Fundamentals (Coming soon)</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../datascience/py-requirements.html">Python Requirements</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../datascience/data-prepro.html">Data Pre-Processing</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datascience/data-types.html">The Nature of Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/data-cleaning.html">Dataset Cleaning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/dimensional-analysis.html">Dimensional Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/theory.html">Techniques (Coming soon)</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../datascience/techniques.html">Overview of Fundamental Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datascience/calibrate-validate.html">Model Calibration and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datascience/morphology-predictor-svm.html">Support Vector Machine (SVM)</a></li>


</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../documentation/documentation.html">How to Markdown and Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/notation.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/bibliography.html">References</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/docs-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-git.html">Git and Markdown</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-programming.html">Programming Tools and IDEs</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-anaconda.html">Debugging Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-python.html">Debugging Python Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-jupyter.html">Debugging Jupyter</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-numerical-models.html">Numerical Models</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-basement.html">Debugging BASEMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-telemac.html">Debugging TELEMAC</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-os.html">Operating Systems (Linux and VMs)</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-linux.html">Debugging Debian Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-vm.html">Debugging Virtual Machines</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-scilife.html">Science Life Hacks</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-zotero.html">Zotero Utilities</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../terms/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../terms/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/contributors.html">Contributors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/hydro-informatics/jupyter-python-course" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/numerics/pre-slf-tm.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Pre-processing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Pre-processing</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#qgis">QGIS</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-and-setup-a-new-project">Create and Setup a New Project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#third-party-plugins">Third-party Plugins</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-dem">Load DEM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-snapping">Enable Snapping</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-boundaries-and-breaklines">Model Boundaries and Breaklines</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#breaklines-and-model-outline">Breaklines and Model Outline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#liquid-boundaries">Liquid Boundaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#region-point-markers">Region Point Markers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quality-meshing-2dm">Quality Meshing (*.2dm)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bluekenue">BlueKenue</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-started">Get Started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#files-and-objects">Files and Objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-xyz-points">Load XYZ Points</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bluekenue-meshing-optional">BlueKenue Meshing (Optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#draw-model-boundary-closed-line">Draw Model Boundary (Closed Line)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#draw-open-lines-of-the-channel-banks">Draw Open Lines of the Channel Banks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-mesh-es">Generate Mesh(es)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selafin">SELAFIN</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-and-import-ingredients">Open and Import Ingredients</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-selafin-object">Create SELAFIN Object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-2d-interpolator">Create 2D Interpolator</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boundary-conditions-conlim-cli">Boundary Conditions (Conlim - CLI)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-conlim-object">Create Conlim Object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-liquid-boundaries">Define Liquid Boundaries</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pre-processing">
<span id="slf-prepro-tm"></span><h1>Pre-processing<a class="headerlink" href="#pre-processing" title="Permalink to this headline">#</a></h1>
<div class="attention admonition">
<p class="admonition-title">Requirements</p>
<p>This tutorial is designed for <strong>advanced beginners</strong> and before diving into this tutorial make sure to:</p>
<ul class="simple">
<li><p>Follow the installation instructions for <a class="reference internal" href="../get-started/geo.html#qgis-install"><span class="std std-ref">QGIS</span></a> in this eBook.</p></li>
<li><p>Read (or watch) and understand this eBook’s <a class="reference internal" href="../geopy/use-qgis.html#qgis-tutorial"><span class="std std-ref">QGIS Tutorial</span></a>.</p></li>
<li><p>Install <a class="reference internal" href="../get-started/install-telemac.html#bluekenue"><span class="std std-ref">BlueKenue</span></a>.</p></li>
</ul>
</div>
<p>The first steps in numerical modeling of a river with TELEMAC consist in the conversion of a Digital Elevation Model (<strong><a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a></strong>) into a computational mesh. This tutorial guides through the creation of:</p>
<ul class="simple">
<li><p>A QGIS project for creating a computational mesh (similar to the <a class="reference internal" href="pre-qgis-bm.html#qgis-prepro-bm"><span class="std std-ref">BASEMENT</span></a> pre-processing).</p></li>
<li><p>Optionally, the mesh generation with the BlueKenue<sup>TM</sup> software is featured.</p></li>
<li><p>A <a class="reference internal" href="../get-started/install-telemac.html#bluekenue"><span class="std std-ref">BlueKenue</span></a> workspace to interpolate terrain elevations from a <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a>, including the export of a mesh to the SELAFIN/SERAFIN (<code class="docutils literal notranslate"><span class="pre">*.slf</span></code>) geometry format for TELEMAC, and the definition boundary edges.</p></li>
</ul>
<p>At the end of this tutorial, <a class="reference internal" href="telemac.html#chpt-telemac"><span class="std std-ref">TELEMAC</span></a> users will have generated a computational mesh in the <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> file format, which is ready to use for the <a class="reference internal" href="telemac2d-steady.html#telemac2d-steady"><span class="std std-ref">Telemac2d steady</span></a> simulation tutorial. Additional materials and intermediate data products are provided in this eBook’s supplemental <a class="reference external" href="https://github.com/hydro-informatics/telemac">telemac</a> data repository.</p>
<div class="tip admonition">
<p class="admonition-title">Platform compatibility</p>
<p>All software applications featured in this tutorial can be run on <em>Linux</em>, <em>Windows</em>, and also potentially <em>macOS</em> (not tested) platforms.</p>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="qgis">
<span id="tm-qgis-prepro"></span><h1>QGIS<a class="headerlink" href="#qgis" title="Permalink to this headline">#</a></h1>
<section id="create-and-setup-a-new-project">
<h2>Create and Setup a New Project<a class="headerlink" href="#create-and-setup-a-new-project" title="Permalink to this headline">#</a></h2>
<p>Launch QGIS and <a class="reference internal" href="../geopy/use-qgis.html#qgis-project"><span class="std std-ref">create a new QGIS project</span></a> to get started with this tutorial. As featured in the <a class="reference internal" href="../geopy/use-qgis.html#qgis-tutorial"><span class="std std-ref">QGIS Tutorial</span></a>, set up a coordinate reference system (<a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a>) for the project. This example uses data of a river in Bavaria (Germany, UTM zone 33N), which requires the following <a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a>:</p>
<ul class="simple">
<li><p>In the QGIS top menu go to <strong>Project</strong> &gt; <strong>Properties</strong>.</p></li>
<li><p>Activate the <strong>CRS</strong> tab.</p></li>
<li><p>Enter <code class="docutils literal notranslate"><span class="pre">UTM</span> <span class="pre">zone</span> <span class="pre">33N</span></code> and select the CRS shown in <a class="reference internal" href="#qgis-crs-utm33n"><span class="std std-numref">Fig. 64</span></a>.</p></li>
<li><p>Click <strong>Apply</strong> and <strong>OK</strong>.</p></li>
</ul>
<p>Note that the CRS used with TELEMAC differs from the one used with BASEMENT to enable the compatibility of geospatial data products from QGIS with <a class="reference internal" href="../get-started/install-telemac.html#bluekenue"><span class="std std-ref">BlueKenue</span></a>.</p>
<figure class="align-default" id="qgis-crs-utm33n">
<img alt="qgis set coordinate reference system crs germany utm zone 33n Inn river" src="../_images/crs-utm-33n.png" />
<figcaption>
<p><span class="caption-number">Fig. 64 </span><span class="caption-text">Define UTM zone 33N (WGS84) as project CRS.</span><a class="headerlink" href="#qgis-crs-utm33n" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="tip admonition">
<p class="admonition-title">Save the project…</p>
<p>Save the QGIS project (<strong>Project</strong> &gt; <strong>Save As…</strong>), for example, with the name <strong>prepro-tutorial.qgz</strong>.</p>
</div>
</section>
<section id="third-party-plugins">
<span id="tm-qgis-plugins"></span><h2>Third-party Plugins<a class="headerlink" href="#third-party-plugins" title="Permalink to this headline">#</a></h2>
<p>The TELEMAC tutorials rely on the BASEmesh plugin and the <em>PostTelemac</em> plugin. To this end, <strong>open</strong> the <strong>QGIS plugin manager</strong> (<strong>Plugins</strong> menu &gt; <strong>Manage and Install Plugins</strong>) to open the <strong>Plugins</strong> window (<a class="reference internal" href="#open-qgis-plugin-manager"><span class="std std-numref">Fig. 65</span></a>).</p>
<figure class="align-default" id="open-qgis-plugin-manager">
<img alt="qgis basement telemac plugins manager" src="../_images/plugin-manager-open.png" />
<figcaption>
<p><span class="caption-number">Fig. 65 </span><span class="caption-text">Open QGIS’ Plugins Manager.</span><a class="headerlink" href="#open-qgis-plugin-manager" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>In the <strong>Plugins</strong> window, add both plugins as follows:</p>
<ul class="simple">
<li><p>BASEmesh requires to add the developer’s plugin repository (more details are available in the <a class="reference internal" href="pre-qgis-bm.html#get-basemesh"><span class="std std-ref">BASEMENT pre-processing</span></a> tutorial):</p>
<ul>
<li><p>Go to the <strong>Settings</strong> tab.</p></li>
<li><p>Scroll to the bottom (<strong>Plugin Repositories</strong> listbox in <a class="reference internal" href="pre-qgis-bm.html#qgis-plugins"><span class="std std-numref">Fig. 32</span></a>), click on <strong>Add…</strong>.</p></li>
<li><p>In the popup window enter:</p>
<ul>
<li><p>a name for the new repository, for instance, <code class="docutils literal notranslate"><span class="pre">BASEmesh</span> <span class="pre">Plugin</span> <span class="pre">Repository</span></code>;</p></li>
<li><p>the repository address: <a class="reference external" href="https://people.ee.ethz.ch/~basement/qgis_plugins/qgis_plugins.xml">https://people.ee.ethz.ch/~basement/qgis_plugins/qgis_plugins.xml</a>.</p></li>
</ul>
</li>
<li><p>Click <strong>OK</strong>. The new repository should now be visible in the <strong>Plugin Repositories</strong> listbox.</p></li>
</ul>
</li>
<li><p>Install the BASEmesh plugin:</p>
<ul>
<li><p>Go to the <strong>All</strong> tab (still in the <em>Plugins</em> window) and enter <code class="docutils literal notranslate"><span class="pre">basemesh</span></code> in the search field.</p></li>
<li><p>Find the <strong>newest BASEmesh</strong> (i.e., <strong>Available version</strong> &gt;= 2.0.0) plugin and click on <strong>Install Plugin</strong>.</p></li>
</ul>
</li>
<li><p>To install the <a class="reference external" href="https://github.com/Artelia/PostTelemac/wiki#T45"><strong>PostTelemac</strong> plugin</a> type <code class="docutils literal notranslate"><span class="pre">posttelemac</span></code> in the <strong>All</strong> tab and click on <strong>Install Plugin</strong>.</p></li>
<li><p>After the successful installation <strong>Close</strong> the <strong>Plugins</strong> window.</p></li>
</ul>
<p>Now, the <em>BASEmesh 2</em> plugin should be available in QGIS’ <em>Plugins</em> menu and the <a class="reference external" href="https://github.com/Artelia/PostTelemac/wiki#T45">PostTelemac</a> <img alt="../_images/sym-posttm.png" src="../_images/sym-posttm.png" /> symbol should be visible in QGIS’ menu bar.</p>
<div class="admonition-why-use-basemesh-for-telemac admonition">
<p class="admonition-title">Why use BASEmesh for TELEMAC?</p>
<p>By using BASEmesh, this tutorial employs BASEMENT’s efficient mesh generator to minimize the number of work steps to be made in BlueKenue<sup>TM</sup>. The rationale behind this approach is that QGIS is more stable and user-friendly than BlueKenue<sup>TM</sup>, for instance, to correct drawing errors of boundary lines.</p>
</div>
</section>
<section id="load-dem">
<span id="get-dem-xyz"></span><h2>Load DEM<a class="headerlink" href="#load-dem" title="Permalink to this headline">#</a></h2>
<p>This tutorial uses height information that is stored in a <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a>. For the QGIS section, preferably use the <a class="reference internal" href="../documentation/glossary.html#term-GeoTIFF"><span class="xref std std-term">GeoTIFF</span></a> <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a> with UTM zone 33N as {term} <code class="docutils literal notranslate"><span class="pre">CRS</span></code> as follows:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/rasters/dem-utm33n.tif"><strong>Download the GeoTIFF DEM</strong></a> and save it in the same folder (<code class="docutils literal notranslate"><span class="pre">/Project</span> <span class="pre">Home/</span></code> or a sub-directory) as the above-create <strong>qgz</strong> project.</p></li>
<li><p>Add the downloaded DEM as a new raster layer in <em>QGIS</em>:</p>
<ul>
<li><p>In <em>QGIS</em>’ <strong>Browser</strong> panel find the <strong>Project Home</strong> directory where you downloaded the DEM <em>tif</em>.</p></li>
<li><p>Drag the DEM <em>tif</em> from the <strong>Project Home</strong> folder into QGIS’ <strong>Layer</strong> panel.</p></li>
</ul>
</li>
<li><p>To facilitate delineating specific regions of the river ecosystem later, add a <a class="reference internal" href="../geopy/use-qgis.html#basemap"><span class="std std-ref">satellite imagery basemap</span></a> (XYZ tile) under the <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a> and customize the layer symbology.</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">What are QGIS panels, what is a basemap, and how can I re-order layers?</p>
<p>Learn more in the <em>QGIS</em> tutorial on <a class="reference internal" href="../geopy/use-qgis.html#qgis-tbx-install"><span class="std std-ref">Panels, Toolbars, and Plugins</span></a>.</p>
</div>
<p>The <strong>dem-utm33n</strong> layer should now be visible in the viewport and listed in the <strong>Layers</strong> panel. <strong>Right-click</strong> on the <strong>dem-utm33n</strong> layer and select <strong>Zoom to Layer(s)</strong> to view the layer.</p>
<div class="note dropdown admonition">
<p class="admonition-title">Alternatively work with a .xyz DEM pointcloud</p>
<p>This tutorial uses later in the section on BlueKenue<sup>TM</sup> a <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> file as <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a>, which was derived from the <a class="reference internal" href="../documentation/glossary.html#term-GeoTIFF"><span class="xref std std-term">GeoTIFF</span></a> using the workflow described in the <a class="reference internal" href="../geopy/use-qgis.html#make-xyz"><span class="std std-ref">QGIS tutorial</span></a>. The <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> file can also be used with QGIS and it can be <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/rasters/dem.xyz">downloaded here</a>. To <strong>import</strong> the <strong>dem.xyz</strong> file in QGIS, open the <em>Data Source Manager</em> from the <strong>Layer</strong> top menu, select <strong>Add Layer</strong> and <strong>Add Delimited Text Layer…</strong>. In the opening <strong>Data Source Manager</strong> window (see <a class="reference internal" href="#qgis-import-xyz"><span class="std std-numref">Fig. 66</span></a>) take the following actions:</p>
<ul class="simple">
<li><p>Select the downloaded <code class="docutils literal notranslate"><span class="pre">dem.xyz</span></code> file in the <strong>file name</strong> field.</p></li>
<li><p>In the <strong>File Format</strong> frame, make sure to select <strong>Custom delimiters</strong> and check the <strong>Space</strong> delimiter box.</p></li>
<li><p>In the <strong>Record and Fields Options</strong> frame, set the <strong>Number of header lines to discard</strong> to <code class="docutils literal notranslate"><span class="pre">13</span></code> and check the <strong>First record has field names</strong> box.</p></li>
<li><p>In the <strong>Geometry Definition</strong> frame, select <code class="docutils literal notranslate"><span class="pre">:EndHeader</span></code> as <strong>X field</strong>, <code class="docutils literal notranslate"><span class="pre">field_2</span></code> as <strong>Y field</strong>, and <code class="docutils literal notranslate"><span class="pre">field_3</span></code> as <strong>Z field</strong>. Select <code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">CRS:</span> <span class="pre">ESRI:32633</span> <span class="pre">-</span> <span class="pre">WGS</span> <span class="pre">84</span> <span class="pre">/</span> <span class="pre">UTM</span> <span class="pre">zone</span> <span class="pre">33N</span></code> as <strong>Geometry CRS</strong>.</p></li>
<li><p>Click <strong>Add</strong> and <strong>Close</strong> the <em>Data Source Manager</em> window.</p></li>
</ul>
<figure class="align-default" id="qgis-import-xyz">
<img alt="qgis import XYZ point cloud file dem" src="../_images/import-dem-xyz.png" />
<figcaption>
<p><span class="caption-number">Fig. 66 </span><span class="caption-text">Import the <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> point cloud as QGIS layer.</span><a class="headerlink" href="#qgis-import-xyz" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</section>
<section id="enable-snapping">
<h2>Enable Snapping<a class="headerlink" href="#enable-snapping" title="Permalink to this headline">#</a></h2>
<p>It is important that the lines do not overlap to avoid ambiguous or missing definitions of regions and to ensure that boundary lines are closed. Therefore, activate snapping:</p>
<ul class="simple">
<li><p>Activate the <em>Snapping Toolbar</em>: <strong>View</strong> &gt; <strong>Toolbars</strong> &gt; <strong>Snapping Toolbar</strong></p></li>
<li><p>In the <strong>Snapping toolbar</strong> &gt; <strong>Enable Snapping</strong> <img alt="../_images/snapping-horseshoe.png" src="../_images/snapping-horseshoe.png" /></p></li>
<li><p>Enable snapping for</p>
<ul>
<li><p><strong>Vertex</strong>, <strong>Segment</strong>, and <strong>Middle of Segments</strong> <img alt="../_images/snapping-vertex-segments.png" src="../_images/snapping-vertex-segments.png" />.</p></li>
<li><p><strong>Snapping on Intersections</strong> <img alt="../_images/snapping-intersection.png" src="../_images/snapping-intersection.png" />.</p></li>
<li><p><strong>Self Snapping</strong> <img alt="../_images/sym-self-snapping.png" src="../_images/sym-self-snapping.png" />.</p></li>
</ul>
</li>
</ul>
</section>
<section id="model-boundaries-and-breaklines">
<span id="make-tm-shp"></span><h2>Model Boundaries and Breaklines<a class="headerlink" href="#model-boundaries-and-breaklines" title="Permalink to this headline">#</a></h2>
<p>This section resembles the instructions of the <a class="reference internal" href="pre-qgis-bm.html#make-2dm"><span class="std std-ref">BASEMENT pre-processing</span></a> tutorial to generate an <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> mesh file. The differences are that the shapefiles for the TELEMAC pre-processing use the <em>UTM zone 33N</em> <a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a> and that the height (elevation) interpolation needs to be done with the BlueKenue<sup>TM</sup> software to generate liquid boundary lines and an <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> geometry file for TELEMAC. The generation of the <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> mesh relies on the <a class="reference internal" href="pre-qgis-bm.html#get-basemesh"><span class="std std-ref">QGIS BASEmesh plugin</span></a> and requires drawing a</p>
<ul class="simple">
<li><p><a class="reference internal" href="../geopy/use-qgis.html#create-line-shp"><span class="std std-ref">Line Shapefile</span></a> called <em>breaklines.shp</em> that contains model boundaries and internal breaklines between model regions with different characteristics;</p></li>
<li><p><a class="reference internal" href="../geopy/use-qgis.html#create-line-shp"><span class="std std-ref">Line Shapefile</span></a> called <em>liquid-boundaries.shp</em> that contains model boundaries for assigning inflow and outflow conditions;</p></li>
<li><p><a class="reference internal" href="../geopy/use-qgis.html#create-point-shp"><span class="std std-ref">Point Shapefile</span></a> called <em>region-pts.shp</em> that contains markers for the definition of characteristics of model regions.</p></li>
</ul>
<p><a class="reference internal" href="#tm-shapefiles"><span class="std std-numref">Figure 67</span></a> provides an overview of the shapefiles to be drawn for generating a quality mesh with the BASEmesh plugin.</p>
<figure class="align-default" id="tm-shapefiles">
<img alt="qgis telemac basemesh point line shapefiles" src="../_images/tm-prepro-illu.png" />
<figcaption>
<p><span class="caption-number">Fig. 67 </span><span class="caption-text">The breaklines, liquid boundaries, and region points shapefile to draw for creating a 2dm quality mesh with the BASEmesh plugin (background map: <span id="id1">Google [<a class="reference internal" href="../documentation/bibliography.html#id1369" title="Google. Google Satellite imagery. nd. URL: https://mt1.google.com/vt/lyrs=s&amp;x={x}&amp;y={y}&amp;z={z}.">Goond</a>]</span> satellite imagery).</span><a class="headerlink" href="#tm-shapefiles" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<section id="breaklines-and-model-outline">
<span id="tm-bm-breaklines"></span><h3>Breaklines and Model Outline<a class="headerlink" href="#breaklines-and-model-outline" title="Permalink to this headline">#</a></h3>
<p>The model boundary defines the model extent and can be divided into regions with different characteristics (e.g., roughness values) through <strong>breaklines</strong>. Breaklines indicate, for instance, channel banks and the riverbed (main channel), and need to be inside the DEM extents. Boundary lines and breaklines are stored in a <a class="reference internal" href="../geopy/use-qgis.html#create-line-shp"><span class="std std-ref">Line Shapefile</span></a> that BASEmesh uses to find both model boundaries and internal breaklines between model regions. For this purpose, <a class="reference internal" href="../geopy/use-qgis.html#create-line-shp"><span class="std std-ref">Create a Line Shapefile</span></a> and call it <strong>breaklines.shp</strong> (<strong>Layer</strong> &gt; <strong>Create Layer</strong> &gt; <strong>New Shapefile Layer</strong>). Click on QGIS’ <strong>Layers</strong> menu &gt; <strong>Create Layer</strong> &gt; <strong>New Shapefile Layer…</strong> (see <a class="reference internal" href="#tm-qgis-new-lyr"><span class="std std-numref">Fig. 68</span></a>). Make sure to select <code class="docutils literal notranslate"><span class="pre">EPSG:</span> <span class="pre">32633</span> <span class="pre">-</span> <span class="pre">WGS</span> <span class="pre">84</span> <span class="pre">/</span> <span class="pre">UTM</span> <span class="pre">zone</span> <span class="pre">33N</span></code> as <a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a> <img alt="../_images/sym-crs.png" src="../_images/sym-crs.png" />. Do not add any field.</p>
<figure class="align-default" id="tm-qgis-new-lyr">
<img alt="qgis new layer basemesh" src="../_images/create-shp-layer.png" />
<figcaption>
<p><span class="caption-number">Fig. 68 </span><span class="caption-text">Create a new shapefile from QGIS’ Layers menu.</span><a class="headerlink" href="#tm-qgis-new-lyr" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Start editing <strong>breaklines.shp</strong> by clicking on the yellow pen <img alt="../_images/yellow-pen.png" src="../_images/yellow-pen.png" /> and draw the breaklines indicated in <a class="reference internal" href="#tm-shapefiles"><span class="std std-numref">Fig. 67</span></a> by activating <strong>Add Line Feature</strong> <img alt="../_images/sym-add-line.png" src="../_images/sym-add-line.png" />, which involves:</p>
<ul class="simple">
<li><p>The <strong>boundaries of the</strong> model at the left and the right <strong>floodplain limits</strong>:</p>
<ul>
<li><p>Delineate the outer bounds of the floodplains.</p></li>
<li><p>Make sure that all points and lines are inside the <a class="reference internal" href="pre-qgis-bm.html#get-dem"><span class="std std-ref">DEM layer</span></a>.</p></li>
<li><p>Do not cross the river (wetted area indicated by the satellite imagery basemap).</p></li>
<li><p><strong>Finalize</strong> every line with a <strong>right-click</strong>.</p></li>
</ul>
</li>
<li><p>The <strong>breaklines of the left bank (LB) and right bank (RB)</strong>:</p>
<ul>
<li><p>Draw lines along the wetted main channel indicated in the satellite imagery (basemap).</p></li>
<li><p>Make sure that line ends perfectly coincide with the before-created floodplain boundary lines (snapping is needed); thus, the main channel’s breaklines and the floodplain boundary lines need to enclose the floodplains without any gap between the lines.</p></li>
</ul>
</li>
<li><p><strong>Breaklines of gravel banks</strong>:</p>
<ul>
<li><p>Draw lines along the gravel banks that are visible in the satellite imagery basemap in the main channel.</p></li>
<li><p>Make sure that the line ends perfectly coincide (use snapping) with the before-created main channel breaklines; thus, the main channel’s hard breaklines and the gravel bank breaklines need to enclose the gravel banks without any gap between the lines.</p></li>
</ul>
</li>
<li><p>Optional: <strong>Breaklines of block ramps</strong>:</p>
<ul>
<li><p>Find the rough block ramps (effervescing waters) in the satellite imagery basemap and delineate them by drawing lines across the wetted main channel.</p></li>
<li><p>Make sure that the line ends perfectly coincide with the main channel breaklines; thus, the main channel’s hard breaklines and the block ramp breaklines need to enclose the block ramps without any gap between the lines.</p></li>
</ul>
</li>
</ul>
<p>To <strong>correct drawing errors</strong> use the <strong>Vertex Tool</strong> <img alt="../_images/sym-vertex-tool.png" src="../_images/sym-vertex-tool.png" />. Finally, save the new lines (edits of <strong>breaklines.shp</strong>) by clicking on the <strong>Save Layer Edits</strong> <img alt="../_images/sym-save-edits.png" src="../_images/sym-save-edits.png" /> symbol. <strong>Stop (Toggle) Editing</strong> by clicking again on the yellow pen <img alt="../_images/yellow-pen.png" src="../_images/yellow-pen.png" /> symbol.</p>
<div class="tip admonition">
<p class="admonition-title">Troubles with drawing boundaries and breaklines?</p>
<p>Download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/shapefiles/breaklines.zip">zipped breaklines shapefile</a> shown in the above figure and unpack it into the project folder, for instance, <code class="docutils literal notranslate"><span class="pre">/Project</span> <span class="pre">Home/shapefiles/breaklines.[SHP]</span></code>.</p>
</div>
<div class="tip admonition">
<p class="admonition-title">Draw boundaries of complex DEMs…</p>
<p>Drawing boundaries manually around large <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a>s can be very time consuming, in particular, if the raw data are a point cloud and not yet converted to a <a class="reference internal" href="../geopy/geospatial-data.html#raster"><span class="std std-ref">Gridded Cell (Raster) Data</span></a>.</p>
<p>If you are dealing with a point cloud, consider using <em>QGIS</em> <a class="reference external" href="https://docs.qgis.org/3.16/en/docs/training_manual/vector_analysis/spatial_statistics.html?highlight=convex%20hull#basic-fa-create-a-test-dataset">Convex Hull tool</a> that draws a tight bounding polygon around points.</p>
<p>If you are dealing with a large <a class="reference internal" href="../documentation/glossary.html#term-GeoTIFF"><span class="xref std std-term">GeoTIFF</span></a>, consider using QGIS’ <a class="reference external" href="https://docs.qgis.org/3.16/en/docs/training_manual/complete_analysis/raster_to_vector.html">Raster to Vector</a> tool.</p>
</div>
</section>
<section id="liquid-boundaries">
<span id="tm-bm-liquid-boundaries"></span><h3>Liquid Boundaries<a class="headerlink" href="#liquid-boundaries" title="Permalink to this headline">#</a></h3>
<p>The <strong>liquid boundaries</strong> define where hydraulic conditions, such as a given discharge or stage-discharge relationship, apply at the model inflow (upstream) and outflow (downstream) limits. Thus, a functional river model requires at least one inflow boundary (line) where mass fluxes enter the model and one outflow boundary (line) where mass fluxes leave the model. For this purpose, <a class="reference internal" href="../geopy/use-qgis.html#create-line-shp"><span class="std std-ref">Create a Line Shapefile</span></a> called <strong>liquid-boundaries.shp</strong>, select <code class="docutils literal notranslate"><span class="pre">EPSG:</span> <span class="pre">32633</span> <span class="pre">-</span> <span class="pre">WGS</span> <span class="pre">84</span> <span class="pre">/</span> <span class="pre">UTM</span> <span class="pre">zone</span> <span class="pre">33N</span></code> as <a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a> <img alt="../_images/sym-crs.png" src="../_images/sym-crs.png" />, and define <strong>two text data fields</strong> named <strong>type</strong> and <strong>stringdef</strong>. Make sure that <strong>snapping</strong> is still <strong>enabled</strong> and <strong>Toggle (Start) Editing</strong> <img alt="../_images/yellow-pen.png" src="../_images/yellow-pen.png" /> the new <strong>liquid-boundaries.shp</strong>. Then draw two lines:</p>
<ul class="simple">
<li><p>Activate <strong>Add Line Feature</strong> <img alt="../_images/sym-add-line.png" src="../_images/sym-add-line.png" />.</p></li>
<li><p>Draw an inflow boundary line (light blue line on the left of <a class="reference internal" href="#tm-shapefiles"><span class="std std-numref">Fig. 67</span></a>):</p>
<ul>
<li><p>Zoom to the inflow region of the DEM limits, where there is a <strong>gap between</strong> the above-created <strong>floodplain boundary breaklines</strong>.</p></li>
<li><p>Start drawing a line on one bank (top of the below figure) and move to the other bank to make approximately seven more points across the river.</p></li>
<li><p>The <strong>last point</strong> needs to <strong>coincide</strong> with the end of the other bank’s <strong>floodplain boundary breakline</strong>.</p></li>
<li><p><strong>Finalize</strong> the line with a <strong>right-click</strong>, and enter <code class="docutils literal notranslate"><span class="pre">Inflow</span></code> in the <strong>type</strong> field and <code class="docutils literal notranslate"><span class="pre">inflow</span></code> in the <strong>stringdef</strong> field (the case matters).</p></li>
</ul>
</li>
<li><p>Draw an outflow boundary line (light blue line on the right of <a class="reference internal" href="#tm-shapefiles"><span class="std std-numref">Fig. 67</span></a>):</p>
<ul>
<li><p>Zoom to the outflow region of the DEM limits, where there is a <strong>gap between</strong> the above-created <strong>floodplain boundary breaklines</strong>.</p></li>
<li><p>Start drawing a line on one bank (top of the below figure) and move to the other bank to make approximately seven more points across the river.</p></li>
<li><p>The <strong>last point</strong> needs to <strong>coincide</strong> with the end of the other bank’s <strong>floodplain boundary breakline</strong>.</p></li>
<li><p><strong>Finalize</strong> the line with a <strong>right-click</strong>, and enter <code class="docutils literal notranslate"><span class="pre">Outflow</span></code> in the <strong>type</strong> field and <code class="docutils literal notranslate"><span class="pre">outflow</span></code> in the <strong>stringdef</strong> field (the case matters).</p></li>
</ul>
</li>
</ul>
<p>To <strong>correct drawing errors</strong> use the <strong>Vertex Tool</strong> <img alt="../_images/sym-vertex-tool.png" src="../_images/sym-vertex-tool.png" />.</p>
<p>Finally, save the liquid boundary lines (edits of <strong>liquid-boundaries.shp</strong>) by clicking on the <strong>Save Layer Edits</strong> <img alt="../_images/sym-save-edits.png" src="../_images/sym-save-edits.png" /> symbol. <strong>Stop (Toggle) Editing</strong> by clicking again on the yellow pen <img alt="../_images/yellow-pen.png" src="../_images/yellow-pen.png" /> symbol.</p>
<div class="tip admonition">
<p class="admonition-title">Troubles with drawing the liquid boundary lines?</p>
<p>Download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/shapefiles/liquid-boundaries.zip">zipped liquid-boundaries shapefile</a> and unpack it into the project folder, for instance, <code class="docutils literal notranslate"><span class="pre">/Project</span> <span class="pre">Home/shapefiles/liquid-boundaries.[SHP]</span></code>.</p>
</div>
</section>
<section id="region-point-markers">
<h3>Region Point Markers<a class="headerlink" href="#region-point-markers" title="Permalink to this headline">#</a></h3>
<p><strong>Region point</strong> markers are placed inside regions defined by boundary lines and breaklines. Every region marker (i.e., a point somewhere in the region area) assigns, for instance, a material identifier (MATIDs) and a maximum mesh cell area. The MATID is (currently) not needed for TELEMAC (BASEMENT only), but the entries in the <strong>max_area</strong> field will determine the cell size of the mesh regions and have major effects on the quality and efficiency of the TELEMAC simulation. To draw region points, <a class="reference internal" href="../geopy/use-qgis.html#create-point-shp"><span class="std std-ref">create a new point shapefile</span></a> named <strong>raster-points.shp</strong> with the following definitions (similar to <a class="reference internal" href="pre-qgis-bm.html#qgis-reg-lyr"><span class="std std-numref">Fig. 39</span></a> in the BASEMENT pre-processing tutorial):</p>
<ul class="simple">
<li><p>Define the <strong>File name</strong> as <strong>region-points.shp</strong> (or similar)</p></li>
<li><p>Ensure the <strong>Geometry type</strong> is <strong>Point</strong></p></li>
<li><p>Select <code class="docutils literal notranslate"><span class="pre">EPSG:</span> <span class="pre">32633</span> <span class="pre">-</span> <span class="pre">WGS</span> <span class="pre">84</span> <span class="pre">/</span> <span class="pre">UTM</span> <span class="pre">zone</span> <span class="pre">33N</span></code> as <a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a> <img alt="../_images/sym-crs.png" src="../_images/sym-crs.png" /></p></li>
<li><p>Add three <strong>New Field</strong>s (in addition to the default <strong>Integer</strong> type <strong>ID</strong> field):</p>
<ul>
<li><p><strong>max_area</strong> = <strong>Decimal number</strong> (<strong>length</strong> = 10, <strong>precision</strong> = 3)</p></li>
<li><p><strong>MATID</strong> = <strong>Whole number</strong> (<strong>length</strong> = 3)</p></li>
<li><p><strong>type</strong> = <strong>Text data</strong> (<strong>length</strong> = 20)</p></li>
</ul>
</li>
<li><p>Click <strong>OK</strong> to create the new point shapefile.</p></li>
</ul>
<p>Consider to <strong>deactivate snapping</strong> for drawing the region markers because the points should not coincide with any line. Then, <strong>Toggle (Start) Editing</strong> <img alt="../_images/yellow-pen.png" src="../_images/yellow-pen.png" /> the new <strong>region-points.shp</strong> file and activate <strong>Add Point Feature</strong> <img alt="../_images/sym-add-point.png" src="../_images/sym-add-point.png" />. Draw one point in every area section that is enclosed by breaklines and (liquid) boundary lines (refer to the round and triangular-shaped points in <a class="reference internal" href="#tm-shapefiles"><span class="std std-numref">Fig. 67</span></a>). Depending on the apparent area type from the satellite imagery basemap, assign one of the four regions listed in <a class="reference internal" href="#tab-tm-region-defs"><span class="std std-numref">Tab. 7</span></a> to every point.</p>
<table class="table" id="tab-tm-region-defs">
<caption><span class="caption-number">Table 7 </span><span class="caption-text">Region names and their <strong>max_area</strong>, <strong>MATID</strong>, and <strong>type</strong> field values.</span><a class="headerlink" href="#tab-tm-region-defs" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Region</p></th>
<th class="head"><p>Riverbed</p></th>
<th class="head"><p>Block ramps</p></th>
<th class="head"><p>Gravel banks</p></th>
<th class="head"><p>Floodplains</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>max_area</strong></p></td>
<td><p>25.0</p></td>
<td><p>20.0</p></td>
<td><p>25.0</p></td>
<td><p>80.0</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MATID</strong></p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p><strong>type</strong></p></td>
<td><p>riverbed</p></td>
<td><p>block_ramp</p></td>
<td><p>gravel_bank</p></td>
<td><p>floodplain</p></td>
</tr>
</tbody>
</table>
<p>After drawing a point in every closed area, save the region point markers (edits of <strong>region-points.shp</strong>) by clicking on the <strong>Save Layer Edits</strong> <img alt="../_images/sym-save-edits.png" src="../_images/sym-save-edits.png" /> symbol. <strong>Stop (Toggle) Editing</strong> by clicking again on the yellow pen <img alt="../_images/yellow-pen.png" src="../_images/yellow-pen.png" /> symbol.</p>
<div class="tip admonition">
<p class="admonition-title">Troubles with drawing the region marker points?</p>
<p>Download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/shapefiles/region-points.zip">zipped region-points shapefile</a> and unpack it into the project folder, for instance, <code class="docutils literal notranslate"><span class="pre">/Project</span> <span class="pre">Home/shapefiles/region-points.[SHP]</span></code>.</p>
</div>
</section>
</section>
<section id="quality-meshing-2dm">
<span id="tm-qualm"></span><h2>Quality Meshing (*.2dm)<a class="headerlink" href="#quality-meshing-2dm" title="Permalink to this headline">#</a></h2>
<p><em>BASEmesh</em>’s quality mesh tool creates a computationally efficient triangular mesh based on <span id="id2">Shewchuk [<a class="reference internal" href="../documentation/bibliography.html#id1340" title="Jonathan Richard Shewchuk. Triangle: Engineering a 2D quality mesh generator and Delaunay triangulator. In Ming C. Lin and Dinesh Manocha, editors, Applied Computational Geometry Towards Geometric Engineering, Lecture Notes in Computer Science, 203–222. Berlin, Heidelberg, 1996. Springer. URL: https://link.springer.com/chapter/10.1007/BFb0014497, doi:10.1007/BFb0014497.">She96</a>]</span> and within the above-defined model boundaries. The tool associates mesh properties with the regions shapefile, but it does not include elevation data. Thus, after generating a quality mesh in <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> format, elevation information needs to be added with the BlueKenue<sup>TM</sup> software. To generate the quality mesh, open BASEmesh’s <strong>QUALITY MESHING</strong> tool (QGIS’ <strong>Plugins</strong> &gt; <strong>BASEmesh 2</strong> &gt; <strong>QUALITY MESHING</strong>). Make the following settings in the popup window (see also <a class="reference internal" href="#fig-tm-qualm"><span class="std std-numref">Fig. 69</span></a>):</p>
<ul class="simple">
<li><p>Triangulation constraints frame:</p>
<ul>
<li><p><strong>Breaklines</strong> = <strong>breaklines</strong> (see <a class="reference internal" href="#make-tm-shp"><span class="std std-ref">Model Boundaries and Breaklines</span></a>).</p></li>
<li><p>Keep all other defaults.</p></li>
</ul>
</li>
<li><p>Regions frame:</p>
<ul>
<li><p><strong>Activate the Regions</strong> checkbox.</p></li>
<li><p><strong>Region marker layer</strong> = <strong>regions-points</strong> (see <a class="reference internal" href="#make-tm-shp"><span class="std std-ref">Model Boundaries and Breaklines</span></a>).</p></li>
<li><p><strong>Activate the MATID field</strong> checkbox and select the <em>regions-points</em> shapefile’s <strong>MATID field</strong>.</p></li>
<li><p><strong>Activate the Maximum area field</strong> checkbox and select the <em>regions-points</em> shapefile’s <strong>max_area field</strong>.</p></li>
</ul>
</li>
<li><p>Mesh domain frame: keep defaults.</p></li>
<li><p>String definitions frame:</p>
<ul>
<li><p><strong>Activate the String definitions</strong> checkbox.</p></li>
<li><p><strong>String definitions layer</strong> = <strong>liquid boundaries</strong>.</p></li>
<li><p><strong>String definitions ID field</strong> =  <strong>stringdef</strong>.</p></li>
<li><p><strong>Activate the Include in 2DM node strings (BASEMENT 3)</strong> checkbox.</p></li>
<li><p>Ignore all BASEMENT 2.8 options.</p></li>
</ul>
</li>
<li><p>Settings frame: keep defaults.</p></li>
<li><p>Output frame:</p>
<ul>
<li><p>Click on the <strong>Browse…</strong> button and define a <strong>2dm</strong> file name in the <code class="docutils literal notranslate"><span class="pre">/Project</span> <span class="pre">Home/</span></code> directory, such as <strong>prepro-tutorial_quality-mesh.2dm</strong>.</p></li>
</ul>
</li>
<li><p>Click on the <strong>Run</strong> button to create the quality mesh.</p></li>
</ul>
<figure class="align-default" id="fig-tm-qualm">
<img alt="basement qgis quality mesh tin" src="../_images/bm-quality-meshing-success.png" />
<figcaption>
<p><span class="caption-number">Fig. 69 </span><span class="caption-text">Definitions to be made in BASEmesh’s Quality meshing tool.</span><a class="headerlink" href="#fig-tm-qualm" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Quality meshing may take a short while. After a successful mesh generation the file <strong>prepro-tutorial_quality-mesh-interp.2dm</strong> will have been generated and it automatically shows up in QGIS as a single-color surface with <code class="docutils literal notranslate"><span class="pre">0-0</span></code> <strong>Bed Elevation</strong>. The next section shows the interpolation of elevation data with the BlueKenue<sup>TM</sup> software.</p>
<div class="tip admonition">
<p class="admonition-title">Troubles with running the quality mesh generator?</p>
<p>Download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/meshes/prepro-tutorial_quality-mesh-utm33n.2dm">tutorial quality mesh file</a> and save it in the project folder, for instance, <code class="docutils literal notranslate"><span class="pre">/Project</span> <span class="pre">Home/meshes/prepro-tutorial_quality-mesh-utm33n.2dm</span></code>.</p>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="bluekenue">
<span id="bk-tutorial"></span><h1>BlueKenue<a class="headerlink" href="#bluekenue" title="Permalink to this headline">#</a></h1>
<section id="get-started">
<span id="bk-intro"></span><h2>Get Started<a class="headerlink" href="#get-started" title="Permalink to this headline">#</a></h2>
<p>This section features the <a class="reference internal" href="../get-started/install-telemac.html#bluekenue"><span class="std std-ref">BlueKenue</span></a> software to interpolate terrain elevations from a <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a>.xyz file on an <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> mesh, export the mesh to the SELAFIN/SERAFIN (<code class="docutils literal notranslate"><span class="pre">*.slf</span></code>) geometry format for TELEMAC, and define boundary lines.</p>
<p>In addition, the <a class="reference internal" href="#bk-meshing"><span class="std std-ref">Meshing with BlueKenue</span></a> section explains the mesh generation with BlueKenue<sup>TM</sup>, which might be unstable because of program crashes and inflexible for correcting line drawing errors. Still, meshing with BlueKenue<sup>TM</sup> might be desirable to create a computational mesh with long triangular cells that approximately follow the river streamlines (i.e., using a channel sub-mesh).</p>
<p>To familiarize with BlueKenue<sup>TM</sup>, launch the software (more details in the <a class="reference internal" href="../get-started/install-telemac.html#bluekenue"><span class="std std-ref">installation chapter</span></a>) and locate</p>
<ul class="simple">
<li><p>the <strong>WorkSpace</strong> browser (on the left of the window),</p></li>
<li><p>the <strong>Data Items</strong> entry in the <strong>WorkSpace</strong>, where file objects will be listed,</p></li>
<li><p>the <strong>Views</strong> entry in the <strong>WorkSpace</strong>, where a <strong>2D View (1)</strong> entry appears by default and a <em>3D View</em> can be added from the <strong>Window</strong> top menu &gt; <strong>New 3D View</strong>.</p></li>
</ul>
<p>Have a look at the <strong>File</strong> menu, which enables to:</p>
<ul class="simple">
<li><p>Create <strong>New</strong> BlueKenue<sup>TM</sup> objects, such as SELAFIN, Conlim Boundary Condition, T3 Mesh Generator, or 2D Interpolator objects.</p></li>
<li><p><strong>Open</strong> file types such as <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> geometry files or <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> point clouds.</p></li>
<li><p><strong>Import</strong> files such as:</p>
<ul>
<li><p>an <strong>ArcView Shapefile</strong> (read more about <a class="reference internal" href="../geopy/geospatial-data.html#shp"><span class="std std-ref">shapefiles</span></a>),</p></li>
<li><p>an <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> Mesh like the one created in the above <a class="reference internal" href="#tm-qualm"><span class="std std-ref">pre-processing with QGIS</span></a>section, or</p></li>
<li><p>a <a class="reference internal" href="../documentation/glossary.html#term-GeoTIFF"><span class="xref std std-term">GeoTIFF</span></a> raster, which will not work with many GeoTIFF rasters in practice because BlueKenue<sup>TM</sup> cannot handle Float32 or Float64 data in a GeoTIFF.</p></li>
</ul>
</li>
</ul>
<p>The <strong>Edit</strong> menu enables editing BlueKenue<sup>TM</sup> objects, such as lines, point sets, or meshes.</p>
<p>The <strong>Tools</strong> menu provides routines that can be applied to particular BlueKenue<sup>TM</sup> objects or for combining objects. In particular, this tutorial will make use of the <strong>Map Objects…</strong> tool.</p>
</section>
<section id="files-and-objects">
<span id="bk-files"></span><h2>Files and Objects<a class="headerlink" href="#files-and-objects" title="Permalink to this headline">#</a></h2>
<p>BlueKenue<sup>TM</sup> saves every object in software specific file formats and this eBook refers to the following BlueKenue<sup>TM</sup> file objects (alphabetic order of file endings):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*.bc2</span></code> files contain Conlim Boundary Conditions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.cli</span></code> files contain ready-to-use boundary conditions for TELEMAC and can be produced with a <code class="docutils literal notranslate"><span class="pre">*.bc2</span></code> object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.i2s</span></code> files contain closed or open lines.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.in2</span></code> files contain 2D Interpolators for mapping elevation (or other) data on a mesh.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.slf</span></code> files contain ready-to-use TELEMAC meshes that stem from a BlueKenue<sup>TM</sup> SELAFIN object and a <code class="docutils literal notranslate"><span class="pre">*.t3s</span></code> mesh file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.t3c</span></code> files contain BlueKenue<sup>TM</sup> channel mesh generator objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.t3m</span></code> files contain BlueKenue<sup>TM</sup> mesh generator objects to create a <code class="docutils literal notranslate"><span class="pre">*.t3s</span></code> mesh object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.t3s</span></code> files contain BlueKenue<sup>TM</sup> mesh objects that can either be imported (e.g., from an <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> file) or created with a <code class="docutils literal notranslate"><span class="pre">*.t3m</span></code> mesh generator.</p></li>
</ul>
<p>All files that are created with BlueKenue<sup>TM</sup> are based on the ASCII EnSim 1.0 file type standard. The EnSim Core builds on <a class="reference internal" href="../documentation/glossary.html#term-HDF"><span class="xref std std-term">HDF</span></a> and it is documented in BlueKenue<sup>TM</sup>’s <a class="reference external" href="https://chyms.nrc.gc.ca/download_public/KenueClub/BlueKenue/2011_UserManual.pdf">user manual PDF</a> that comes along with the <a class="reference external" href="https://chyms.nrc.gc.ca/download_public/KenueClub/BlueKenue/Installer/BlueKenue_3.12.0-alpha+20201006_64bit.msi">BlueKenue installer</a> (in BlueKenue<sup>TM</sup> press the <code class="docutils literal notranslate"><span class="pre">F1</span></code> key to open the manual). Note that understanding the EnSim Core can significantly facilitate troubleshooting structural errors of BlueKenue<sup>TM</sup> files.</p>
</section>
<section id="load-xyz-points">
<span id="bk-xyz"></span><h2>Load XYZ Points<a class="headerlink" href="#load-xyz-points" title="Permalink to this headline">#</a></h2>
<p>Download the provided <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/rasters/dem.xyz">dem.xyz</a> point cloud that contains EnSim-formatted 3d coordinates of the river ecosystem <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a> that will be modelled in this tutorial. The <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> file was derived from the <a class="reference internal" href="../documentation/glossary.html#term-GeoTIFF"><span class="xref std std-term">GeoTIFF</span></a> <a class="reference internal" href="../documentation/glossary.html#term-DEM"><span class="xref std std-term">DEM</span></a> used in the <a class="reference internal" href="#get-dem-xyz"><span class="std std-ref">QGIS pre-processing</span></a>.</p>
<aside class="margin sidebar">
<p class="sidebar-title">The .xyz file is not an XYZ tile</p>
<p>The point cloud in the <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code> file is different than the regular XYZ tile raster that constitutes the <a class="reference internal" href="../geopy/use-qgis.html#basemap"><span class="std std-ref">satellite imagery basemap</span></a>.</p>
</aside>
<p>To load the <strong>dem.xyz</strong> file in BlueKenue<sup>TM</sup>, open it from the <strong>File</strong> menu (<strong>File</strong> &gt; <strong>Open…</strong>) and take the following actions in the popup window:</p>
<ul class="simple">
<li><p>Navigate to the download folder.</p></li>
<li><p>Next to the <strong>File name:</strong> field, locate the file type drop-down menu and <strong>change the default from Telemac Selafin File (<code class="docutils literal notranslate"><span class="pre">*.slf</span></code>) to Point Sets (<code class="docutils literal notranslate"><span class="pre">*.pt2</span></code>, <code class="docutils literal notranslate"><span class="pre">*.xyz</span></code>, <code class="docutils literal notranslate"><span class="pre">*.pcl</span></code>)</strong>.</p></li>
<li><p>Click <strong>Open</strong> to finalize the import.</p></li>
</ul>
<p>To verify if the point cloud was correctly imported, <strong>drag</strong> the new <strong>dem (Z)</strong> data items to the <strong>2D View (1)</strong> entry. <a class="reference internal" href="#bk-import-xyz"><span class="std std-numref">Figure 70</span></a> shows the imported XYZ point cloud in BlueKenue<sup>TM</sup>.</p>
<figure class="align-default" id="bk-import-xyz">
<img alt="bluekenue import xyz point cloud DEM" src="../_images/bk-imported-pts.png" />
<figcaption>
<p><span class="caption-number">Fig. 70 </span><span class="caption-text">The provided dem.xyz imported in BlueKenue<sup>TM</sup>.</span><a class="headerlink" href="#bk-import-xyz" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>To verify the <a class="reference internal" href="../documentation/glossary.html#term-CRS"><span class="xref std std-term">CRS</span></a> of the point dataset, right-click on <strong>dem (Z)</strong>, select properties, go to the <strong>Spatial</strong> tab, and make sure that BlueKenue<sup>TM</sup> correctly identified <strong>UTM Zone 33</strong> in the <strong>Coordinate System</strong> frame and <strong>WGS 84</strong> as <strong>Ellipsoid</strong>.</p>
</section>
<section id="bluekenue-meshing-optional">
<span id="bk-meshing"></span><h2>BlueKenue Meshing (Optional)<a class="headerlink" href="#bluekenue-meshing-optional" title="Permalink to this headline">#</a></h2>
<div class="admonition-skip-this-section-if-you-created-a-2dm-quality-mesh-with-basemesh admonition">
<p class="admonition-title">Skip this section if you created a <em>.2dm</em> quality mesh with BASEMESH</p>
<p>This is an optional section for users who do not want to use QGIS and the BASEmesh plugin for meshing. Generating a mesh with BlueKenue<sup>TM</sup> can be useful, for instance, to produce a computational grid that has triangular cells oriented parallel to the riverbanks (i.e., a channel sub-mesh). Otherwise, <strong>if the <code class="docutils literal notranslate"><span class="pre">*.2dm</span></code> mesh file was created</strong> with QGIS, <strong>jump to the section on creating a <a class="reference internal" href="#bk-create-slf"><span class="std std-ref">Selafin Object</span></a></strong>.</p>
</div>
<p>This section features the basic mesh generation with BlueKenue<sup>TM</sup>, which also runs smoothly on Linux through the <a class="reference internal" href="../get-started/vm.html#play-on-linux"><span class="std std-ref">PlayOnLinux</span></a> app. Additionall, the Baxter tutorial <span id="id3">[<a class="reference internal" href="../documentation/bibliography.html#id1344" title="C. Gifford-Miears and A. Leon. Tutorial on the use of TELEMAC-2D Hydrodynamics model and Pre-/Post-processing with BlueKenue for flood-inundation mapping in Unsteady Flow Conditions. Oregon State University, Corvallis, USA, 2013. URL: https://web.eng.fiu.edu/arleon/courses/Transient_flows/Tutorials/TELEMAC_2D/TELEMAC_2D_Tutorial_Baxter.pdf.">GML13</a>]</span> provides more details for getting started with BlueKenue along with detailed screenshots.</p>
<section id="draw-model-boundary-closed-line">
<h3>Draw Model Boundary (Closed Line)<a class="headerlink" href="#draw-model-boundary-closed-line" title="Permalink to this headline">#</a></h3>
<p>Delineate the model boundary (outline) with a closed line object (see also <a class="reference internal" href="#bk-model-outline"><span class="std std-numref">Fig. 71</span></a>):</p>
<ul class="simple">
<li><p>Create a new <strong>Closed Line</strong> by clicking on the <img alt="../_images/bk-sym-cl.png" src="../_images/bk-sym-cl.png" /> symbol in the BlueKenue<sup>TM</sup> menu.</p></li>
<li><p><strong>Draw</strong> the new closed line:</p>
<ul>
<li><p>Make points by clicking close to the outer extent of the <strong>dem (Z)</strong> layer in the <strong>2D Views (1)</strong> window. Ensure that no point lies outside the region where elevation data is available (i.e., tightly delineate <strong>dem (Z)</strong>).</p></li>
</ul>
</li>
<li><p>Finalize the closed line by pressing <strong>Esc</strong>.</p></li>
<li><p>Name the closed line, for instance, <code class="docutils literal notranslate"><span class="pre">model-outline</span></code>.</p></li>
<li><p><strong>Skip</strong> <strong>Adding a New Attribute</strong> by just clicking <strong>OK</strong>.</p></li>
</ul>
<figure class="align-default" id="bk-model-outline">
<img alt="bluekenue draw closed line model boundary outline" src="../_images/bk-model-outline.png" />
<figcaption>
<p><span class="caption-number">Fig. 71 </span><span class="caption-text">The Closed Line of the model boundaries in BlueKenue<sup>TM</sup>’s 2D View window.</span><a class="headerlink" href="#bk-model-outline" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>To <strong>save the model outline</strong>, highlight the new Closed Line object in the <strong>WorkSpace</strong> browser and click on the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol. Consider creating a new folder called <code class="docutils literal notranslate"><span class="pre">bk-mesh</span></code> that will contain all BlueKenue<sup>TM</sup> objects required for meshing. Thus, save the model outline (Closed Line), for example, as <strong>/bk-mesh/model-outline.i2s</strong>.</p>
<div class="tip admonition">
<p class="admonition-title">Troubles with drawing the model outline?</p>
<p>The outline can also be downloaded from the supplemental materials repository (<a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/model-outline.i2s">download model-outline.i2s</a>). To open the Closed Line from the repository in BlueKenue<sup>TM</sup>, go to <strong>File</strong> &gt; <strong>Open…</strong> &gt; select <strong>Line Sets (<code class="docutils literal notranslate"><span class="pre">*.i2s</span></code>, <code class="docutils literal notranslate"><span class="pre">*.i3s</span></code>)</strong> as file type and navigate to the download directory.</p>
</div>
<p>The current state of BlueKenue<sup>TM</sup> can be saved in the form of a <strong>workspace.ews</strong> file (<strong>File</strong> &gt; <strong>Save WorkSpace…</strong> &gt; define a name). Saving the workspace requires that all BlueKenue<sup>TM</sup> objects are saved on the disk. Optionally, download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/meshing-workspace.ews">meshing-workspace.ews</a> from the supplemental materials repository.</p>
<div class="attention admonition">
<p class="admonition-title">Loading a WorkSpace</p>
<p>In theory, the saved workspace can be loaded after closing BlueKenue<sup>TM</sup>, but the <strong>Load WorkSpace…</strong> operation often <strong>fails</strong> for apparently arbitrary reasons. This issue is one of the reasons that make QGIS a better option for meshing.</p>
</div>
</section>
<section id="draw-open-lines-of-the-channel-banks">
<span id="bk-draw-ol"></span><h3>Draw Open Lines of the Channel Banks<a class="headerlink" href="#draw-open-lines-of-the-channel-banks" title="Permalink to this headline">#</a></h3>
<p>Similar to the <a class="reference internal" href="#make-tm-shp"><span class="std std-ref">above-created breaklines in QGIS</span></a>, the channel banks can be delineated with Open Line objects. For this purpose create two Open Line objects as follows:</p>
<ul class="simple">
<li><p>Create a new <strong>Open Line</strong> by clicking on the <img alt="../_images/bk-sym-ol.png" src="../_images/bk-sym-ol.png" /> symbol in the BlueKenue<sup>TM</sup> menu.</p></li>
<li><p><strong>Draw</strong> the new open line:</p>
<ul>
<li><p>Make points by following the blue-ish-green areas as indicated in <a class="reference internal" href="#bk-lines-all"><span class="std std-numref">Fig. 72</span></a> <strong>2D Views (1)</strong> window (flow direction from left to right).</p></li>
</ul>
</li>
<li><p>Finalize the open line by pressing <strong>Esc</strong>.</p></li>
<li><p>Name one open line <code class="docutils literal notranslate"><span class="pre">LeftBank</span></code> and the other <code class="docutils literal notranslate"><span class="pre">RightBank</span></code>.</p></li>
<li><p><strong>Skip</strong> <strong>Adding a New Attribute to:</strong> by just clicking <strong>OK</strong>.</p></li>
</ul>
<figure class="align-default" id="bk-lines-all">
<img alt="bluekenue draw open line channel river banks" src="../_images/bk-lines-all.png" />
<figcaption>
<p><span class="caption-number">Fig. 72 </span><span class="caption-text">The finalized Open and Closed Line objects delineating the model boundaries and the channel banks. The RightBank Open Line is represented by the dashed black line and the LeftBank Open Line is represented in red.</span><a class="headerlink" href="#bk-lines-all" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="tip admonition">
<p class="admonition-title">Troubles with drawing the open lines of the channel banks?</p>
<p>Download the lines from the supplemental materials repository. Notably download <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/LeftBank.i2s">LeftBank.i2s</a> and <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/RightBank.i2s">RightBank.i2s</a>. To open the Open Line objects from the repository in BlueKenue<sup>TM</sup>, go to <strong>File</strong> &gt; <strong>Open…</strong> &gt; select <strong>Line Sets (<code class="docutils literal notranslate"><span class="pre">*.i2s</span></code>, <code class="docutils literal notranslate"><span class="pre">*.i3s</span></code>)</strong> as file type and navigate to the download directory.</p>
</div>
</section>
<section id="generate-mesh-es">
<h3>Generate Mesh(es)<a class="headerlink" href="#generate-mesh-es" title="Permalink to this headline">#</a></h3>
<p>BlueKenue<sup>TM</sup> provides mesh generators for creating regular or unstructured computational grids (meshes). This example features the <strong>T3 Channel Mesher</strong> to generate a triangular mesh, which involves first creating a channel mesh (sub-mesh) and second generating a compound mesh that embeds the channel sub-mesh in a coarser mesh of the floodplains. To this end, start with creating a new <strong>T3 Channel Mesher</strong> object (<strong>File</strong> &gt; <strong>New</strong> &gt; <strong>T3 Channel Mesher</strong>). In the popup window set:</p>
<ul class="simple">
<li><p><strong>CrossChannelNodeCount</strong> to <code class="docutils literal notranslate"><span class="pre">20</span></code> and</p></li>
<li><p><strong>AlongChannelInterval</strong> to <code class="docutils literal notranslate"><span class="pre">15</span></code>.</p></li>
</ul>
<p>Click <strong>OK</strong> (<strong>not Run</strong>) to close the new T3 Channel Mesh window. Next, drag and drop the above-created <strong>LeftBank</strong> and <strong>RightBank</strong> Open Line objects on their equivalent attributes of the <strong>new T3 Channel Mesh</strong> object in the WorkSpace browser as indicated in <a class="reference internal" href="#bk-channel-mesh"><span class="std std-numref">Fig. 73</span></a>. Next, generate the channel mesh by double-clicking on the <strong>new T3 Channel Mesh</strong> object and click <strong>Run</strong>. To visualize the resulting <strong>Mesh</strong>, drag it on the <strong>2D View (1)</strong> object.</p>
<figure class="align-default" id="bk-channel-mesh">
<img alt="bluekenue create channel mesh" src="../_images/bk-channel-mesh.png" />
<figcaption>
<p><span class="caption-number">Fig. 73 </span><span class="caption-text">Create and visualize the channel mesh after dragging the LeftBank and RightBank Open Line Objects on their name equivalents of the T3 Channel Mesh object.</span><a class="headerlink" href="#bk-channel-mesh" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="tip admonition">
<p class="admonition-title">Troubles with creating the channel mesh?</p>
<p>Download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/channel-mesh.t3c">channel-mesh.t3c</a> mesh generator and the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/channel-mesh.t3">channel-mesh.t3s</a> mesh objects from the supplemental materials repository. To open the T3 Mesh object from the repository in BlueKenue<sup>TM</sup>, go to <strong>File</strong> &gt; <strong>Open…</strong> &gt; select <strong>2D T3 Mesh (<code class="docutils literal notranslate"><span class="pre">*.t...</span></code>)</strong> as file type and navigate to the download directory.</p>
</div>
<p>Next, embed the channel mesh in a coarser floodplain mesh by creating a <strong>new T3 Mesh Generator</strong> object (<strong>File</strong> &gt; <strong>New</strong> &gt; <strong>T3 Mesh Generator</strong>). In the <strong>T3 Mesh</strong> popup window make the following settings (see also <a class="reference internal" href="#bk-t3-mesher"><span class="std std-numref">Fig. 74</span></a>):</p>
<ul class="simple">
<li><p><strong>Enable</strong> the <strong>Resample Outline</strong> checkbox.</p></li>
<li><p>Set the <strong>Default Edge Length</strong> to <code class="docutils literal notranslate"><span class="pre">20</span></code>.</p></li>
<li><p>Keep all other defaults.</p></li>
<li><p>Press <strong>OK</strong> (<strong>not Run</strong>).</p></li>
</ul>
<figure class="align-default" id="bk-t3-mesher">
<img alt="bluekenue create combined mesh generator" src="../_images/bk-t3-mesher.png" />
<figcaption>
<p><span class="caption-number">Fig. 74 </span><span class="caption-text">Setup the properties of the new T3 Mesh Generator object.</span><a class="headerlink" href="#bk-t3-mesher" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Define the <strong>Outline (Value)</strong> by dragging (see also <a class="reference internal" href="#bk-mesh-compound"><span class="std std-numref">Fig. 75</span></a>):</p>
<ul class="simple">
<li><p>The above-created <strong>model-outline</strong> object on the <strong>Outline (Value)</strong> of the <strong>new T3 Mesh</strong>, and</p></li>
<li><p>The channel <strong>Mesh</strong> on the <strong>SubMeshes</strong> attribute of the <strong>new T3 Mesh</strong>.</p></li>
</ul>
<p>Generate the compound mesh by double-clicking on the <strong>new T3 Mesh</strong> object and single-clicking on <strong>Run</strong>. Confirm the question box (<em>Continue?</em> &gt; <strong>Yes</strong>) and press <strong>OK</strong> after the mesh generator is finished (<em>Done…</em>). To visualize the resulting <strong>Mesh</strong>, drag it on the <strong>2D View (1)</strong>.</p>
<figure class="align-default" id="bk-mesh-compound">
<img alt="bluekenue generate combined mesh drag and drop" src="../_images/bk-mesh-compound.png" />
<figcaption>
<p><span class="caption-number">Fig. 75 </span><span class="caption-text">The compound mesh after dragging the model outline on the Outline (Value) and the channel Mesh on the SubMeshes attribute of the new T3 Mesh generator object.</span><a class="headerlink" href="#bk-mesh-compound" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="note admonition">
<p class="admonition-title">What is the difference between the channel mesher and the mesh generator?</p>
<p><a class="reference internal" href="#bk-mesh-compound"><span class="std std-numref">Figure 75</span></a> shows that the channel mesh is streamline-adjusted following the channel banks. This kind of mesh is known to be advantageous for computation speed and model stability. Thus, the availability of the channel mesher in BlueKenue<sup>TM</sup> is a strength and the <strong>best argument for not using BASEmesh</strong> in QGIS for the mesh generation.</p>
</div>
<div class="tip admonition">
<p class="admonition-title">Troubles with creating the compound mesh?</p>
<p>Download the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/compound-mesher.t3m">compound-mesher.t3m</a> and the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/compound-mesh.t3s">compound-mesh.t3s</a> objects from the supplemental materials repository. To open the T3 Mesh object from the repository in BlueKenue<sup>TM</sup>, go to <strong>File</strong> &gt; <strong>Open…</strong> &gt; select <strong>2D T3 Mesh (<code class="docutils literal notranslate"><span class="pre">*.t...</span></code>)</strong> as file type and navigate to the download directory.</p>
</div>
</section>
</section>
<section id="selafin">
<span id="bk-slf"></span><h2>SELAFIN<a class="headerlink" href="#selafin" title="Permalink to this headline">#</a></h2>
<section id="open-and-import-ingredients">
<h3>Open and Import Ingredients<a class="headerlink" href="#open-and-import-ingredients" title="Permalink to this headline">#</a></h3>
<p>Whether the mesh was created with BlueKenue<sup>TM</sup> or QGIS (and the BASEmesh plugin), make sure to have now a BlueKenue<sup>TM</sup> workspace with only the XYZ point cloud loaded (see the <a class="reference internal" href="#bk-xyz"><span class="std std-ref">Load XYZ Points</span></a> section). Before a SELAFIN object can be created, the previously created mesh (i.e., either the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/meshes/prepro-tutorial_quality-mesh-utm33n.2dm">quality-mesh.2dm</a> or the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-mesh/compound-mesh.t3s">compound-mesh.t3s</a>) needs to be imported into the WorkSpace in addition to the point cloud. The following instructions show the import and use of the <code class="docutils literal notranslate"><span class="pre">*.2dm</span></code> file:</p>
<ul class="simple">
<li><p>In BlueKenue<sup>TM</sup> go to <strong>File</strong> &gt; <strong>Import</strong> &gt; <strong>SMS 2DM Mesh</strong>.</p></li>
<li><p>In the import window, navigate to the folder where the <code class="docutils literal notranslate"><span class="pre">*.2dm</span></code> file lives, select the <code class="docutils literal notranslate"><span class="pre">*.2dm</span></code> file, and click <strong>Open</strong>.</p></li>
<li><p>When the <em>Reading SMS 2d Mesh File</em> process is <em>Done…</em>, click <strong>OK</strong>.</p></li>
</ul>
<div class="note dropdown admonition">
<p class="admonition-title">How to load a BlueKenue .T3S mesh file?</p>
<p>In contrast to an <a class="reference internal" href="../documentation/glossary.html#term-SMS-2dm"><span class="xref std std-term">SMS 2dm</span></a> (<code class="docutils literal notranslate"><span class="pre">*.2dm</span></code>) file that has to be <em>imported</em>, a <code class="docutils literal notranslate"><span class="pre">*.t3s</span></code> file has to be <strong>opened</strong> in BlueKenue<sup>TM</sup>. To this end, <strong>open</strong> the T3 Mesh (<code class="docutils literal notranslate"><span class="pre">*.t3s</span></code>) from <strong>File</strong> &gt; <strong>Open…</strong> &gt; select <strong>2D T3 Mesh (<code class="docutils literal notranslate"><span class="pre">*.t...</span></code>)</strong> as file type and navigate to the download directory. Select the <code class="docutils literal notranslate"><span class="pre">*.t3s</span></code> mesh file and click <strong>Open</strong>.</p>
</div>
<p>Ignore warning messages regarding the projection, but make sure that BlueKenue<sup>TM</sup> correctly read the mesh coordinates by <strong>dragging</strong> the imported (or opened) mesh onto the <strong>2D View (1)</strong>. The BlueKenue<sup>TM</sup> window should now look similar to <a class="reference internal" href="#bk-imported-mesh"><span class="std std-numref">Fig. 76</span></a>.</p>
<figure class="align-default" id="bk-imported-mesh">
<img alt="bluekenue import open 2dm t3s mesh drag" src="../_images/bk-imported-mesh.png" />
<figcaption>
<p><span class="caption-number">Fig. 76 </span><span class="caption-text">The imported mesh in the 2D View (1).</span><a class="headerlink" href="#bk-imported-mesh" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="create-selafin-object">
<span id="bk-create-slf"></span><h3>Create SELAFIN Object<a class="headerlink" href="#create-selafin-object" title="Permalink to this headline">#</a></h3>
<p>With the open <em>dem.xyz</em> and the imported (or opened) mesh, all ingredients required by a BlueKenue<sup>TM</sup> SELAFIN object are available. Now, create a new SELAFIN object:</p>
<ul class="simple">
<li><p>Go to <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>SELAFIN Object…</strong></p></li>
</ul>
<img alt="../_images/bk-create-selafin-object.png" src="../_images/bk-create-selafin-object.png" />
<ul class="simple">
<li><p>In the popup window (<em>Properties of:new Selafin</em>) click <strong>OK</strong> and a <strong>new Selafin</strong> object will appear in the WorkSpace’s <strong>Data Items</strong>.</p></li>
<li><p><strong>Right-click</strong> on the <strong>new Selafin</strong> object and select <strong>Add Variable…</strong></p></li>
<li><p>Take the following action in the <strong>Add New SELAFIN Variable</strong> window:</p>
<ul>
<li><p>In the <strong>Mesh</strong> field, select the above-imported (or opened) mesh (e.g., <code class="docutils literal notranslate"><span class="pre">prepro-tutorial_quality-mesh-utm33n.2dm</span></code>).</p></li>
<li><p>In the <strong>Name</strong> field, select <strong>BOTTOM</strong>.</p></li>
<li><p>In the <strong>Units</strong> field, select <strong>M</strong> (i.e., meters).</p></li>
<li><p>Keep all other defaults and click <strong>OK</strong>.</p></li>
</ul>
</li>
<li><p>Save the new Selafin object by highlighting it in the <strong>Data Item</strong> tree of the WorkSpace and clicking the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol. Give the mesh a meaningful and short name, such as <code class="docutils literal notranslate"><span class="pre">qgismesh.slf</span></code>.</p></li>
</ul>
</section>
<section id="create-2d-interpolator">
<span id="bk-2dinterp"></span><h3>Create 2D Interpolator<a class="headerlink" href="#create-2d-interpolator" title="Permalink to this headline">#</a></h3>
<p>A 2D Interpolator object is required to map elevation information onto the Selafin mesh. To this end, create a new 2D Interpolator object and map elevations onto the BOTTOM mesh:</p>
<ul class="simple">
<li><p>Go to <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>2D Interpolator…</strong> and a <strong>new 2D Interpolator</strong> object will appear in the <strong>Data Items</strong> of the WorkSpace.</p></li>
</ul>
<img alt="../_images/bk-create-2Dinterpolator.png" src="../_images/bk-create-2Dinterpolator.png" />
<ul class="simple">
<li><p><strong>Drag dem (Z)</strong> (i.e., the above-opened <em>dem.xyz</em> pointcloud) onto the <strong>new 2D Interpolator</strong> object (red arrow in <a class="reference internal" href="#bk-mesh-interpolated"><span class="std std-numref">Fig. 77</span></a>).</p></li>
<li><p><strong>Highlight</strong> (click on) the <strong>BOTTOM (Anonymous Attribute)</strong> mesh attribute of the above-created SELAFIN object (e.g., called <code class="docutils literal notranslate"><span class="pre">qgismesh</span></code>).</p></li>
<li><p>With the mesh highlighted, go to the <strong>Tools</strong> top menu &gt; <strong>Map Object…</strong>.</p></li>
<li><p>In the opening <strong>Available Objects</strong> window select the <strong>new 2D Interpolator</strong> and click <strong>OK</strong>.</p></li>
<li><p>Once the <em>Processing…</em> finished, click <strong>OK</strong>.</p></li>
<li><p>Save the final meshes:</p>
<ul>
<li><p>The BOTTOM mesh is a BlueKenue<sup>TM</sup> <code class="docutils literal notranslate"><span class="pre">*.t3s</span></code> mesh object; to save it, highlight it in the <strong>Data Items</strong> tree and click on the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol. Then, save the mesh, for instance, as <code class="docutils literal notranslate"><span class="pre">BOTTOM.t3s</span></code> file.</p></li>
<li><p>To save the Selafin mesh in its current (with interpolated elevations) state, highlight the Selafin object (e.g., <code class="docutils literal notranslate"><span class="pre">qgismesh</span></code>) and click on the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol. This action overwrites the above-saved <code class="docutils literal notranslate"><span class="pre">*.slf</span></code> file (click <strong>Yes</strong> to confirm replacing it).</p></li>
</ul>
</li>
</ul>
<p>To verify if the 2D interpolator correctly interpolated the elevations on the BOTTOM mesh, drag the BOTTOM mesh onto the <strong>2D View (1)</strong>. Uncheck the visibility of dem (Z) and the imported (or opened) mesh with a right-click on these elements in the 2D View (1) tree and <strong>deselect</strong> the <strong>Visible</strong> entry. Thus, only the height-interpolated mesh should be visible now, as indicated in <a class="reference internal" href="#bk-mesh-interpolated"><span class="std std-numref">Fig. 77</span></a>. If the <strong>interpolation has been successful, the mesh is displayed in a variety of (rainbow) colors</strong>. Otherwise, <strong>if the mesh is</strong> completely, monotonously <strong>monochrome (red)</strong>, the elevation <strong>interpolation</strong> has <strong>not</strong> been <strong>successful</strong> and must be repeated (the numerical model cannot work properly without elevation information).</p>
<figure class="align-default" id="bk-mesh-interpolated">
<img alt="bluekenue 2dm t3s mesh interpolate height elevation 2D interpolator map object" src="../_images/bk-mesh-interpolated.png" />
<figcaption>
<p><span class="caption-number">Fig. 77 </span><span class="caption-text">The height-interpolated mesh in the 2D View (1) with indication of drag and drop actions for running the object mapping with a new 2D Interpolator object.</span><a class="headerlink" href="#bk-mesh-interpolated" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="tip admonition">
<p class="admonition-title">Troubles with creating the Selafin mesh and or the height interpolation?</p>
<p>Download the BOTTOM mesh and the SELAFIN object from the supplemental materials repository:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/BOTTOM.t3s">Download BOTTOM.t3s</a>;</p></li>
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/qgismesh.slf">Download qgismesh.slf</a> (<strong>EPSG:6173</strong> - ETRS 89 / UTM zone 33N).</p></li>
</ul>
</div>
</section>
</section>
<section id="boundary-conditions-conlim-cli">
<span id="bk-bc"></span><h2>Boundary Conditions (Conlim - CLI)<a class="headerlink" href="#boundary-conditions-conlim-cli" title="Permalink to this headline">#</a></h2>
<section id="create-conlim-object">
<h3>Create Conlim Object<a class="headerlink" href="#create-conlim-object" title="Permalink to this headline">#</a></h3>
<p>TELEMAC needs to know how to treat the outer edges of the model (mesh). For this purpose, boundary conditions have to be assigned to all nodes that constitute the <code class="docutils literal notranslate"><span class="pre">*.slf</span></code>mesh outline:</p>
<ul class="simple">
<li><p>Go to <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Boundary Conditions (Conlim )…</strong> and a <strong>new 2D Interpolator</strong> object will appear in the <strong>Data Items</strong> of the WorkSpace.</p></li>
</ul>
<img alt="../_images/bk-create-bc.png" src="../_images/bk-create-bc.png" />
<ul class="simple">
<li><p>In the opening popup window (<strong>Available t3s Objects</strong>), select the above-created <strong>BOTTOM</strong> mesh (i.e., the mesh with elevation information) and click <strong>OK</strong>. A new <strong>BOTTOM_BC</strong> object will occur in the <strong>Data Items</strong> tree of the WorkSpace.</p></li>
<li><p>Drag the new <strong>BOTTOM_BC</strong> object onto the <strong>2D View (1)</strong>, which will <strong>enable the <em>prescription</em> of boundary condition types</strong> (details in the next section).</p></li>
</ul>
<p><a class="reference internal" href="#bk-bc-types"><span class="std std-numref">Figure 78</span></a> illustrates the new BOTTOM_BC object in the 2D View (1) and indicates where upstream and downstream liquid boundaries will be applied in the next section.</p>
<figure class="align-default" id="bk-bc-types">
<img alt="bluekenue boundary conditions conlim create upstream downstream" src="../_images/bk-bc-types.png" />
<figcaption>
<p><span class="caption-number">Fig. 78 </span><span class="caption-text">The new Boundary Conditions (Conlim) object (BOTTOM_BC) in the 2D View (1) with a qualitative overview of the position of upstream and downstream boundaries where prescribed flow (Q) and prescribed flow (Q) and Depth (H) will be applied later in the TELEMAC setup.</span><a class="headerlink" href="#bk-bc-types" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>To <strong>save the new BOTTOM_BC object</strong>, highlight it in the <strong>Data Items</strong> tree and click on the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol. Define a filename such as <strong><code class="docutils literal notranslate"><span class="pre">boundaries.bc2</span></code></strong>. As a result of saving the object, the BOTTOM_BC object takes on the new file name (e.g., <strong>boundaries</strong>).</p>
</section>
<section id="define-liquid-boundaries">
<span id="bk-liquid-bc"></span><h3>Define Liquid Boundaries<a class="headerlink" href="#define-liquid-boundaries" title="Permalink to this headline">#</a></h3>
<p>The default boundary type of the <strong>boundaries</strong> object is <strong>Closed boundary (wall)</strong>. Therefore, to enable mass (i.e., water, sediment, and/or tracer) fluxes through the model, at least two openings must be drawn into the closed boundary. For this purpose, at least one inflow and one outflow open boundary for liquids must be defined. This tutorial uses this minimum number of required open boundaries (i.e., one upstream inflow and one downstream outflow boundary), which are indicated in <a class="reference internal" href="#bk-bc-types"><span class="std std-numref">Fig. 78</span></a>.</p>
<div class="admonition-liquid-boundaries-must-be-defined-in-bluekenue admonition">
<p class="admonition-title">Liquid boundaries must be defined in BlueKenue</p>
<p>Even though the liquid boundaries are already defined in QGIS (see the <a class="reference internal" href="#tm-bm-liquid-boundaries"><span class="std std-ref">QGIS section on Liquid Boundaries</span></a>), it is always necessary to define the liquid boundaries in BlueKenue<sup>TM</sup> to fit the node numbers (IDs) of the Selafin mesh.</p>
</div>
<p>The upstream (inflow) liquid boundary will constitute an <strong>Open boundary with prescribed Q</strong> (discharge) and the downstream outflow (liquid) boundary will constitute an <strong>Open boundary with prescribed Q and H</strong> (i.e., prescribed <a class="reference internal" href="../documentation/glossary.html#term-Rating-curve"><span class="xref std std-term">Rating curve</span></a> / <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a>). These types of boundary conditions are commonly used in practice, with the downstream boundary typically chosen to be at a gauging station where a <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a> (<a class="reference internal" href="../documentation/glossary.html#term-Rating-curve"><span class="xref std std-term">Rating curve</span></a>) has been calibrated with historic data. To assign the two liquid boundary lines, zoom into the downstream and upstream regions indicated in  <a class="reference internal" href="#bk-bc-types"><span class="std std-numref">Fig. 78</span></a> and create both boundaries as follows (toggle tabs):</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Upstream boundary</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p>Zoom into the <strong>upstream</strong> region indicated in  <a class="reference internal" href="#bk-bc-types"><span class="std std-numref">Fig. 78</span></a>.</p></li>
<li><p>Locate the main channel banks corresponding to the breaklines drawn in QGIS (<a class="reference internal" href="#tm-bm-breaklines"><span class="std std-ref">see above</span></a>) or BlueKenue<sup>TM</sup> (<a class="reference internal" href="#bk-draw-ol"><span class="std std-ref">see above</span></a>).</p></li>
<li><p><strong>Double-click</strong> on a <strong>node at one bank</strong> of the model outline (no matter what bank), then <strong>hold</strong> the <strong>Shift</strong> key and <strong>double-click</strong> on a <strong>node at the other bank</strong> to highlight the inflow (purple) line (see <a class="reference internal" href="#bk-boundary-us"><span class="std std-numref">Fig. 79</span></a>).</p></li>
<li><p><strong>Right-click</strong> on the purple inflow line and select <strong>Add Boundary Segment</strong>.</p></li>
<li><p>In the opening window (<strong>CONLIM Boundary Segment Editor</strong>) make the following settings:</p>
<ul>
<li><p>Define <strong>Boundary Name</strong> as <code class="docutils literal notranslate"><span class="pre">upstream</span></code>.</p></li>
<li><p>In the <strong>Boundary Code</strong> field select <code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">boundary</span> <span class="pre">with</span> <span class="pre">prescribed</span> <span class="pre">Q</span></code>.</p></li>
<li><p>Keep all other defaults and click <strong>OK</strong>.</p></li>
</ul>
</li>
<li><p><strong>Save</strong> the <strong>boundaries</strong> object by clicking on the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol and confirm overwriting <code class="docutils literal notranslate"><span class="pre">boundaries.bc2</span></code> (i.e., click <strong>Yes</strong>).</p></li>
</ul>
<p><strong>Switch to</strong> the <strong>Downstream boundary tab</strong> to define the outflow conditions according to <a class="reference internal" href="#bk-boundary-ds"><span class="std std-numref">Fig. 80</span></a>.</p>
<figure class="align-default" id="bk-boundary-us">
<img alt="bluekenue boundary conditions conlim create upstream prescribed discharge flow" src="../_images/bk-bm-boundary-us.png" />
<figcaption>
<p><span class="caption-number">Fig. 79 </span><span class="caption-text">The upstream boundary definition. Double-click on a node at one bank, then hold the <strong>Shift</strong> key and double-click on a node at the other bank to highlight the inflow (purple) line. Note that BOTTOM_BC might appear with the name <em>boundaries</em> if the object was saved as <em>boundaries.bc2</em>.</span><a class="headerlink" href="#bk-boundary-us" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Downstream boundary</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p>Zoom into the <strong>downstream</strong> region indicated in <a class="reference internal" href="#bk-bc-types"><span class="std std-numref">Fig. 78</span></a>.</p></li>
<li><p>Locate the main channel banks corresponding to the breaklines drawn in QGIS (<a class="reference internal" href="#tm-bm-breaklines"><span class="std std-ref">see above</span></a>) or BlueKenue<sup>TM</sup> (<a class="reference internal" href="#bk-draw-ol"><span class="std std-ref">see above</span></a>), which are indicated by the red-dotted lines in <a class="reference internal" href="#bk-boundary-ds"><span class="std std-numref">Fig. 80</span></a>.</p></li>
<li><p><strong>Double-click</strong> on a <strong>node at one bank</strong> of the model outline (no matter what bank), then <strong>hold</strong> the <strong>Shift</strong> key and <strong>double-click</strong> on a <strong>node at the other bank</strong> to highlight the outflow (purple) line (see <a class="reference internal" href="#bk-boundary-ds"><span class="std std-numref">Fig. 80</span></a>).</p></li>
<li><p><strong>Right-click</strong> on the purple outflow line and select <strong>Add Boundary Segment</strong>.</p></li>
<li><p>In the opening window (<strong>CONLIM Boundary Segment Editor</strong>) make the following settings:</p>
<ul>
<li><p>Define <strong>Boundary Name</strong> as <code class="docutils literal notranslate"><span class="pre">downstream</span></code>.</p></li>
<li><p>In the <strong>Boundary Code</strong> field select <code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">boundary</span> <span class="pre">with</span> <span class="pre">prescribed</span> <span class="pre">Q</span> <span class="pre">and</span> <span class="pre">H</span></code>.</p></li>
<li><p>Keep all other defaults and click <strong>OK</strong>.</p></li>
</ul>
</li>
<li><p><strong>Save</strong> the <strong>boundaries</strong> object by clicking on the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol and confirm overwriting <code class="docutils literal notranslate"><span class="pre">boundaries.bc2</span></code> (i.e., click <strong>Yes</strong>).</p></li>
</ul>
<figure class="align-default" id="bk-boundary-ds">
<img alt="bluekenue boundary conditions conlim create upstream prescribed discharge depth flow" src="../_images/bk-bm-boundary-ds.png" />
<figcaption>
<p><span class="caption-number">Fig. 80 </span><span class="caption-text">The downstream boundary definition. Double-click on a node at one bank, then hold the <strong>Shift</strong> key and double-click on a node at the other bank to highlight the outflow (purple) line. Note that BOTTOM_BC might appear with the name <em>boundaries</em> if the object was saved as <em>boundaries.bc2</em>.</span><a class="headerlink" href="#bk-boundary-ds" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
<p>Ultimately, TELEMAC will need a <strong><code class="docutils literal notranslate"><span class="pre">*.cli</span></code> file (<em>Conlim Table</em>)</strong> that can be created by</p>
<ul class="simple">
<li><p>highlighting the <strong>boundaries (LIHBOR)</strong> entry of the <strong>boundaries</strong> (or BOTTOM_BC) object in the <strong>Data Items</strong> tree and</p></li>
<li><p>pressing the disk <img alt="../_images/bk-sym-save.png" src="../_images/bk-sym-save.png" /> symbol (see <a class="reference internal" href="#bk-bc-fin"><span class="std std-numref">Fig. 81</span></a>).</p></li>
</ul>
<p>Save the boundaries file, for instance, as <strong>boundaries.cli</strong>.</p>
<figure class="align-default" id="bk-bc-fin">
<img alt="bluekenue liquid boundary conditions conlim upstream inflow outflow downstream cli" src="../_images/bk-bc-fin.png" />
<figcaption>
<p><span class="caption-number">Fig. 81 </span><span class="caption-text">The finalized boundary conditions are saved in a .CLI file by highlighting the <strong>boundaries (LIHBOR)</strong> entry of the <strong>boundaries</strong> (or BOTTOM_BC) object in the <strong>Data Items</strong> tree.</span><a class="headerlink" href="#bk-bc-fin" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="tip admonition">
<p class="admonition-title">Troubles with creating and defining the liquid boundaries?</p>
<p>Download the <strong>boundaries</strong> (BOTTOM_BC) BlueKenue<sup>TM</sup> and TELEMAC boundaries (LIHBOR)-CLI objects from the supplemental materials repository:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/boundaries.bc2">Download boundaries.bc2</a>;</p></li>
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/boundaries.cli">Download boundaries.cli</a>.</p></li>
</ul>
</div>
<p>The here created Selafin/Serafin (<code class="docutils literal notranslate"><span class="pre">*.slf</span></code>) and boundary conditions (<code class="docutils literal notranslate"><span class="pre">*.cli</span></code>) files are the main products that are needed for running any other SELAFIN-based TELEMAC tutorial in this eBook. The <a class="reference internal" href="telemac2d-steady.html#telemac2d-steady"><span class="std std-ref">steady 2d</span></a> tutorial assigns a constant discharge at the upstream (inflow) and a constant discharge plus constant depth at the downstream (outflow) boundaries. To perform an unsteady calculation, the steady flow rates can be replaced with a <code class="docutils literal notranslate"><span class="pre">*.qsl</span></code> ASCII text file. To this end, the <code class="docutils literal notranslate"><span class="pre">*.cli</span></code> file can be easily adapted any time later with a basic text editor (e.g., <a class="reference internal" href="../get-started/others.html#npp"><span class="std std-ref">NotepadPlusPlus (Text Editor)</span></a> on Windows or <a class="reference internal" href="../get-started/ide.html#install-atom"><span class="std std-ref">Atom</span></a>).</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hydro-informatics/jupyter-python-course",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./numerics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="telemac.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">TELEMAC</p>
      </div>
    </a>
    <a class="right-next"
       href="telemac2d.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Telemac2d</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Pre-processing</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#qgis">QGIS</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-and-setup-a-new-project">Create and Setup a New Project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#third-party-plugins">Third-party Plugins</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-dem">Load DEM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-snapping">Enable Snapping</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-boundaries-and-breaklines">Model Boundaries and Breaklines</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#breaklines-and-model-outline">Breaklines and Model Outline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#liquid-boundaries">Liquid Boundaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#region-point-markers">Region Point Markers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quality-meshing-2dm">Quality Meshing (*.2dm)</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bluekenue">BlueKenue</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-started">Get Started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#files-and-objects">Files and Objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-xyz-points">Load XYZ Points</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bluekenue-meshing-optional">BlueKenue Meshing (Optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#draw-model-boundary-closed-line">Draw Model Boundary (Closed Line)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#draw-open-lines-of-the-channel-banks">Draw Open Lines of the Channel Banks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-mesh-es">Generate Mesh(es)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selafin">SELAFIN</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-and-import-ingredients">Open and Import Ingredients</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-selafin-object">Create SELAFIN Object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-2d-interpolator">Create 2D Interpolator</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boundary-conditions-conlim-cli">Boundary Conditions (Conlim - CLI)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-conlim-object">Create Conlim Object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-liquid-boundaries">Define Liquid Boundaries</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Sebastian Schwindt, Beatriz Negreiros, Federica Scolari, Ricardo Barros
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>


<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Unsteady 2d &#8212; Hydro-Informatics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"TeX": {"Macros": {"N": "\\mathbb{N}", "floor": ["\\lfloor#1\\rfloor", 1], "bmat": ["\\left[\\begin{array}"], "emat": ["\\end{array}\\right]"]}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'numerics/telemac2d-unsteady';</script>
    <link rel="canonical" href="https://hydro-informatics.com/numerics/telemac2d-unsteady.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Telemac3d" href="telemac3d.html" />
    <link rel="prev" title="Steady 2d" href="telemac2d-steady.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/icon.jpg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/icon.jpg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../lectures/classroom.html">The Virtual Classroom</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../lectures/principles.html">Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/lectures.html">Lectures and Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lectures/take_seat.html">Take a Seat</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../get-started/software.html">Software Resources</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-started/vm.html">Virtual Machines and Linux</a></li>

<li class="toctree-l2"><a class="reference internal" href="../get-started/ide.html">Integrated Development Environments (IDEs)</a></li>




<li class="toctree-l2"><a class="reference internal" href="../python-basics/pyinstall.html">Python (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/git.html">Version Control : git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/geo.html">Geospatial Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/install-openfoam.html">OpenFOAM (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/install-telemac.html">TELEMAC (Installation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/others.html">Other Software Resources</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/python.html">First Steps</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pybase.html">Hello Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyerror.html">Errors, Logging, and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyloop.html">Loops and Conditional Statements</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/modularize.html">Object Orientation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyfun.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pypckg.html">Packages, Modules and Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/classes.html">Object Orientation and Classes</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../python-basics/data-handling.html">Data and File Handling</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/pynum.html">Data Files, NumPy &amp; Pandas</a></li>





<li class="toctree-l2"><a class="reference internal" href="../jupyter/xml.html">Structured Data (XML, xlsx &amp; JSON)</a></li>

<li class="toctree-l2"><a class="reference internal" href="../jupyter/pyplot.html">Plotting</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/pystyle.html">Code Style and Conventions</a></li>

<li class="toctree-l1"><a class="reference internal" href="../jupyter/gui.html">Graphical User Interfaces (GUIs)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/python-exercises.html">Python Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-ms.html">1d Hydraulics (Manning-Strickler Formula)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-sp.html">Reservoir Volume (Sequent Peak Algorithm)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-floods.html">Flood Return Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-sediment.html">1d Sediment Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-gui.html">Create a GUI</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Geospatial Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../geopy/geospatial-data.html">Geospatial Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/use-qgis.html">QGIS Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geopy/drone-processing.html">Process Drone (UAV) Imagery</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../geopy/geo-python.html">Geospatial Python</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../geopy/geo-pckg.html">Geospatial Open Source Python Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-shp.html">Shapefile (Vector) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-raster.html">Raster (Grid) Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-convert.html">Vectorize and Rasterize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jupyter/geo-arcpy.html">The Commercial arcpy Library</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/geo-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-geco.html">Script a Habitat Suitability Map</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numerical Modeling</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="numerical-modeling.html">Principles</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="basement.html">BASEMENT</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="pre-qgis-bm.html">Pre-processing with QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="basement2d.html">Run and Check a Steady 2d Simulation</a></li>



</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="telemac.html">TELEMAC</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pre-slf-tm.html">Pre-processing</a></li>


<li class="toctree-l2 current active has-children"><a class="reference internal" href="telemac2d.html">Telemac2d</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="telemac2d-steady.html">Steady 2d</a></li>



<li class="toctree-l3 current active"><a class="current reference internal" href="#">Unsteady 2d</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="telemac3d.html">Telemac3d</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="telemac3d-slf.html">Steady 3d (SLF - Selafin)</a></li>
<li class="toctree-l3"><a class="reference internal" href="telemac3d-med.html">Steady 3d (MED and Salome)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="telemac-gaia.html">Gaia (Morphodynamics)</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="gaia-coupling.html">Introduction and Coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-basics.html">Basic Setup of Gaia</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-bedload.html">Bedload</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-suspended.html">Suspended Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="gaia-run.html">Run and Analyze</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/data-science.html">Fundamentals (Coming soon)</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../datascience/py-requirements.html">Python Requirements</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../datascience/data-prepro.html">Data Pre-Processing</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../datascience/data-types.html">The Nature of Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/data-cleaning.html">Dataset Cleaning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datascience/dimensional-analysis.html">Dimensional Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../datascience/theory.html">Techniques (Coming soon)</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../datascience/techniques.html">Overview of Fundamental Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datascience/calibrate-validate.html">Model Calibration and Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datascience/morphology-predictor-svm.html">Support Vector Machine (SVM)</a></li>


</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../documentation/documentation.html">How to Markdown and Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/notation.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/bibliography.html">References</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../exercises/docs-exercises.html">Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../exercises/ex-git.html">Git and Markdown</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Troubleshoot</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-programming.html">Programming Tools and IDEs</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-anaconda.html">Debugging Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-python.html">Debugging Python Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-jupyter.html">Debugging Jupyter</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-numerical-models.html">Numerical Models</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-basement.html">Debugging BASEMENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-telemac.html">Debugging TELEMAC</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-os.html">Operating Systems (Linux and VMs)</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-linux.html">Debugging Debian Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-vm.html">Debugging Virtual Machines</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshoot/dbg-scilife.html">Science Life Hacks</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot/dbg-zotero.html">Zotero Utilities</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Disclaimer and License</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../terms/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../terms/disclaimer.html">Disclaimer</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/hydro-informatics/jupyter-python-course" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/numerics/telemac2d-unsteady.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Unsteady 2d</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-started">Get Started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-adaptations">Model Adaptations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hotstart-initial-conditions">Hotstart Initial Conditions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-parameters">General Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-boundaries">Open Boundaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numerical-parameters">Numerical Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#control-sections">Control Sections</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-telemac2d-unsteady">Run Telemac2d Unsteady</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#post-processing">Post-processing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-boundary-flows">Open Boundary Flows</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization-with-qgis">Visualization with QGIS</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="unsteady-2d">
<span id="chpt-unsteady"></span><h1>Unsteady 2d<a class="headerlink" href="#unsteady-2d" title="Permalink to this headline">#</a></h1>
<div class="admonition-requirements admonition">
<p class="admonition-title">Requirements</p>
<p>This tutorial is designed for <strong>advanced modelers</strong> and before diving into this tutorial make sure to complete the <a class="reference internal" href="pre-slf-tm.html#slf-prepro-tm"><span class="std std-ref">TELEMAC pre-processing</span></a> and <a class="reference internal" href="telemac2d-steady.html#telemac2d-steady"><span class="std std-ref">Telemac2d steady hydrodynamic modeling</span></a> tutorials.</p>
<p>The case featured in this tutorial was established with the following software:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../get-started/others.html#npp"><span class="std std-ref">Notepad++</span></a> text editor (any other text editor will do just as well.)</p></li>
<li><p>TELEMAC v8p2r0 (<a class="reference internal" href="../get-started/install-telemac.html#modular-install"><span class="std std-ref">stand-alone installation</span></a>).</p></li>
<li><p><a class="reference internal" href="../get-started/geo.html#qgis-install"><span class="std std-ref">QGIS</span></a> and the <a class="reference internal" href="pre-slf-tm.html#tm-qgis-plugins"><span class="std std-ref">PostTelemac plugin</span></a>.</p></li>
<li><p>Debian Linux 10 (Buster) installed on a Virtual Machine (read more in the <a class="reference internal" href="../get-started/vm.html#chpt-vm-linux"><span class="std std-ref">software chapter</span></a>).</p></li>
</ul>
</div>
<section id="get-started">
<h2>Get Started<a class="headerlink" href="#get-started" title="Permalink to this headline">#</a></h2>
<p>The <a class="reference internal" href="telemac2d-steady.html#telemac2d-steady"><span class="std std-ref">steady 2d tutorial</span></a> hypothesizes that the discharge of a river is constant over time. However, the discharge of a river is never truly constant (i.e., never steady) and varies slightly from second to second, even in flow-controlled rivers. Alas, the inherently unsteady flow regime of rivers cannot realistically be modeled with most software. As a result, we must discretize time-dependent discharge (e.g., a flood hydrograph) in a numerical model as a series of steady discharges. <a class="reference internal" href="#unsteady-hydrograph"><span class="std std-numref">Figure 89</span></a> illustrates the discretization of a natural flood hydrograph into steps of steady flows, which will be used in this tutorial. Note that the hydrograph <strong>starts at Time = 15000</strong>, which is the result of the steady2d simulation end state with dry initialization. Thus, the end time of T=15000 represents the end of the dry steady model initialization, as described in the <a class="reference internal" href="telemac2d-steady.html#tm2d-dry"><span class="std std-ref">Re-Initialize Dry</span></a> section (results can be downloaded, see below).</p>
<figure class="align-default" id="unsteady-hydrograph">
<img alt="unsteady flow discharge quasi steady telemac telemac2d hydrodynamic" src="../_images/unsteady-hydrograph.png" />
<figcaption>
<p><span class="caption-number">Fig. 89 </span><span class="caption-text">The discretization of a natural hydrograph into steps of steady flows (qualitative hydrograph for this tutorial).</span><a class="headerlink" href="#unsteady-hydrograph" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>This tutorial shows how a quasi-steady discharge hydrograph can be implemented in a hydrodynamic Telemac2d simulation through the definition of an inflow sequence (red circles in <a class="reference internal" href="#unsteady-hydrograph"><span class="std std-numref">Fig. 89</span></a>). The tutorial builds on the steady simulation of a discharge of 35 m<span class="math notranslate nohighlight">\(^3\)</span>/s and requires the following data from the <a class="reference internal" href="pre-slf-tm.html#slf-prepro-tm"><span class="std std-ref">pre-processing</span></a> and <a class="reference internal" href="telemac2d-steady.html#telemac2d-steady"><span class="std std-ref">steady2d</span></a> tutorials, which can be downloaded by clicking on the filenames:</p>
<ul class="simple">
<li><p>The computational mesh <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/bk-slf/qgismesh.slf">qgismesh.slf</a> file  (uses <strong>EPSG:6173</strong> - ETRS 89 / UTM zone 33N).</p></li>
<li><p>The boundary definitions <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/steady2d-tutorial/boundaries.cli">boundaries.cli</a> file.</p></li>
<li><p>The results file <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/r2dsteady.slf">r2dsteady.slf</a> of the <a class="reference internal" href="telemac2d-steady.html#tm2d-dry"><span class="std std-ref">dry initialized steady 2d simulation</span></a> ending at <code class="docutils literal notranslate"><span class="pre">T=15000</span></code> for 35 m<span class="math notranslate nohighlight">\(^3\)</span>/s.</p></li>
</ul>
<p>Consider saving the files in a new folder, such as <code class="docutils literal notranslate"><span class="pre">/unsteady2d-tutorial/</span></code>.</p>
<div class="admonition-unsteady-simulation-file-repository admonition">
<p class="admonition-title">Unsteady simulation file repository</p>
<p>The simulation files used in this tutorial are available at <a class="github reference external" href="https://github.com/hydro-informatics/telemac/tree/main/unsteady2d-tutorial/">hydro-informatics/telemac</a>.</p>
</div>
</section>
<section id="model-adaptations">
<span id="prepro-unsteady"></span><h2>Model Adaptations<a class="headerlink" href="#model-adaptations" title="Permalink to this headline">#</a></h2>
<p>The integration of unsteady flows requires the adaptation of keywords and additional keywords (e.g., for linking liquid boundary files) in the steering (<code class="docutils literal notranslate"><span class="pre">*.cas</span></code>) file from the steady2d tutorial (<a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/steady2d-tutorial/steady2d.cas">download steady2d.cas</a>).</p>
<div class="admonition-view-the-unsteady-steering-file admonition">
<p class="admonition-title">View the unsteady steering file</p>
<p>To view the integration of the unsteady simulation keywords in the steering file, <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/unsteady2d.cas">download <em>unsteady2d.cas</em></a>.</p>
</div>
<section id="hotstart-initial-conditions">
<span id="tm2d-hotstart"></span><h3>Hotstart Initial Conditions<a class="headerlink" href="#hotstart-initial-conditions" title="Permalink to this headline">#</a></h3>
<p><strong>The following descriptions refer to section 4.1.3 in the <a class="reference external" href="https://gitlab.pam-retd.fr/otm/telemac-mascaret/-/blob/v8p4r0/documentation/telemac2d/user/telemac2d_user_v8p4.pdf">Telemac2d manual</a>.</strong></p>
<p>To speed up the calculations and provide a well-converging baseline for the quasi-steady calculations, this tutorial re-uses the output of the steady 2d simulation with dry initial conditions (see the <a class="reference internal" href="telemac2d-steady.html#tm2d-dry"><span class="std std-ref">Re-Initialize Dry</span></a> section). This type of model initialization is also called <em>hotstart</em>. To hotstart the simulation, the steady results file <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/r2dsteady.slf">r2dsteady.slf</a> needs to be defined as <strong>PREVIOUS COMPUTATION FILE</strong>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">COMPUTATION</span><span class="w"> </span><span class="n">CONTINUED</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">YES</span>
<span class="n">PREVIOUS</span><span class="w"> </span><span class="n">COMPUTATION</span><span class="w"> </span><span class="k">FILE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">r2dsteady</span><span class="p">.</span><span class="n">slf</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class="n">CMS</span><span class="w"> </span><span class="n">steady</span><span class="w"> </span><span class="n">simulation</span>
<span class="o">/</span><span class="w"> </span><span class="n">INITIAL</span><span class="w"> </span><span class="nb">TIME </span><span class="n">SET</span><span class="w"> </span><span class="n">TO</span><span class="w"> </span><span class="n">ZERO</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">restarting</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mi">15000</span>
</pre></div>
</div>
<p>In addition, an <strong>INITIAL TIME SET TO ZERO</strong> keyword may be defined  to reset the time from the previous computation file from <code class="docutils literal notranslate"><span class="pre">15000</span></code> to <code class="docutils literal notranslate"><span class="pre">0</span></code>. However, this tutorial does not use this option and continues at timestep 15000.
To avoid ambiguous definitions of initial conditions, <strong>deactivate</strong> (i.e., delete or comment out lines with a <code class="docutils literal notranslate"><span class="pre">/</span></code>) a little further down in the steering file the <strong>INITIAL … keywords</strong>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="w"> </span><span class="n">INITIAL</span><span class="w"> </span><span class="n">CONDITIONS</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;CONSTANT DEPTH&#39;</span>
<span class="o">/</span><span class="w"> </span><span class="n">INITIAL</span><span class="w"> </span><span class="n">DEPTH</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="general-parameters">
<h3>General Parameters<a class="headerlink" href="#general-parameters" title="Permalink to this headline">#</a></h3>
<p>To simulate the hydrograph shown in <a class="reference internal" href="#unsteady-hydrograph"><span class="std std-numref">Fig. 89</span></a>, the simulation must run for at least 15000 time steps (i.e., from <code class="docutils literal notranslate"><span class="pre">T=15000</span></code> to <code class="docutils literal notranslate"><span class="pre">T=30000</span></code>). Since printing out (intermediate) results has a significant effect on computational speed, increase the graphic printout timestep to <code class="docutils literal notranslate"><span class="pre">500</span></code> (i.e., decrease the printout frequency compared to <code class="docutils literal notranslate"><span class="pre">200</span></code> used for the steady simulation):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="nb">TIME </span><span class="n">STEP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.</span>
<span class="n">NUMBER</span><span class="w"> </span><span class="n">OF</span><span class="w"> </span><span class="nb">TIME </span><span class="n">STEPS</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">15000</span>
<span class="n">GRAPHIC</span><span class="w"> </span><span class="n">PRINTOUT</span><span class="w"> </span><span class="n">PERIOD</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">500</span>
<span class="n">LISTING</span><span class="w"> </span><span class="n">PRINTOUT</span><span class="w"> </span><span class="n">PERIOD</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">500</span>
</pre></div>
</div>
</section>
<section id="open-boundaries">
<span id="tm2d-liq-file"></span><h3>Open Boundaries<a class="headerlink" href="#open-boundaries" title="Permalink to this headline">#</a></h3>
<p>This section features the implementation of quasi-steady (unsteady) flow conditions at the open liquid boundaries with a time-dependent inflow hydrograph and a downstream <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a>  (recall the rationales behind the choice of boundary types from the <a class="reference internal" href="pre-slf-tm.html#bk-liquid-bc"><span class="std std-ref">pre-processing tutorial</span></a>).</p>
<hr class="docutils" />
<p><strong>Define a Quasi-steady Hydrograph</strong></p>
<p>With the dry-initialized model ending at T=15000, the hydrograph needs to start at <code class="docutils literal notranslate"><span class="pre">15000</span></code>, even though the model start will represent time <em>zero</em> of the unsteady simulation. To implement the triangular-shaped hydrograph shown in <a class="reference internal" href="#unsteady-hydrograph"><span class="std std-numref">Fig. 89</span></a>, <strong>create a new file called <code class="docutils literal notranslate"><span class="pre">inflows.liq</span></code></strong> in the simulation folder. Open the new <code class="docutils literal notranslate"><span class="pre">inflows.liq</span></code> file in a text editor and add the red-circled points in <a class="reference internal" href="#unsteady-hydrograph"><span class="std std-numref">Fig. 89</span></a> as time-dependent flow information at the <strong>upstream (1)</strong> and <strong>downstream (2)</strong> open (liquid) boundaries. In this file:</p>
<ul class="simple">
<li><p>Add a file header starting with <code class="docutils literal notranslate"><span class="pre">#</span></code> signs (commented lines ignored by TELEMAC).</p></li>
<li><p>Implement 2 columns (for time <strong>T</strong> and upstream inflow rate <strong>Q(1)</strong>).</p></li>
<li><p>Separate the columns either with <em>spaces</em>.</p></li>
<li><p>The first column must be time <code class="docutils literal notranslate"><span class="pre">T</span></code> with strictly monotonously increasing values and the last time value must be greater than or equal to the last simulation timestep.</p></li>
</ul>
<div class="admonition-how-does-telemac-count-open-liquid-boundaries admonition">
<p class="admonition-title">How does TELEMAC count open (liquid) boundaries?</p>
<p>Recall the information provided in the comment box in the <a class="reference internal" href="telemac2d-steady.html#tm2d-bounds"><span class="std std-ref">steady2d tutorial</span></a>.</p>
</div>
<p>Thus, the <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/inflows.liq">inflows.liq</a> file should look similar to this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inflow hydrograph</span>
<span class="c1">#</span>
<span class="n">T</span>	<span class="n">Q</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">s</span>	<span class="n">m3</span><span class="o">/</span><span class="n">s</span>
<span class="mi">15000</span>	<span class="mi">35</span>
<span class="mi">16000</span>	<span class="mi">35</span>
<span class="mi">17000</span>	<span class="mi">50</span>
<span class="mi">19000</span>	<span class="mi">1130</span>
<span class="mi">22000</span>	<span class="mi">101</span>
<span class="mi">25000</span>	<span class="mi">35</span>
<span class="mi">99000</span>	<span class="mi">35</span>
</pre></div>
</div>
<p>The original <em>boundaries.cli</em> file describes the downstream boundary with <em>prescribed Q and H</em> (type <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">5</span> <span class="pre">5</span></code>). However, in the unsteady calculation, <code class="docutils literal notranslate"><span class="pre">Q</span></code> needs to be free (otherwise, Q(2) needed to be defined in <code class="docutils literal notranslate"><span class="pre">inflows.liq</span></code> with an additional column) and for this reason, the <code class="docutils literal notranslate"><span class="pre">boundaries.cli</span></code> file requires some adaptions:</p>
<ul class="simple">
<li><p><strong>Open</strong> the provided <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/steady2d-tutorial/boundaries.cli">boundaries.cli</a> file with a text editor (e.g., <a class="reference internal" href="../get-started/others.html#npp"><span class="std std-ref">NotepadPlusPlus (Text Editor)</span></a> on Windows or <a class="reference internal" href="../get-started/ide.html#install-atom"><span class="std std-ref">Atom</span></a>).</p></li>
<li><p>Use find-and-replace (e.g., <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">H</span></code> keys in <a class="reference internal" href="../get-started/others.html#npp"><span class="std std-ref">NotepadPlusPlus (Text Editor)</span></a>, or <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> + <code class="docutils literal notranslate"><span class="pre">F</span></code> keys in <a class="reference internal" href="../get-started/ide.html#install-atom"><span class="std std-ref">Atom</span></a>):</p>
<ul>
<li><p><strong>Find</strong> <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">5</span> <span class="pre">5</span></code></p></li>
<li><p><strong>Replace</strong> with <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">4</span> <span class="pre">4</span></code></p></li>
<li><p>Click on <strong>Replace</strong> all downstream boundary nodes.</p></li>
</ul>
</li>
<li><p>Similarly, make sure the upstream boundary nodes are all set to <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">5</span> <span class="pre">5</span></code>.</p></li>
<li><p><strong>Save</strong> the file as <strong>boundaries-544.cli</strong> and close it.</p></li>
</ul>
<p>Verify the correct settings by downloading <a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/boundaries-544.cli">boundaries-544.cli</a> for the unsteady simulation.</p>
<p>In the <strong>steering file</strong>, adapt the <strong>file name for the boundary conditions</strong> and add the link to <strong>inflows.liq</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BOUNDARY</span> <span class="n">CONDITIONS</span> <span class="n">FILE</span> <span class="p">:</span> <span class="n">boundaries</span><span class="o">-</span><span class="mf">544.</span><span class="n">cli</span>
<span class="o">/</span> <span class="o">...</span>
<span class="n">LIQUID</span> <span class="n">BOUNDARIES</span> <span class="n">FILE</span> <span class="p">:</span> <span class="n">inflows</span><span class="o">.</span><span class="n">liq</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>Rating Curve (Stage-Discharge Relation)</strong>
To activate the use of a <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a> for an open (liquid) boundary, the <strong>STAGE-DISCHARGE CURVES</strong> keyword needs to be added to the steering file. This keyword accepts the following integers:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> is the <strong>default</strong> that deactivates the usage of a stage-discharge curve.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> applies prescribed elevations as a function of calculated flow rate (discharge).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> applies prescribed flow rates (discharge) as a function of calculated elevation.</p></li>
</ul>
<p>The <strong>STAGE-DISCHARGE CURVES</strong> keyword is a list that assigns one of the three integers (i.e., either <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code>, or <code class="docutils literal notranslate"><span class="pre">2</span></code>) to the open (liquid) boundaries. In this tutorial, the setting <code class="docutils literal notranslate"><span class="pre">STAGE-DISCHARGE</span> <span class="pre">CURVES</span> <span class="pre">:</span> <span class="pre">0;1</span></code> activates the use of a <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a> for the downstream boundary only where the <strong>upstream open boundary number 1</strong> is set to <code class="docutils literal notranslate"><span class="pre">0</span></code> and the <strong>downstream open boundary number 1</strong> is set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>The form (curve) of the <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a> needs to be defined in a stage-discharge file (<a class="reference internal" href="../documentation/glossary.html#term-ASCII"><span class="xref std std-term">ASCII</span></a> text format). Such files typically apply to the downstream boundary of a model at control sections (e.g., a free overflow weir). This tutorial uses the following relationship that is stored in a file called <em>ratingcurve.txt</em> (<a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/ratingcurve.txt">download</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Downstream ratingcurve.txt</span>
<span class="c1">#</span>
<span class="n">Z</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>	<span class="n">Q</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">m</span>	<span class="n">m3</span><span class="o">/</span><span class="n">s</span>
<span class="mf">371.33</span>	<span class="mi">35</span>
<span class="mf">371.45</span>	<span class="mi">50</span>
<span class="mf">371.86</span>	<span class="mi">101</span>
<span class="mf">375.73</span>	<span class="mi">1130</span>
<span class="mf">379.08</span>	<span class="mi">2560</span>
</pre></div>
</div>
<p>To define <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a>s for multiple open boundaries (e.g., at river diversions or tributaries), add the curves to the same file. TELEMAC automatically recognizes where the curves apply by the number given in parentheses after the parameter name in the column header. For instance, in the above example for this tutorial, the column headers <code class="docutils literal notranslate"><span class="pre">Z(2)</span></code> and <code class="docutils literal notranslate"><span class="pre">Q(2)</span></code> tell TELEMAC to use these values for the second (i.e., here, the downstream) open boundary. The column order is not important because TELEMAC reads the curve type (i.e., either <span class="math notranslate nohighlight">\(Q(Z)\)</span> or <span class="math notranslate nohighlight">\(Z(Q)\)</span>) from the <strong>STAGE-DISCHARGE CURVES</strong> keyword.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Expand to view an example for multiple stage-discharge curve definitions<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The following file block would prescribe <a class="reference internal" href="../documentation/glossary.html#term-Stage-discharge-relation"><span class="xref std std-term">Stage-discharge relation</span></a>s to the upstream and downstream boundary conditions in this tutorial. However, the file cannot be used here unless the upstream boundary type is changed to <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">5</span> <span class="pre">5</span></code> (<code class="docutils literal notranslate"><span class="pre">prescribed</span> <span class="pre">H</span> <span class="pre">and</span> <span class="pre">Q</span></code>) in the <code class="docutils literal notranslate"><span class="pre">boundaries.cli</span></code> file (read more in the <a class="reference internal" href="pre-slf-tm.html#bk-liquid-bc"><span class="std std-ref">pre-processing tutorial</span></a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># Downstream Rating Curve</span>
<span class="c1">#</span>
<span class="n">Z</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>	<span class="n">Q</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">m</span>	<span class="n">m3</span><span class="o">/</span><span class="n">s</span>
<span class="mf">371.33</span>	<span class="mi">35</span>
<span class="mf">371.45</span>	<span class="mi">50</span>
<span class="mf">371.86</span>	<span class="mi">101</span>
<span class="mf">375.73</span>	<span class="mi">1130</span>
<span class="mf">379.08</span>	<span class="mi">2560</span>
<span class="c1">#</span>
<span class="c1"># Upstream Rating Curve</span>
<span class="c1">#</span>
<span class="n">Q</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="n">Z</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">m3</span><span class="o">/</span><span class="n">s</span>  <span class="n">m</span>
<span class="mi">35</span>    <span class="mf">371.33</span>
<span class="mi">50</span>    <span class="mf">371.45</span>
<span class="mi">101</span>   <span class="mf">371.86</span>
<span class="mi">1130</span>  <span class="mf">375.73</span>
<span class="mi">2560</span>  <span class="mf">379.08</span>
</pre></div>
</div>
</div>
</details><p>To use the stage-discharge file, <strong>define the STAGE-DISCHARGE … keywords in the steering file</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">steering</span><span class="o">.</span><span class="n">cas</span>
<span class="n">STAGE</span><span class="o">-</span><span class="n">DISCHARGE</span> <span class="n">CURVES</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span><span class="mi">1</span>
<span class="n">STAGE</span><span class="o">-</span><span class="n">DISCHARGE</span> <span class="n">CURVES</span> <span class="n">FILE</span> <span class="p">:</span> <span class="n">ratingcurve</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>Remove Ambiguous Open Boundary Definition Keywords</strong></p>
<p>To avoid ambiguous definitions of the open boundaries conditions, <strong>deactivate</strong> (i.e., delete or comment out lines with a <code class="docutils literal notranslate"><span class="pre">/</span></code>) the <strong>PRESCRIBED …</strong> keywords in the steering file:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="w"> </span><span class="n">PRESCRIBED</span><span class="w"> </span><span class="n">FLOWRATES</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="mf">5.</span><span class="p">;</span><span class="mi">3</span><span class="mf">5.</span>
<span class="o">/</span><span class="w"> </span><span class="n">PRESCRIBED</span><span class="w"> </span><span class="n">ELEVATIONS</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.</span><span class="p">;</span><span class="mi">37</span><span class="mf">1.33</span>
</pre></div>
</div>
</section>
<section id="numerical-parameters">
<h3>Numerical Parameters<a class="headerlink" href="#numerical-parameters" title="Permalink to this headline">#</a></h3>
<p>The predictor-corrector schemes (<strong>SCHEME FOR …</strong> keywords defined with <code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">4</span></code>, <code class="docutils literal notranslate"><span class="pre">5</span></code>, or <code class="docutils literal notranslate"><span class="pre">15</span></code> as explained in the <a class="reference internal" href="telemac2d-steady.html#tm2d-numerical"><span class="std std-ref">steady2d tutorial</span></a>) rely on a parameter defining the number of iterations at every timestep for convergence. For quasi-steady simulations, TELEMAC developers recommend setting this parameter to <code class="docutils literal notranslate"><span class="pre">2</span></code> or slightly larger (section 7.2.1 in the <a class="reference external" href="https://gitlab.pam-retd.fr/otm/telemac-mascaret/-/blob/v8p4r0/documentation/telemac2d/user/telemac2d_user_v8p4.pdf">Telemac2d manual</a>). Therefore, <strong>add the following line to the steering file</strong>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">NUMBER</span><span class="w"> </span><span class="n">OF</span><span class="w"> </span><span class="n">CORRECTIONS</span><span class="w"> </span><span class="n">OF</span><span class="w"> </span><span class="n">DISTRIBUTIVE</span><span class="w"> </span><span class="n">SCHEMES</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="control-sections">
<span id="tm-control-sections"></span><h3>Control Sections<a class="headerlink" href="#control-sections" title="Permalink to this headline">#</a></h3>
<p>A consistent way to verify fluxes at open boundaries or other particular lines (e.g., tributary inflows or diversions) is to use the <strong>CONTROL SECTIONS</strong> keyword. A control section is defined by a sequence of neighboring node numbers. For instance, to verify the fluxes over the open boundaries in this tutorial, check out the node numbers in the <em>boundaries.cli</em> file (e.g., 144 to 32 for the upstream and 34 to 5 for the downstream boundary). Then, <strong>create a new text file</strong> (e.g., <strong>control-sections.txt</strong>) and:</p>
<ul class="simple">
<li><p><strong>Add one comment line</strong> with some short information (e.g., <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">control</span> <span class="pre">sections</span> <span class="pre">input</span> <span class="pre">file</span></code>). Note that this line is <strong>mandatory</strong>.</p></li>
<li><p>In the <strong>second line</strong> add a <strong>space-separated list of 2 integers</strong> where</p>
<ul>
<li><p>the first integer defines the number of cross-sections, and</p></li>
<li><p>the second integer defines if node numbers (i.e., IDs from <em>boundaries.cli</em> or <em>qgismesh.slf</em>) or coordinates will be defined. A negative number enables the node ID-mode, and a positive number enables the coordinates-mode.</p></li>
</ul>
</li>
<li><p><strong>Define as many cross sections as defined with the first integer.</strong> Every cross-section definition consists of two lines:</p>
<ul>
<li><p>The first line is a <em>string</em> (text) without spaces that is naming the cross-section (e.g., <code class="docutils literal notranslate"><span class="pre">inflow_cs</span></code>).</p></li>
<li><p>The second line consists of two numbers defining the start and end points of the cross-sections. If the second integer in the file line is negative, provide two space-separated integers. If the second integer is positive, provide two space-separated pairs of coordinates (put a space between coordinates).</p></li>
</ul>
</li>
</ul>
<p>For example, the following <em>control-sections.txt</em> file can be used with the steady simulation in this tutorial (<a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/control-sections.txt">download control-sections.txt</a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># control sections steady2d</span>
<span class="mi">2</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">Inflow_boundary</span>
<span class="mi">144</span> <span class="mi">32</span>
<span class="n">Outflow_boundary</span>
<span class="mi">34</span> <span class="mi">5</span>
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Expand to view an example for coordinate-based control sections<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The following control section file uses point coordinates rather than node ID numbers to define three sections. Read more in <span id="id1">Gifford-Miears and Leon [<a class="reference internal" href="../documentation/bibliography.html#id1345" title="C. Gifford-Miears and A. Leon. Tutorial on the use of TELEMAC-2D Hydrodynamics model and Pre-/Post-processing with BlueKenue for flood-inundation mapping in Unsteady Flow Conditions. Oregon State University, Corvallis, USA, 2013. URL: https://web.eng.fiu.edu/arleon/courses/Transient_flows/Tutorials/TELEMAC_2D/TELEMAC_2D_Tutorial_Baxter.pdf.">GML13</a>]</span> (i.e., section 4.1.2 in the <a class="reference external" href="http://www.opentelemac.org/index.php/component/jdownloads/summary/4-training-and-tutorials/185-telemac-2d-tutorial?Itemid=55">Baxter tutorial</a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># control section file using coordinates</span>
<span class="mi">3</span> <span class="mi">0</span>
<span class="n">affluent_creek</span>
<span class="mf">19572355.895577</span> <span class="mf">626823.06664</span> <span class="mf">1952347.2733</span> <span class="mf">626923.9554</span>
<span class="n">main_river_upstream</span>
<span class="mf">1946449.824</span> <span class="mf">635349.6070</span> <span class="mf">194.919</span> <span class="mf">635209.807</span>
<span class="n">main_river_downstream</span>
<span class="mf">1967737.56993</span> <span class="mf">620784.415608</span> <span class="mf">1967998.16429</span> <span class="mf">620638.17849</span>
</pre></div>
</div>
</div>
</details><p>The second line in this file tells TELEMAC to use <code class="docutils literal notranslate"><span class="pre">2</span></code> control sections, which are defined by node IDs (<code class="docutils literal notranslate"><span class="pre">-1</span></code>). To use the control sections for the simulation add the following to the steering file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span> <span class="n">steady2d</span><span class="o">.</span><span class="n">cas</span>
<span class="o">/</span> <span class="o">...</span>
<span class="n">SECTIONS</span> <span class="n">INPUT</span> <span class="n">FILE</span> <span class="p">:</span>  <span class="n">control</span><span class="o">-</span><span class="n">sections</span><span class="o">.</span><span class="n">txt</span>
<span class="n">SECTIONS</span> <span class="n">OUTPUT</span> <span class="n">FILE</span> <span class="p">:</span> <span class="n">r</span><span class="o">-</span><span class="n">control</span><span class="o">-</span><span class="n">flows</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Thus, re-running the simulation will write the fluxes across the two define control sections to a file called <em>r-control-flows.txt</em>. The <a class="reference external" href="https://gitlab.pam-retd.fr/otm/telemac-mascaret/-/blob/v8p4r0/documentation/telemac2d/user/telemac2d_user_v8p4.pdf">Telemac2d manual</a> provides explanations in section 5.2.2.</p>
</section>
</section>
<section id="run-telemac2d-unsteady">
<h2>Run Telemac2d Unsteady<a class="headerlink" href="#run-telemac2d-unsteady" title="Permalink to this headline">#</a></h2>
<p>Go to the configuration folder of the local TELEMAC installation (e.g., <code class="docutils literal notranslate"><span class="pre">~/telemac/v8p2/configs/</span></code>) and load the environment (e.g., <code class="docutils literal notranslate"><span class="pre">pysource.openmpi.sh</span></code> - use the same as for compiling TELEMAC).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">v8p2</span><span class="o">/</span><span class="n">configs</span>
<span class="n">source</span> <span class="n">pysource</span><span class="o">.</span><span class="n">openmpi</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<div class="note dropdown admonition">
<p class="admonition-title">If you are using the Hydro-Informatics (Hyfo) Mint VM</p>
<p>If you are working with the <a class="reference internal" href="../get-started/vm.html#hyfo-vm"><span class="std std-ref">Mint Hyfo VM</span></a>, load the TELEMAC environment as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">v8p2</span><span class="o">/</span><span class="n">configs</span>
<span class="n">source</span> <span class="n">pysource</span><span class="o">.</span><span class="n">hyfo</span><span class="o">-</span><span class="n">dyn</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
<p>With the TELEMAC environment loaded, change to the directory where the unsteady simulation lives (e.g., <code class="docutils literal notranslate"><span class="pre">/home/telemac/v8p2/mysimulations/unsteady2d-tutorial/</span></code>) and run the <code class="docutils literal notranslate"><span class="pre">*.cas</span></code> file by calling the <strong><a class="reference external" href="http://telemac2d.py">telemac2d.py</a></strong> script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">telemac</span><span class="o">/</span><span class="n">v8p2</span><span class="o">/</span><span class="n">mysimulations</span><span class="o">/</span><span class="n">unsteady2d</span><span class="o">-</span><span class="n">tutorial</span><span class="o">/</span>
<span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">unsteady2d</span><span class="o">.</span><span class="n">cas</span>
</pre></div>
</div>
<div class="admonition-speed-up admonition">
<p class="admonition-title">Speed up</p>
<p>With <a class="reference internal" href="../get-started/install-telemac.html#mpi"><span class="std std-ref">parallelism</span></a> enabled (e.g., in the <a class="reference internal" href="../get-started/vm.html#hyfo-vm"><span class="std std-ref">Mint Hyfo Virtual Machine</span></a>), speed up the calculation by using multiple cores through the <code class="docutils literal notranslate"><span class="pre">--ncsize=N</span></code> flag. For instance, the following line runs the unsteady simulation on <code class="docutils literal notranslate"><span class="pre">N=2</span></code> cores:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">telemac2d</span><span class="o">.</span><span class="n">py</span> <span class="n">unsteady2d</span><span class="o">.</span><span class="n">cas</span> <span class="o">--</span><span class="n">ncsize</span><span class="o">=</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<p>A successful computation should end with the following lines (or similar) in <em>Terminal</em>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="p">[...]</span>
<span class="w">                    </span><span class="o">*************************************</span>
<span class="w">                    </span><span class="o">*</span><span class="w">    </span><span class="k">END </span><span class="n">OF</span><span class="w"> </span><span class="k">MEMORY </span><span class="n">ORGANIZATION</span><span class="p">:</span><span class="w">    </span><span class="o">*</span>
<span class="w">                    </span><span class="o">*************************************</span>

<span class="n">CORRECT</span><span class="w"> </span><span class="k">END </span><span class="n">OF</span><span class="w"> </span><span class="n">RUN</span>

<span class="n">ELAPSE</span><span class="w"> </span><span class="nb">TIME</span><span class="w"> </span><span class="p">:</span>
<span class="w">                            </span><span class="mi">10</span><span class="w">  </span><span class="n">MINUTES</span>
<span class="w">                            </span><span class="mi">32</span><span class="w">  </span><span class="n">SECONDS</span>
<span class="p">...</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="k">result </span><span class="n">files</span>

<span class="p">...</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="k">result </span><span class="n">files</span>
<span class="w">       </span><span class="n">moving</span><span class="p">:</span><span class="w"> </span><span class="n">r2dunsteady</span><span class="p">.</span><span class="n">slf</span>
<span class="w">       </span><span class="n">moving</span><span class="p">:</span><span class="w"> </span><span class="n">r</span><span class="o">-</span><span class="n">control</span><span class="o">-</span><span class="n">sections</span><span class="p">.</span><span class="n">txt</span>
<span class="p">...</span><span class="w"> </span><span class="n">deleting</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">dir</span>

<span class="n">My</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="k">is </span><span class="n">done</span>
</pre></div>
</div>
<p>Telemac2d will write the files <em>r2dunsteady.slf</em> and <em>r-control-sections.txt</em>. Both results files are also available in the this eBook’s TELEMAC repository to enable accomplishing the post-processing tutorial:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/r2dunsteady.slf">get r2dunsteady.slf</a>, and</p></li>
<li><p><a class="reference external" href="https://github.com/hydro-informatics/telemac/raw/main/unsteady2d-tutorial/r-control-sections.txt">get r-control-sections.txt</a>.</p></li>
</ul>
</section>
<section id="post-processing">
<h2>Post-processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">#</a></h2>
<section id="open-boundary-flows">
<h3>Open Boundary Flows<a class="headerlink" href="#open-boundary-flows" title="Permalink to this headline">#</a></h3>
<p>The unsteady simulation intends to model time-variable flows over the open upstream and downstream open boundaries. The above-defined <a class="reference internal" href="#tm-control-sections"><span class="std std-ref">control sections</span></a> enable insights into the correct adaptation of the flow at the upstream inflow boundary (<em>prescribed Q</em> through <em>inflows.liq</em>) and the downstream outflow boundary (<em>prescribed H</em> through <em>ratingcurve.txt</em>). <a class="reference internal" href="#res-unsteady-hydrograph"><span class="std std-numref">Figure 90</span></a> shows the modeled flow rates where the <em>Inflow_boundary</em> shows perfect agreement with <em>inflows.liq</em> and the <em>Outflow_boundary</em> reflects the flattening of the discharge curve in the modeled meandering gravel-cobble bed river.</p>
<figure class="align-default" id="res-unsteady-hydrograph">
<img alt="result unsteady flow discharge telemac2d hydrodynamic inflow outflow control sections" src="../_images/res-unsteady-hydrograph.png" />
<figcaption>
<p><span class="caption-number">Fig. 90 </span><span class="caption-text">The simulated flows over the upstream <em>Inflow_boundary</em> and the downstream <em>Outflow_boundary</em> control sections.</span><a class="headerlink" href="#res-unsteady-hydrograph" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The peak inflow corresponds to the specified 1130 m<span class="math notranslate nohighlight">\(^3\)</span>/s while the outflow peak discharge is only 889 m<span class="math notranslate nohighlight">\(^3\)</span>/s and the peak takes about 1070 seconds (inflow at <span class="math notranslate nohighlight">\(T=19000\)</span> and outflow at <span class="math notranslate nohighlight">\(T\approx 20070\)</span>) to travel through the section.</p>
<div class="warning dropdown admonition">
<p class="admonition-title">Resolve volume balance issues in unsteady simulations</p>
<p>The total inflow and outflow volumes in the here featured simulation amount to 3479930.958 m<span class="math notranslate nohighlight">\(^3\)</span> and 3430100.437 m<span class="math notranslate nohighlight">\(^3\)</span>, respectively. Thus, there is a total volume error of 1.4<span class="math notranslate nohighlight">\(%\)</span>. To overcome such issues, the <a class="reference external" href="https://gitlab.pam-retd.fr/otm/telemac-mascaret/-/blob/v8p4r0/documentation/telemac2d/user/telemac2d_user_v8p4.pdf">Telemac2d manual</a> recommends using a minimum value for water depth to define when a cell is wet or dry. At the same time, the developers do not recommend using a minimum water depth for most simulations and emphasize to use this option only for unsteady (quasi-steady) simulations. Defining a minimum water depth requires setting the <strong>TREATMENT OF THE TIDAL FLATS</strong> keyword to <code class="docutils literal notranslate"><span class="pre">2</span></code> (read more in the <a class="reference internal" href="telemac2d-steady.html#tm2d-tidal"><span class="std std-ref">steady2d tutorial</span></a>), which is neither compatible with parallelization routines, nor with the here used <code class="docutils literal notranslate"><span class="pre">SCHEME</span> <span class="pre">FOR</span> <span class="pre">ADVECTION</span> <span class="pre">...</span> <span class="pre">:</span> <span class="pre">14</span></code> settings. Thus, better results, but long non-parallelized quasi-steady calculations could be supposedly yielded with the following keywords in the steering file:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">OPTION</span><span class="w"> </span><span class="n">FOR</span><span class="w"> </span><span class="n">THE</span><span class="w"> </span><span class="n">TREATMENT</span><span class="w"> </span><span class="n">OF</span><span class="w"> </span><span class="n">TIDAL</span><span class="w"> </span><span class="n">FLATS</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">use </span><span class="n">segment</span><span class="o">-</span><span class="n">wise</span><span class="w"> </span><span class="n">flux</span><span class="w"> </span><span class="n">control</span>
<span class="n">MINIMUM</span><span class="w"> </span><span class="k">VALUE </span><span class="n">OF</span><span class="w"> </span><span class="n">DEPTH</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">meters</span>
</pre></div>
</div>
</div>
</section>
<section id="visualization-with-qgis">
<span id="tm-unsteady-qgis"></span><h3>Visualization with QGIS<a class="headerlink" href="#visualization-with-qgis" title="Permalink to this headline">#</a></h3>
<p>The results of the unsteady simulation can be visualized and snapshots exported to raster (e.g., <a class="reference internal" href="../documentation/glossary.html#term-GeoTIFF"><span class="xref std std-term">GeoTIFF</span></a>) or shapefile formats in QGIS with the PostTelemac plugin the same way as explained in the steady2d tutorial (<a class="reference internal" href="telemac2d-steady.html#tm2d-post-export"><span class="std std-ref">read the steady2d post-processing</span></a>). The latest QGIS releases additionally enable to load the Selafin results mesh file (here: <em>r2dunsteady.slf</em>) as a QGIS mesh layer. Therefore, <strong>launch QGIS</strong>, go to the <strong>Layer</strong> menu and click on <strong>Add Layer</strong> &gt; <strong>Add Mesh Layer…</strong>. In the popup window (<em>Data Source Manager / Mesh</em>), <strong>select r2dunsteady.slf</strong>, click <strong>Add</strong>, and <strong>Close</strong>. <a class="reference internal" href="#qgis-r2dunsteady-imported"><span class="std std-numref">Figure 91</span></a> shows the imported r2dunsteady mesh layer in QGIS with a <em>Softlight</em> blending (set in the <em>Symbology</em>) on google satellite imagery.</p>
<figure class="align-default" id="qgis-r2dunsteady-imported">
<img alt="qgis telemac2d unsteady quasi steady simulation results slf" src="../_images/qgis-r2dunsteady-imported.png" />
<figcaption>
<p><span class="caption-number">Fig. 91 </span><span class="caption-text">The unsteady (quasi-steady) simulation results file r2dunsteady.slf imported as mesh layer in QGIS and super-positioned on google satellite imagery <span id="id2">[<a class="reference internal" href="../documentation/bibliography.html#id1370" title="Google. Google Satellite imagery. nd. URL: https://mt1.google.com/vt/lyrs=s&amp;x={x}&amp;y={y}&amp;z={z}.">Goond</a>]</span>.</span><a class="headerlink" href="#qgis-r2dunsteady-imported" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="error dropdown admonition">
<p class="admonition-title">r2dunsteady.slf (results file) not correctly showing in QGIS</p>
<p>Is the results file <code class="docutils literal notranslate"><span class="pre">r2dunsteady.slf</span></code> not showing up in QGIS? Make sure to import it with its correct georeference: <strong>EPSG:6173</strong> (ETRS 89 / UTM zone 33N).</p>
</div>
<p>The simulation output parameters (e.g., <code class="docutils literal notranslate"><span class="pre">U</span></code>, <code class="docutils literal notranslate"><span class="pre">V</span></code>, or <code class="docutils literal notranslate"><span class="pre">Q</span></code>) and the timestep shown can be controlled in the layer properties of the <code class="docutils literal notranslate"><span class="pre">r2dunsteady</span></code> layer (double-click on it in the <em>Layers</em> panel).</p>
<p>To <strong>create a video of simulation results</strong>, use the <a class="reference external" href="https://www.lutraconsulting.co.uk/projects/crayfish/">Crayfish</a> plugin that enables the animated visualization of meshes and their attributes (e.g., change of node values over time). Get the <em>Crayfish</em> plugin from QGIS <strong>Plugins</strong> menu &gt; <strong>Manage and Install Plugins…</strong> &gt; tap <code class="docutils literal notranslate"><span class="pre">crayfish</span></code> in the <strong>All</strong> tab and click on <strong>Install Plugin</strong>. The plugin is now ready to create a video by clicking through QGIS <strong>Mesh</strong> menu &gt; <strong>Crayfish</strong> <strong>Export Animation …</strong>. In the <em>Crayfish</em> popup window, toggle through the three tabs, and adapt video settings (e.g., define a file name such as <code class="docutils literal notranslate"><span class="pre">velocity-video.avi</span></code> in the <strong>General</strong> tab). Note that <em>Crayfish</em> will automatically export the frame and active variable (here, the default is <code class="docutils literal notranslate"><span class="pre">U</span></code>) selected on the mesh (<em>Layer Properties</em>). When all settings are made, click on <strong>OK</strong> to start the export.</p>
<div class="warning admonition">
<p class="admonition-title">Crayfish first time use</p>
<p>The first time that a video is exported, <em>Crayfish</em> will require the definition of an <strong>FFmpeg video encoder</strong> and guide through the installation (if required). Follow the instructions (preferably use automatic installers). If <em>Crayfish</em> did not automatically continue the video export, re-start exporting the video after the FFmpeg installation.</p>
</div>
<p>The below-shown box features an exemplary video output of flow velocity.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Expand to view the resulting video<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<iframe width="701" height="394" src="https://www.youtube-nocookie.com/embed/JKAiZ1ChUEg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> <p>Sebastian Schwindt <a href="https://www.youtube.com/channel/UCGOMSGRrW5eLHiMn5Dfp7WQ">@ Hydro-Morphodynamics channel on YouTube</a>.</p>
</div>
</details><dl class="simple myst">
<dt><strong>What next?</strong></dt><dd><p>This tutorial ends with the graphical output of modeled flow parameters, but there are a couple more steps to accomplish in practice. For instance, the time that the flow peak takes to travel through the modeled river section might be too short (i.e., flow is too fast) or too long (i.e., flow is too slow) compared to observation data (e.g., from stream gauges). In these cases, model <a class="reference internal" href="numerical-modeling.html#calibration"><span class="std std-ref">calibration</span></a> through variations of the <a class="reference internal" href="telemac2d-steady.html#tm2d-friction"><span class="std std-ref">FRICTION COEFFICIENT</span></a> keyword might be a solution.</p>
</dd>
</dl>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hydro-informatics/jupyter-python-course",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./numerics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="telemac2d-steady.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Steady 2d</p>
      </div>
    </a>
    <a class="right-next"
       href="telemac3d.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Telemac3d</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-started">Get Started</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-adaptations">Model Adaptations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hotstart-initial-conditions">Hotstart Initial Conditions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-parameters">General Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-boundaries">Open Boundaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numerical-parameters">Numerical Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#control-sections">Control Sections</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-telemac2d-unsteady">Run Telemac2d Unsteady</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#post-processing">Post-processing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-boundary-flows">Open Boundary Flows</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization-with-qgis">Visualization with QGIS</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Sebastian Schwindt, Ricardo Barros
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>